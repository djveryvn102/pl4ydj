var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(f){var b=0;return function(){return b<f.length?{done:!1,value:f[b++]}:{done:!0}}};$jscomp.arrayIterator=function(f){return{next:$jscomp.arrayIteratorImpl(f)}};$jscomp.makeIterator=function(f){var b="undefined"!=typeof Symbol&&Symbol.iterator&&f[Symbol.iterator];return b?b.call(f):$jscomp.arrayIterator(f)};
(function(f){function b(h,p,l,C,y,N,A,H){H=l.length/2;A=Math.round(H*A);var x=Math.round(1*H)+1;H=p.width/(x-A-1);N=y+N;C/=y;h.beginPath();h.moveTo((A-A)*H,N);h.lineTo((A-A)*H,N-Math.round((l[2*A]||0)/C));for(y=A;y<x;y++){var n=l[2*y]||0;n=Math.round(n/C);h.lineTo((y-A)*H+p.halfPixel,N-n)}--x;for(x;x>=A;x--)n=l[2*x+1]||0,n=Math.round(n/C),h.lineTo((x-A)*H+p.halfPixel,N-n);h.lineTo((A-A)*H,N-Math.round((l[2*A+1]||0)/C));h.closePath();h.fill()}var z=function(){};z.isEmpty=function(h){return 0==h.replace(/^\s+|\s+$/g,
"").length};z.strip=function(h){return h.replace(/^\s+|\s+$/g,"")};z.isNumber=function(h){return!isNaN(parseFloat(h))&&isFinite(h)};z.isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|sony|BlackBerry/i.test(navigator.userAgent)};z.isChrome=function(){return!!f.chrome&&(!!f.chrome.webstore||!!f.chrome.runtime)};z.isSafari=function(){return 0<Object.prototype.toString.call(f.HTMLElement).indexOf("Constructor")};z.isIE=function(){var h=-1;if("Microsoft Internet Explorer"==navigator.appName){var p=
navigator.userAgent,l=/MSIE ([0-9]{1,}[.0-9]{0,})/;null!=l.exec(p)&&(h=parseFloat(RegExp.$1))}else"Netscape"==navigator.appName&&(p=navigator.userAgent,l=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/,null!=l.exec(p)&&(h=parseFloat(RegExp.$1)));return-1!=h?!0:!1};z.isIOS=function(){return navigator.userAgent.match(/(iPad|iPhone|iPod)/g)};z.isAndroid=function(){return-1<navigator.userAgent.indexOf("Android")};z.hasDownloadSupport=function(){return"download"in document.createElement("a")};z.qualifyURL=function(h){var p=
document.createElement("a");p.href=h;return p.href};z.relativePath=function(h){return/^(?:[a-z]+:)?\/\//i.test(h)};z.closestNumber=function(h,p){return h.reduce(function(l,C){return Math.abs(C-p)<Math.abs(l-p)?C:l})};z.b64DecodeUnicode=function(h){return decodeURIComponent(atob(h).split("").map(function(p){return"%"+("00"+p.charCodeAt(0).toString(16)).slice(-2)}).join(""))};z.hasLocalStorage=function(){try{return"localStorage"in f&&null!==f.localStorage}catch(h){return!1}};z.volumeCanBeSet=function(){var h=
document.createElement("audio");if(!h)return!1;h.volume=0;return 0==h.volume?!0:!1};z.arrayContainsAnotherArray=function(h,p){var l,C=h.length;for(l=0;l<C;l++)if(-1<p.indexOf(h[l]))return!0;return!1};z.randomiseArray=function(h){var p=[],l=[],C;for(C=0;C<h;C++)p[C]=C;for(C=0;C<h;C++){var y=Math.round(Math.random()*(p.length-1));l[C]=p[y];p.splice(y,1)}return l};z.valueLimit=function(h,p,l){return h<p?p:h>l?l:h};z.sortArray=function(h,p){var l,C=h.length,y=[];for(l=0;l<C;l++)y[l]=h[p[l]];return y};
z.sortNumericArray=function(h){h.sort(function(p,l){return p-l})};z.shuffleArray=function(h){for(var p=h.length-1;0<p;p--){var l=Math.floor(Math.random()*(p+1)),C=$jscomp.makeIterator([h[l],h[p]]);h[p]=C.next().value;h[l]=C.next().value}return h};z.keysrt=function(h,p,l){var C=1;l&&(C=-1);return h.sort(function(y,N){var A=y[p],H=N[p];return C*(A<H?-1:A>H?1:0)})};z.keysrt2=function(h,p,l,C){var y=1;C&&(y=-1);return h.sort(function(N,A){var H=N[p][l],x=A[p][l];return y*(H<x?-1:H>x?1:0)})};z.keysrt3=
function(h,p,l){h.sort(function(C,y){var N=y[l];return p.indexOf(C[l])>p.indexOf(N)?1:-1});return h};z.parseXML=function(h){if(f.ActiveXObject&&f.GetObject){var p=new ActiveXObject("Microsoft.XMLDOM");p.loadXML(h);return p}if(f.DOMParser)return(new DOMParser).parseFromString(h,"text/xml");throw Error("No XML parser available");};z.formatTime=function(h){h=Math.round(h,10);var p=Math.floor(h/3600),l=Math.floor((h-3600*p)/60);h=h-3600*p-60*l;if(0<p)return 10>p&&(p="0"+p),10>l&&(l="0"+l),10>h&&(h="0"+
h),p+":"+l+":"+h;10>l&&(l="0"+l);10>h&&(h="0"+h);return l+":"+h};z.formatTimeWithMiliseconds=function(h){var p=parseInt(h.split(":")[0]),l=parseInt(h.split(":")[1]),C=parseInt(h.split(":")[2]);h=parseInt(h.split(",")[1]||h.split(".")[1]);return Math.round(100*(3600*p+60*l+C+h/1E3))/100};z.toSeconds=function(h){h=h.split(/[\.:,]+/);return Number(3600*+h[0]+60*+h[1]+ +h[2])};z.formatNumber=function(h){return 9>h?"0"+(h+1):h+1};z.nFormatter=function(h,p){var l=[{value:1E18,symbol:"E"},{value:1E15,symbol:"P"},
{value:1E12,symbol:"T"},{value:1E9,symbol:"G"},{value:1E6,symbol:"M"},{value:1E3,symbol:"k"}],C=/\.0+$|(\.[0-9]*[1-9])0+$/,y;for(y=0;y<l.length;y++)if(h>=l[y].value)return(h/l[y].value).toFixed(p).replace(C,"$1")+l[y].symbol;return h.toFixed(p).replace(C,"$1")};z.hmsToSecondsOnly=function(h){h=h.split(":");for(var p=0,l=1;0<h.length;)p+=l*parseInt(h.pop()),l*=60;return p};z.canPlayMp3=function(){var h=document.createElement("audio");return!(!h.canPlayType||!h.canPlayType("audio/mpeg;").replace(/no/,
""))};z.canPlayWav=function(){var h=document.createElement("audio");return!(!h.canPlayType||!h.canPlayType("audio/wav;").replace(/no/,""))};z.canPlayAac=function(){var h=document.createElement("audio");return!(!h.canPlayType||!h.canPlayType("audio/aac;").replace(/no/,""))};z.canPlayOgg=function(){var h=document.createElement("audio");return!(!h.canPlayType||!h.canPlayType('audio/ogg; codecs="vorbis"').replace(/no/,""))};z.canPlayFlac=function(){var h=document.createElement("audio");return!(!h.canPlayType||
!h.canPlayType("audio/flac;").replace(/no/,""))};z.hasCanvas=function(){return!!document.createElement("canvas")};z.getElementOffsetTop=function(h){h=h.getBoundingClientRect();var p=document.body,l=document.documentElement;return Math.round(h.bottom-100+(f.pageYOffset||l.scrollTop||p.scrollTop)-(l.clientTop||p.clientTop||0))};z.getScrollTop=function(h){h=document.documentElement;return(f.pageYOffset||h.scrollTop)-(h.clientTop||0)};z.getEvents=function(){var h={};"ontouchstart"in f?(h.downEvent="touchstart mousedown",
h.moveEvent="touchmove mousemove",h.upEvent="touchend mouseup"):f.PointerEvent?(h.downEvent="pointerdown",h.moveEvent="pointermove",h.upEvent="pointerup"):(h.downEvent="mousedown",h.moveEvent="mousemove",h.upEvent="mouseup");return h};z.getUrlParameter=function(h){var p={};f.location.search.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(l,C,y){p[C]=y});return h?p[h]:p};z.drawBars=function(h,p,l,C,y,N){var A=1/l.barHeight;if(l.normalize){A=util.max(C);var H=util.min(C);A=-H>A?-H:A}var x=[].some.call(C,
function(B){return 0>B});H=l.height*l.pixelRatio/2;x=x?2:1;var n=l.barWidth*l.pixelRatio,w=n+(null===l.barGap?Math.max(l.pixelRatio,~~(n/2)):Math.max(l.pixelRatio,l.barGap*l.pixelRatio)),D=C.length/x/l.width,m=y;for(m;m<N;m+=w){var t=C[Math.floor(m*D*x)]||0;t=Math.round(t/A*H);0==t&&l.barMinHeight&&(t=l.barMinHeight);h.fillRect(m+l.halfPixel,H-t,n+l.halfPixel,2*t,l.barRadius)}m=y;for(m;m<N;m+=w)t=C[Math.floor(m*D*x)]||0,t=Math.round(t/A*H),0==t&&l.barMinHeight&&(t=l.barMinHeight),p.fillRect(m+l.halfPixel,
H-t,n+l.halfPixel,2*t,l.barRadius)};z.drawWave=function(h,p,l,C,y,N){var A=1/l.barHeight;if(l.normalize){A=util.max(C);var H=util.min(C);A=-H>A?-H:A}var x=[].some.call(C,function(D){return 0>D});H=l.height*l.pixelRatio/2;if(!x){x=[];var n=C.length,w=0;for(w;w<n;w++)x[2*w]=C[w],x[2*w+1]=-C[w];C=x}void 0!==y&&(b(h,l,C,A,H,0,y,N),b(p,l,C,A,H,0,y,N));h.fillRect(0,H+0-l.halfPixel,l.width,l.halfPixel,l.barRadius);p.fillRect(0,H+0-l.halfPixel,l.width,l.halfPixel,l.barRadius)};f.HAPUtils=z})(window);
(function(f,b){f.HAPPlaylistManager=function(z){function h(){w=HAPUtils.randomiseArray(y);console.log(w)}var p=this,l=z.loop,C=z.random,y,N=!1,A=-1,H,x,n=!1,w=[],D=!1;this.setCounter=function(m,t){"undefined"===typeof t&&(t=!0);A=t?A+parseInt(m,10):parseInt(m,10);if(isNaN(A))alert("HAPPlaylistManager message: No active media, counter = "+A);else if(N=!1,"playlist"==l||"single"==l){if(C)if(A>y-1){A=w[y-1];h();if(w[0]==A){var B=w.splice(0,1);w.push(B)}A=0}else 0>A&&(A=w[0],h(),w[y-1]==A&&(B=w.splice(y-
1,1),w.unshift(B)),A=y-1);else A>y-1?A=0:0>A&&(A=y-1);b(p).trigger("HAPPlaylistManager.COUNTER_READY",p.getCounter())}else"off"==l&&(A>y-1?(A=y-1,N=!0):0>A&&(A=0,N=!0),N?b(p).trigger("HAPPlaylistManager.PLAYLIST_END"):b(p).trigger("HAPPlaylistManager.COUNTER_READY",p.getCounter()))};this.getCounter=function(){return C?D?A:w[A]:A};this.advanceHandler=function(m){D=!1;n?(n=!1,x+m>y-1?(A=y-1,b(p).trigger("HAPPlaylistManager.COUNTER_READY",p.getCounter())):0>x+m?(A=0,b(p).trigger("HAPPlaylistManager.COUNTER_READY",
p.getCounter())):p.setCounter(x+m,!1)):p.setCounter(m)};this.processPlaylistRequest=function(m){D=!1;C&&(D=!0,H=m,n||(x=A,n=!0));p.setCounter(m,!1)};this.setPlaylistItems=function(m,t){"undefined"===typeof t&&(t=!0);t&&(A=-1);y=m;C&&h()};this.reSetCounter=function(m){"undefined"===typeof m?A=-1:(m=parseInt(m,10),y?(m>y-1?m=y-1:0>m&&(m=0),A=m):A=-1)};this.setRandom=function(m){(C=m)&&h();if(C){var t=w.length;for(m=0;m<t;m++)if(w[m]==A){if(0==m)break;m=w.splice(m,1);w.unshift(parseInt(m,10));break}A=
0}else n?(A=H,n=!1):A=w[A]};this.setLooping=function(m){l=m};this.getPosition=function(m){return w.indexOf(m)}}})(window,jQuery);
(function(f,b){f.HAPCirclePlayer=function(z){function h(t){C.length&&(n.clearRect(0,0,H,H),n.beginPath(),n.arc(H/2,H/2,m-y/2,-D,w*t-D,!1),n.strokeStyle=x,n.lineCap="butt",n.lineWidth=y,n.stroke())}z=z.parent;var p=z.find(".hap-circle-player"),l=z.find(".hap-load-canvas"),C=z.find(".hap-progress-canvas"),y=parseInt(p.attr("data-stroke-size"),10);if(l.length)var N=l.attr("data-color"),A=l[0].getContext("2d"),H=l.width();if(C.length){var x=C.attr("data-color"),n=C[0].getContext("2d");H=C.width()}var w=
2*Math.PI,D=Math.PI/2,m=H/2;this.drawSeekbar=function(t,B,K){l.length&&l.length&&(A.clearRect(0,0,H,H),A.beginPath(),A.arc(H/2,H/2,m-y/2,-D,w*t-D,!1),A.strokeStyle=N,A.lineCap="butt",A.lineWidth=y,A.stroke());C.length&&h(B/K)};this.clear=function(){C.length&&n.clearRect(0,0,H,H);l.length&&A.clearRect(0,0,H,H)};this.setProgress=function(t){var B=t.pageX-p.offset().left-H/2;t=t.pageY-p.offset().top-H/2;B=Math.atan2(t,B);B>-1*Math.PI&&B<-.5*Math.PI&&(B=2*Math.PI+B);B=Math.max(0,Math.min((B+Math.PI/2)/
2*Math.PI*10))/100;C.length&&(n.clearRect(0,0,H,H),h(B));return B};this.trackTooltip=function(t){var B=t.pageX-p.offset().left;t=t.pageY-p.offset().top;B=Math.atan2(t-H/2,B-H/2);B>-1*Math.PI&&B<-.5*Math.PI&&(B=2*Math.PI+B);return Math.max(0,Math.min((B+Math.PI/2)/2*Math.PI*10))/100}}})(window,jQuery);
(function(f,b){f.HAPAdManager=function(z,h,p,l,C,y,N){function A(){l.removeEventListener("loadedmetadata",A,!1);b(B).trigger("HAPAdManager.ADPRE_PLAY");S=l;S.addEventListener("timeupdate",t,!1);t()}function H(){J++;if(J<ea.adPre.length){S.src=ea.adPre[J];var na=S.play();void 0!==na&&na.then(function(){})["catch"](function(Aa){})}else S.removeEventListener("timeupdate",t,!1),l.removeEventListener("ended",H,!1),q=!1,J=0,b(B).trigger("HAPAdManager.ADPRE_ENDED")}function x(){K&&!G?G=!0:(W&&(b(B).trigger("HAPAdManager.ADMID_PLAY"),
S=k,S.addEventListener("timeupdate",t,!1)),O=!0,k.volume=ja,b(h).trigger("adMidPlay",{instance:h,instanceName:z.instanceName,media:ea.adMid}))}function n(){K&&!M?M=!0:(W&&(S.removeEventListener("timeupdate",t,!1),b(B).trigger("HAPAdManager.ADMID_ENDED")),O=!1,b(h).trigger("adMidEnded",{instance:h,instanceName:z.instanceName,media:ea.adMid}),w())}function w(){v&&clearTimeout(v);v=setTimeout(function(){v=null;h.getMediaPlaying()&&(J++,J>ea.adMid.length-1&&(J=0),k.src=ea.adMid[J],k.play())},parseInt(ea.adMidInterval||
1E4,10)+z.dataInterval)}function D(){l.removeEventListener("loadedmetadata",D,!1);b(B).trigger("HAPAdManager.ADEND_PLAY");S=l;S.addEventListener("timeupdate",t,!1)}function m(){J++;if(J<ea.adEnd.length){S.src=ea.adEnd[J];var na=S.play();void 0!==na&&na.then(function(){})["catch"](function(Aa){})}else S.removeEventListener("timeupdate",t,!1),S.removeEventListener("ended",m,!1),da=!1,b(B).trigger("HAPAdManager.ADEND_ENDED")}function t(){if(q||da)var na=l.currentTime,Aa=l.duration;else O&&(na=k.currentTime,
Aa=k.duration);HAPUtils.isNumber(na)&&HAPUtils.isNumber(Aa)&&(y.width(na/Aa*ya),na=parseInt(Aa-na,10),N.find("span").html(HAPUtils.formatTime(na)))}var B=this,K=navigator.userAgent.match(/(iPad|iPhone|iPod)/g),W=z.pauseAudioDuringAds,S,q,k,v,O,G,M,da,J=0,ea=p,ja=z.volume,ya;this.initAdPre=function(){q=!0;l.addEventListener("loadedmetadata",A,!1);l.addEventListener("ended",H,!1);l.src=ea.adPre[J]};this.forceAdMidAudio=function(){b(B).trigger("HAPAdManager.IOS_ADMID_FIX_START",!0);k||(k=document.createElement("audio"),
k.addEventListener("play",x,!1),k.addEventListener("ended",n,!1));k.src=z.sourcePath+"data/silence.mp3";k.play()};this.adMidStartHandler=function(){k||(k=document.createElement("audio"),k.addEventListener("play",x,!1),k.addEventListener("ended",n,!1));K?M&&w():w()};this.adMidPlayHandler=function(){v||(K?M&&w():w())};this.clearAdMidTimeout=function(){v&&(clearTimeout(v),v=null)};this.toggleAdMidAudio=function(){if(k&&W)if(k.paused){var na=k.play();void 0!==na&&na.then(function(){})["catch"](function(Aa){})}else k.pause()};
this.setAdEnd=function(){da=!0;J=0;l.addEventListener("loadedmetadata",D,!1);l.addEventListener("ended",m,!1);l.src=ea.adEnd[J];var na=l.play();void 0!==na&&na.then(function(){})["catch"](function(Aa){})};this.isAdOn=function(){return q||O||da};this.isAdPreOn=function(){return q};this.isAdMidOn=function(){return O};this.isAdEndOn=function(){return da};this.setAdData=function(na){ea=na;J=0};this.setSeekBarSize=function(na){ya=na};this.setVolume=function(na){ja=na;k&&(k.volume=ja)};this.cleanAds=function(){S&&
S.removeEventListener("timeupdate",t,!1);q&&(l.removeEventListener("loadedmetadata",A,!1),l.removeEventListener("ended",H,!1),q=!1);v&&(clearTimeout(v),v=null);O&&(k&&(k.pause(),k.src=""),O=!1);da&&(l.removeEventListener("loadedmetadata",D,!1),l.removeEventListener("ended",m,!1),da=!1)}}})(window,jQuery);
(function(f,b){f.HAPRadioData=function(z,h){function p(){var G=x.path;";"==G.substring(G.length-1)&&(G=G.substring(0,G.length-1));"/"==G.substring(G.length-1)&&(G=G.substring(0,G.length-1));if(z.enableCors){f.radioDataXHR&&f.radioDataXHR.abort();var M=new XMLHttpRequest;M.onerror=function(J){};M.onreadystatechange=function(){if(4===this.readyState){if(200===this.status){if(x.version&&1==x.version)var J=M.responseText.split(","),ea=J[6];else J=JSON.parse(M.responseText),ea=J.songtitle;n=J;var ja=ea.split("-");
J=b.trim(ja[0]);ja=b.trim(ja[1]);w={artist:J,title:ja,thumb:null};D?D!=ea&&(z.getRadioArtwork?y(J,ja):t||b(H).trigger("HAPRadioData.DATA_READY",w)):z.getRadioArtwork?y(J,ja):t||b(H).trigger("HAPRadioData.DATA_READY",w)}D=ea}else m||(q&&clearInterval(q),q=setInterval(function(){p()},k))};if(x.version&&1==x.version)M.open("GET",W[S]+G+"/7.html",!0);else{var da=z.sid||"1";M.open("GET",W[S]+G+"/stats?sid="+da+"&json=1",!0)}M.send();f.radioDataXHR=M}else da=x.sid||"1",b.ajax({dataType:"jsonp",url:G+"/stats?sid="+
da+"&json=1",success:function(J){console.log(J);var ea=J.songtitle;n=J;var ja=J.songtitle.split("-");J=b.trim(ja[0]);ja=b.trim(ja[1]);w={artist:J,title:ja,thumb:null};D?D!=ea?z.getRadioArtwork?y(J,ja):t||b(H).trigger("HAPRadioData.DATA_READY",w):console.log("data hasnt changed"):z.getRadioArtwork?y(J,ja):t||b(H).trigger("HAPRadioData.DATA_READY",w);D=ea},error:function(){console.log("Error getShoutcastData")}})}function l(){var G=x.path;";"==G.substring(G.length-1)&&(G=G.substring(0,G.length-1));
"/"==G.substring(G.length-1)&&(G=G.substring(0,G.length-1));f.radioXHR&&f.radioXHR.abort();var M=new XMLHttpRequest;M.onerror=function(da){};M.onreadystatechange=function(){if(4===this.readyState)if(200===this.status){if(-1<this.responseText.indexOf('{"icestats":')){var da=JSON.parse(this.responseText);if(void 0===da.icestats.source.length)var J=da.icestats.source;else{var ea,ja=da.icestats.source.length;for(ea=0;ea<ja;ea++)if(0<=da.icestats.source[ea].listenurl.indexOf(x.mountpoint)){J=da.icestats.source[ea];
break}}n=J;if(J.yp_currently_playing)var ya=J.yp_currently_playing;else da=J.artist,J=J.title,da&&J?ya=da+"-"+J:J&&(ya=J)}else-1<this.responseText.indexOf('class="streamdata"')?-1<this.responseText.indexOf("Mount Point /"+x.mountpoint)&&(J=this.responseText.substr(this.responseText.indexOf("Mount Point /"+x.mountpoint)),J=J.substr(J.indexOf("Current Song:")),J=J.substr(J.indexOf('<td class="streamdata">')+23),J=J.substr(0,J.indexOf("</td>")),HAPUtils.isEmpty(J)||(ya=J)):-1<this.responseText.indexOf('class="streamstats"')&&
-1<this.responseText.indexOf("Mount Point /"+x.mountpoint)&&(J=this.responseText.substr(this.responseText.indexOf("Mount Point /"+x.mountpoint)),J=J.substr(J.indexOf("Currently playing:")),J=J.substr(J.indexOf('<td class="streamstats">')+24),J=J.substr(0,J.indexOf("</td>")),HAPUtils.isEmpty(J)||(ya=J));ya?(J=ya.split("-"),da=b.trim(J[0]),J=b.trim(J[1]),w={artist:da,title:J,thumb:null},D?D!=ya&&(z.getRadioArtwork?y(da,J):t||b(H).trigger("HAPRadioData.DATA_READY",w)):z.getRadioArtwork?y(da,J):t||b(H).trigger("HAPRadioData.DATA_READY",
w),D=ya):(w={artist:v,title:O,thumb:null},t||b(H).trigger("HAPRadioData.DATA_READY",w))}else 404==this.status&&"Not Found"==this.statusText?(console.log(B[K]+" does not exist!"),K++,B[K]?m||(q&&clearInterval(q),l()):(w={artist:v,title:O,thumb:null},t||b(H).trigger("HAPRadioData.DATA_READY",w))):m||(q&&clearInterval(q),q=setInterval(function(){l()},k))};z.enableCors?M.open("GET",W[S]+G+B[K],!0):M.open("GET",G+B[K],!0);M.send();f.radioXHR=M}function C(){f.radioDataXHR&&f.radioDataXHR.abort();var G=
new XMLHttpRequest;G.onerror=function(da){};G.onreadystatechange=function(){if(4===this.readyState)if(200===this.status){var da=JSON.parse(G.responseText),J=da.artist,ea=da.title,ja=J+" - "+ea,ya=da.thumb||null;n=da;w={artist:J,title:ea,thumb:ya};D?D!=ja&&(z.getRadioArtwork&&null==ya?y(J,ea):t||b(H).trigger("HAPRadioData.DATA_READY",w)):z.getRadioArtwork&&null==ya?y(J,ea):t||b(H).trigger("HAPRadioData.DATA_READY",w);D=ja}else m||(q&&clearInterval(q),q=setInterval(function(){C()},k))};var M="http://www.radiojar.com/api/stations/"+
x.mountpoint+"/now_playing/";z.enableCors?G.open("GET",W[S]+M,!0):G.open("GET",M,!0);G.send();f.radioDataXHR=G}function y(G,M){if(!t){G=N(G);M=A(M);var da=W[S]+"https://itunes.apple.com/search?type=jsonp&term=="+encodeURI(G)+"-"+encodeURI(M)+"&media=music&limit=1",J=new XMLHttpRequest;J.onerror=function(ea){};J.onreadystatechange=function(){if(4===this.readyState)if(200===this.status){var ea=JSON.parse(this.responseText);if(ea.resultCount){var ja=h.width();ja=HAPUtils.closestNumber(z.artworkSize,
ja);ea=ea.results[0].artworkUrl100.replace("100x100",ja+"x"+ja)}else ea=x.thumbDefault;w.thumb=ea;t||b(H).trigger("HAPRadioData.DATA_READY",w);q&&clearInterval(q);q=setInterval(function(){H.getData()},k);m=!0}else 403===this.status&&(S++,S>W.length-1&&(S=0),y(G,M))};J.open("GET",da,!0);J.send();f.artworkDataXHR=J}}function N(G){G=G.toLowerCase();G=b.trim(G);G.includes("&")?G=G.substr(0,G.indexOf(" &")):G.includes("feat")?G=G.substr(0,G.indexOf(" feat")):G.includes("ft.")&&(G=G.substr(0,G.indexOf(" ft.")));
return G}function A(G){G=G.toLowerCase();G=b.trim(G);G.includes("&")?G=G.replace("&","and"):G.includes("(")?G=G.substr(0,G.indexOf(" (")):G.includes("ft")&&(G=G.substr(0,G.indexOf(" ft")));return G}var H=this;HAPUtils.isMobile();var x,n,w,D,m,t,B=["/status-json.xsl","/status.xsl"],K=0,W=z.cors.split(",").map(function(G){return G.trim()}),S=0,q,k=z.lastPlayedInterval,v=z.defaultSongArtist,O=z.defaultSongTitle;0==h.length&&(z.getRadioArtwork=!1);this.getData=function(G){G&&(x=G);t=!1;"shoutcast"==x.type?
p():"icecast"==x.type?l():"radiojar"==x.type?C():console.log("HAPRadioData unknown radio data!")};this.destroy=function(){t=!0;q&&clearInterval(q);q=null;f.radioDataXHR&&(f.radioDataXHR.abort(),delete f.radioDataXHR);f.artworkDataXHR&&(f.artworkDataXHR.abort(),delete f.artworkDataXHR);S=0;m=!1;D=null};this.getRadioData=function(){return n}}})(window,jQuery);
(function(f,b){f.HAPYoutubeLoader=function(z){function h(D){b.ajax({url:D,dataType:"jsonp"}).done(function(m){if(m.error&&m.error.message)console.log(m.error.message);else{var t,B=m.items.length;(x=m.nextPageToken)&&(x=H+"&pageToken="+x);for(t=0;t<B&&N.length!=n;t++){var K=m.items[t];if("youtube_playlist"==C||"youtube_single"==C||"youtube_single_list"==C)K.status?"public"==K.status.privacyStatus&&N.push(p(K,C)):K.snippet&&"Private video"!=K.snippet.title&&N.push(p(K,C))}if("youtube_single"==C||"youtube_single_list"==
C)b(l).trigger("HAPYoutubeLoader.END_LOAD",{data:N,nextPageToken:x});else if(N.length<n)if(x){N.length+A>n&&(A=n-N.length,m=x.substr(0,H.indexOf("&maxResults=")+12),t=x.substr(H.indexOf("&key=")),x=m+A.toString()+t);if("youtube_playlist"==C)var W=x;h(W)}else b(l).trigger("HAPYoutubeLoader.END_LOAD",{data:N,nextPageToken:x});else b(l).trigger("HAPYoutubeLoader.END_LOAD",{data:N,nextPageToken:x})}}).fail(function(m,t,B){console.log(m,t,B)})}function p(D,m){var t=jQuery.extend(!0,{},y);t.type="youtube";
"youtube_single"==m||"youtube_single_list"==m?t.mp3=D.id:"youtube_playlist"==m&&(t.mp3=D.contentDetails.videoId);D.snippet&&(!t.title&&D.snippet.title&&(t.title=D.snippet.title),!t.description&&D.snippet.description&&(t.description=D.snippet.description),D.snippet.publishedAt&&(t.date=D.snippet.publishedAt),!D.thumb&&D.snippet.thumbnails&&(D.snippet.thumbnails.medium?t.thumb=D.snippet.thumbnails.medium.url:D.snippet.thumbnails.high?t.thumb=D.snippet.thumbnails.high.url:D.snippet.thumbnails["default"]&&
(t.thumb=D.snippet.thumbnails["default"].url)));if(D.contentDetails&&D.contentDetails.duration){var B=D.contentDetails.duration,K=B.match(/\d+/g);0<=B.indexOf("M")&&-1==B.indexOf("H")&&-1==B.indexOf("S")&&(K=[0,K[0],0]);0<=B.indexOf("H")&&-1==B.indexOf("M")&&(K=[K[0],0,K[1]]);0<=B.indexOf("H")&&-1==B.indexOf("M")&&-1==B.indexOf("S")&&(K=[K[0],0,0]);B=0;3==K.length&&(B+=3600*parseInt(K[0]),B+=60*parseInt(K[1]),B+=parseInt(K[2]));2==K.length&&(B+=60*parseInt(K[0]),B+=parseInt(K[1]));1==K.length&&(B+=
parseInt(K[0]));t.duration=B}return t}var l=this,C,y,N=[],A=50,H,x,n,w=z.youtubeAppId;this.resumeLoad=function(D){N=[];D?(H=D.substr(0,D.lastIndexOf("&pageToken=")),h(D)):b(l).trigger("HAPYoutubeLoader.END_LOAD",{data:N,nextPageToken:D})};this.setData=function(D){if(w){N=[];y=D;n=y.limit||400;A=50;n<A&&(A=n);C=y.type;x=null;var m="";-1<z.playlistItemContent.indexOf("title")&&(m+="title,");-1<z.playlistItemContent.indexOf("description")&&(m+="description,");-1<z.playlistItemContent.indexOf("date")&&
(m+="publishedAt,");-1<z.playlistItemContent.indexOf("thumb")&&(m+="thumbnails,");0<m.length?(m=m.substr(0,m.length-1),D=",snippet",m=",snippet("+m+")"):m=D="";if("youtube_single"==C||"youtube_single_list"==C){"youtube_single_list"==C&&(y.path=y.path.replace(/\s+/g,""));if(-1<z.playlistItemContent.indexOf("duration"))var t=",contentDetails",B=",contentDetails(duration)";else B=t="";H="https://www.googleapis.com/youtube/v3/videos?id="+y.path+"&key="+w+"&part=id"+D+t+"&fields=items(id"+m+B+")"}else"youtube_playlist"==
C&&(H="https://www.googleapis.com/youtube/v3/playlistItems?playlistId="+y.path+"&maxResults="+A+"&key="+w+"&part=contentDetails"+D+"&fields=items(contentDetails(videoId)"+m+"),nextPageToken");h(H)}else alert("Youtube API key missing! Set API key in settings.")};this.getNextPageToken=function(){return x}}})(window,jQuery);
(function(f,b){f.HAPPlaybackRateSlider=function(z){function h(k){if(!H){if("touchstart"==k.type){if(k=k.originalEvent.touches,!(k&&0<k.length))return!1}else k.preventDefault();H=!0;y.on(K.moveEvent,function(v){a:{if("touchmove"==v.type){if(v.originalEvent.touches&&v.originalEvent.touches.length)var O=v.originalEvent.touches;else if(v.originalEvent.changedTouches&&v.originalEvent.changedTouches.length)O=v.originalEvent.changedTouches;else break a;if(1<O.length)break a;O=O[0]}else O=v;v.preventDefault();
p(O);l(O)}}).on(K.upEvent,function(v){a:if(H){H=!1;y.off(K.moveEvent).off(K.upEvent);if("touchend"==v.type){if(v.originalEvent.touches&&v.originalEvent.touches.length)var O=v.originalEvent.touches;else if(v.originalEvent.changedTouches&&v.originalEvent.changedTouches.length)O=v.originalEvent.changedTouches;else break a;if(1<O.length)break a;O=O[0]}else O=v;v.preventDefault();p(O)}})}return!1}function p(k){x?(k=Math.max(0,Math.min(1,(k.pageY-D.offset().top)/B)),k=1-k):k=Math.max(0,Math.min(1,(k.pageX-
D.offset().left)/B));C.setValue(k)}function l(k){var v=x?k.pageY-D.offset().top:k.pageX-D.offset().left;0>v?v=0:v>B&&(v=B);v=Math.max(0,Math.min(1,v/B));if(!HAPUtils.isNumber(v))return!1;x&&(v=1-v);v=W+(S-W)*v;v=Math.round(10*v)/10;w.text(v);v=A[0].getBoundingClientRect();var O=t[0].getBoundingClientRect();if(x){var G=parseInt(O.left-v.left-w.outerWidth()/2+t.outerWidth()/2);k=parseInt(k.pageY-N.scrollTop()-v.top-w.outerHeight()-10);k<O.top-v.top-w.outerHeight()-10?k=O.top-v.top-w.outerHeight()-10:
k>O.top-v.top+t.outerHeight()-w.outerHeight()&&(k=O.top-v.top+t.outerHeight()-w.outerHeight())}else G=parseInt(k.pageX-N.scrollLeft()-v.left-w.outerWidth()/2),k=parseInt(O.top-v.top-w.outerHeight()),G<O.left-v.left?G=O.left-v.left:G>O.left-v.left+t.outerWidth()-w.outerWidth()&&(G=O.left-v.left+t.outerWidth()-w.outerWidth());w.css({left:G+"px",top:k+"px"}).show()}var C=this,y=b(document),N=b(f),A=z.wrapper,H,x=z.isVertical,n=x?"height":"width",w=z.tooltip,D=z.sliderBg,m=z.sliderLevel,t=z.seekbar,B=
x?D.height():D.width(),K=HAPUtils.getEvents(),W=Number(z.settings.playbackRateMin),S=Number(z.settings.playbackRateMax);t.on(K.downEvent,function(k){h(k);return!1});this.setValue=function(k){HAPUtils.isNumber(B)||(B=x?D.height():D.width());m.css(n,k*B+"px");k=W+(S-W)*k;k=Math.round(10*k)/10;b(C).trigger("HAPPlaybackRateSlider.RANGE_CHANGE",{value:k})};this.setVisual=function(k){k=(k-W)/(S-W);HAPUtils.isNumber(B)||(B=x?D.height():D.width());m.css(n,k*B+"px")};if(!HAPUtils.isMobile()){var q=function(){t.off(K.moveEvent,
l).off("mouseout",q);y.off("mouseout",q);w.hide()};t.on("mouseover",function(){H||(t.on(K.moveEvent,l).on("mouseout",q),y.on("mouseout",q))})}this.setVisual(z.settings.playbackRate)}})(window,jQuery);
(function(f,b){f.HAPRangeSlider=function(z){function h(x){if(!C){if("touchstart"==x.type){if(x=x.originalEvent.touches,!(x&&0<x.length))return!1}else x.preventDefault();C=!0;l.on(y.moveEvent,function(n){a:{if("touchmove"==n.type){if(n.originalEvent.touches&&n.originalEvent.touches.length)var w=n.originalEvent.touches;else if(n.originalEvent.changedTouches&&n.originalEvent.changedTouches.length)w=n.originalEvent.changedTouches;else break a;if(1<w.length)break a;w=w[0]}else w=n;n.preventDefault();b(p).trigger("HAPRangeSlider.RANGE_CHANGE",
{point:w,elem:H,event:w})}}).on(y.upEvent,function(n){a:if(C){C=!1;l.off(y.moveEvent).off(y.upEvent);if("touchend"==n.type){if(n.originalEvent.touches&&n.originalEvent.touches.length)var w=n.originalEvent.touches;else if(n.originalEvent.changedTouches&&n.originalEvent.changedTouches.length)w=n.originalEvent.changedTouches;else break a;if(1<w.length)break a;w=w[0]}else w=n;n.preventDefault();b(p).trigger("HAPRangeSlider.RANGE_CHANGE",{point:w,elem:H})}})}return!1}var p=this,l=b(document);b(f);var C,
y=HAPUtils.getEvents(),N=z.range_handle_a,A=z.range_handle_b,H;N.on(y.downEvent,function(x){H=b(this).css("z-index",1);A.css("z-index",0);h(x);return!1});A.on(y.downEvent,function(x){H=b(this).css("z-index",1);N.css("z-index",0);h(x);return!1});this.isDrag=function(){return C}}})(window,jQuery);
(function(f,b){f.HAPLyrics=function(z){function h(){var n,w=l.length;for(n=0;n<w;n++){var D=l[n].start;var m=n<w-1?l[n+1].start:l[n].start;var t=document.createElement("div");t.className=z.itemClass;z.scrollContainer.appendChild(t);C.push(t);t.dataset.start=D;t.dataset.end=m;t.innerHTML=l[n].text;p.useSeekOnLyrics&&t.addEventListener("click",function(){var B=Number(this.getAttribute("data-start"));B=new CustomEvent("HAPLyrics.LYRICS_CLICKED",{detail:B});document.dispatchEvent(B)})}n=new CustomEvent("HAPLyrics.LYRICS_READY",
{detail:l});document.dispatchEvent(n)}var p=z.settings,l=[],C=[],y=!0,N,A=p.lyricsAutoScroll,H=b(z.scrollContainer),x=b(z.wrapContainer);this.load=function(n){y=!0;if("file:"==f.location.protocol)return console.log("Getting lyrics requires server connection."),!1;N&&(N.abort(),N=null);N=new XMLHttpRequest;N.onreadystatechange=function(){if(4==N.readyState&&y){var w=-1<n.indexOf(".lrc")?"lrc":-1<n.indexOf(".vtt")?"vtt":-1<n.indexOf(".srt")?"srt":"lrc";l=[];var D=N.responseText;if("lrc"==w){D=D.split("\n");
var m,t=D.length;for(m=0;m<t;m++){D[m]=D[m].replace(/(^\s*)|(\s*$)/g,"");var B=D[m].substring(D[m].indexOf("[")+1,D[m].indexOf("]"));B=B.split(":");if(!isNaN(parseInt(B[0]))){var K=D[m].match(/\[(\d+:.+?)\]/g);w=0;var W,S=K.length;for(W=0;W<S;W++)w+=K[W].length;w=D[m].substring(w);if(!HAPUtils.isEmpty(w))for(W=0;W<S;W++)B=K[W].substring(1,K[W].length-1),B=B.split(":"),l.push({start:(60*parseFloat(B[0])+parseFloat(B[1])).toFixed(3),text:w})}}}else if("vtt"==w||"srt"==w)for(B in w=D.replace(/\r\n|\r|\n/g,
"\n"),w=HAPUtils.strip(w),D=w.split("\n\n"),t=0,D)if(m=D[B].split("\n"),"WEBVTT"!=m&&2<=m.length&&"WEBVTT"!=m[0]){if(2<m.length){if(w=HAPUtils.strip(m[1].split(" --\x3e ")[0]),W=HAPUtils.strip(m[1].split(" --\x3e ")[1]),S=m[2],3<m.length)for(K=3;K<m.length;K++)S+="\n"+m[K]}else w=HAPUtils.strip(m[0].split(" --\x3e ")[0]),W=HAPUtils.strip(m[0].split(" --\x3e ")[1]),S=m[1];l[t]={};l[t].start=HAPUtils.formatTimeWithMiliseconds(w);l[t].end=HAPUtils.formatTimeWithMiliseconds(W);l[t].text=S;t++}h()}};N.onerror=
function(w){console.log(w)};N.open("GET",n);N.send()};this.setAutoScroll=function(n){A=n};this.setData=function(n){l=n;h()};this.synchronize=function(n){H.find(".hap-lyrics-item").each(function(){var D=parseFloat(b(this).attr("data-start")),m=parseFloat(b(this).attr("data-end"));if(n>=D&&n<=m)return b(this).hasClass("hap-lyrics-item-active")||(H.find(".hap-lyrics-item").removeClass("hap-lyrics-item-active"),b(this).addClass("hap-lyrics-item-active"),H.movingHighlight=!0),!1});H.currentHighlight=H.find(".hap-lyrics-item-active");
0==H.currentHighlight.length&&(H.currentHighlight=null);if(A&&H.currentHighlight){var w=Math.floor(x.scrollTop()+H.currentHighlight.position().top-(x.height()/2+H.currentHighlight.height()/2));w!=Math.floor(x.scrollTop())&&H.movingHighlight&&(x.scrollTop(w),H.movingHighlight=!1)}};this.deactivate=function(){N&&(N.abort(),N=null);y=!1;z.scrollContainer.innerHTML=""}}})(window,jQuery);
(function(f,b){f.HAPDialog=function(z,h,p){function l(q,k,v,O){if("lyrics"==q)var G=N("lyrics"),M="hap_lyrics_dialog_"+p.instanceName;else"video"==q&&(G=N("video"),M="hap_video_dialog_"+p.instanceName);var da=f.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,J=f.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;k>da&&(k=da);v>J&&(v=J);G.css({width:k+"px",height:v+"px"});v-=75;G.find(".hap-dialog-content").css("height",v+"px");"lyrics"==q?G.find(".hap-lyrics-wrap").css("height",
v+"px"):"video"==q&&G.find(".hap-video-wrap").css({height:v+"px",width:k+"px"});localStorage&&O&&(q=localStorage.getItem(M)?JSON.parse(localStorage.getItem(M)):{},G=G[0].getBoundingClientRect(),q.pos=G,localStorage.setItem(M,JSON.stringify(q)))}function C(q){var k,v=x.length;for(k=0;k<v;k++)if(q==x[k].itemHandle){n=x[k];var O=!0;break}return O}function y(q){var k,v=x.length;for(k=0;k<v;k++)if(q==x[k].itemResizeHandle){m=x[k];var O=!0;break}return O}function N(q){var k,v=x.length;for(k=0;k<v;k++)if(q==
x[k].element){var O=b(x[k].itemDialog);break}return O}function A(q){if(C(q.target)){if("touchstart"==q.type)if((q=q.originalEvent.touches)&&0<q.length)n.initialX=q[0].pageX-n.xOffset,n.initialY=q[0].pageY-n.yOffset;else return!1;else q.preventDefault(),n.initialX=q.pageX-n.xOffset,n.initialY=q.pageY-n.yOffset;D.on(w.moveEvent,function(k){a:if(n){if("touchmove"==k.type){if(k.originalEvent.touches&&k.originalEvent.touches.length)var v=k.originalEvent.touches;else if(k.originalEvent.changedTouches&&
k.originalEvent.changedTouches.length)v=k.originalEvent.changedTouches;else break a;if(1<v.length)break a;k.preventDefault();n.currentX=v[0].pageX-n.initialX;n.currentY=v[0].pageY-n.initialY}else k.preventDefault(),n.currentX=k.pageX-n.initialX,n.currentY=k.pageY-n.initialY;n.xOffset=n.currentX;n.yOffset=n.currentY;n.itemDialog.style.left=n.currentX+"px";n.itemDialog.style.top=n.currentY+"px"}}).on(w.upEvent,function(k){n&&(D.off(w.moveEvent).off(w.upEvent),n.initialX=n.currentX,n.initialY=n.currentY,
n.itemDialog.classList.contains("hap-lyrics-holder")?localStorage&&(k=localStorage.getItem("hap_lyrics_dialog_"+p.instanceName)?JSON.parse(localStorage.getItem("hap_lyrics_dialog_"+p.instanceName)):{},k.currentX=n.currentX,k.currentY=n.currentY,localStorage.setItem("hap_lyrics_dialog_"+p.instanceName,JSON.stringify(k))):n.itemDialog.classList.contains("hap-video-holder")&&localStorage&&(k=localStorage.getItem("hap_video_dialog_"+p.instanceName)?JSON.parse(localStorage.getItem("hap_video_dialog_"+
p.instanceName)):{},k.currentX=n.currentX,k.currentY=n.currentY,localStorage.setItem("hap_video_dialog_"+p.instanceName,JSON.stringify(k))),n=null)})}return!1}function H(q){if(y(q.target)){if("touchstart"==q.type)if((q=q.originalEvent.touches)&&0<q.length)var k=q[0];else return!1;else k=q,q.preventDefault();m.startMouseX=k.pageX;m.startMouseY=k.pageY;m.dragStartWidth=m.itemDialog.offsetWidth;m.dragStartHeight=m.itemDialog.offsetHeight;D.on(w.moveEvent,function(v){a:{if("touchmove"==v.type){if(v.originalEvent.touches&&
v.originalEvent.touches.length)var O=v.originalEvent.touches;else if(v.originalEvent.changedTouches&&v.originalEvent.changedTouches.length)O=v.originalEvent.changedTouches;else break a;if(1<O.length)break a;O=O[0]}else O=v;v.preventDefault();v=parseInt(m.dragStartWidth+(O.pageX-m.startMouseX),10);O=parseInt(m.dragStartHeight+(O.pageY-m.startMouseY),10);v<m.itemResizeMinW&&(v=m.itemResizeMinW);O<m.itemResizeMinH&&(O=m.itemResizeMinH);l(m.element,v,O,!0)}}).on(w.upEvent,function(v){m&&(m=null,D.off(w.moveEvent).off(w.upEvent))})}return!1}
var x=h,n,w=HAPUtils.getEvents(),D=b(document),m;this.setTranslateInit=function(q,k,v){var O,G=x.length;for(O=0;O<G;O++)if(x[O].itemDialog.classList.contains("hap-dialog")&&x[O].itemDialog.classList.contains(q)){var M=x[O];break}M&&(q=z[0].getBoundingClientRect(),0>=q.top+v&&(v=-q.top),0>=q.left+k&&(k=-q.left),M.itemDialog.style.left=k+"px",M.itemDialog.style.top=v+"px",M.initialX=k,M.initialY=v,M.currentX=k,M.currentY=v,M.xOffset=k,M.yOffset=v,M.dragInited=!0)};(p.clearDialogCacheOnStart||p.isPopup)&&
localStorage&&(localStorage.removeItem("hap_lyrics_dialog_"+p.instanceName),localStorage.removeItem("hap_video_dialog_"+p.instanceName));var t=x.length;for(h=0;h<t;h++){var B=x[h];B.xOffset=0;B.yOffset=0;b(B.itemHandle).css("cursor","move").on(w.downEvent,function(q){A(q);return!1});if(B.itemResizeHandle)b(B.itemResizeHandle).on(w.downEvent,function(q){H(q);return!1});if("lyrics"==B.element)if(b(B.itemDialog).find(".hap-lyrics-autoscroll").on("change",function(){var q=b(this).is(":checked"),k=new CustomEvent("HAPDialog.LYRICS_AUTOSCROLL_CHANGE",
{detail:q});document.dispatchEvent(k);localStorage&&(k=localStorage.getItem("hap_lyrics_dialog_"+p.instanceName)?JSON.parse(localStorage.getItem("hap_lyrics_dialog_"+p.instanceName)):{},k.autoScroll=q,localStorage.setItem("hap_lyrics_dialog_"+p.instanceName,JSON.stringify(k)))}),localStorage&&localStorage.getItem("hap_lyrics_dialog_"+p.instanceName)){var K=JSON.parse(localStorage.getItem("hap_lyrics_dialog_"+p.instanceName));if(K.pos){var W=K.pos.width,S=K.pos.height;l("lyrics",W,S)}else f.getComputedStyle(document.querySelector(".hap-lyrics-holder")).getPropertyValue("width");
K.currentX&&K.currentY&&this.setTranslateInit("hap-lyrics-holder",K.currentX,K.currentY);W=K.autoScroll?"checked":"";b(B.itemDialog).find(".hap-lyrics-autoscroll").prop("checked",W);B=new CustomEvent("HAPDialog.LYRICS_AUTOSCROLL_CHANGE",{detail:K.autoScroll});document.dispatchEvent(B)}else p.lyricsAutoScroll&&(b(B.itemDialog).find(".hap-lyrics-autoscroll").prop("checked","checked"),B=new CustomEvent("HAPDialog.LYRICS_AUTOSCROLL_CHANGE",{detail:p.lyricsAutoScroll}),document.dispatchEvent(B)),this.setTranslateInit("hap-lyrics-holder",
0,0);else"video"==B.element&&(localStorage&&localStorage.getItem("hap_video_dialog_"+p.instanceName)?(K=JSON.parse(localStorage.getItem("hap_video_dialog_"+p.instanceName)),K.pos&&(W=K.pos.width,S=K.pos.height,l("video",W,S)),K.currentX&&K.currentY&&this.setTranslateInit("hap-video-holder",K.currentX,K.currentY)):this.setTranslateInit("hap-video-holder",0,0))}}})(window,jQuery);
(function(f,b){f.HAPVolumeSlider=function(z){function h(q){if(!B){if("touchstart"==q.type){if(q=q.originalEvent.touches,!(q&&0<q.length))return!1}else q.preventDefault();B=!0;D.on(m.moveEvent,function(k){a:{if("touchmove"==k.type){if(k.originalEvent.touches&&k.originalEvent.touches.length)var v=k.originalEvent.touches;else if(k.originalEvent.changedTouches&&k.originalEvent.changedTouches.length)v=k.originalEvent.changedTouches;else break a;if(1<v.length)break a;v=v[0]}else v=k;k.preventDefault();
p(v)}}).on(m.upEvent,function(k){a:if(B){B=!1;D.off(m.moveEvent).off(m.upEvent);if("touchend"==k.type){if(k.originalEvent.touches&&k.originalEvent.touches.length)var v=k.originalEvent.touches;else if(k.originalEvent.changedTouches&&k.originalEvent.changedTouches.length)v=k.originalEvent.changedTouches;else break a;if(1<v.length)break a;v=v[0]}else v=k;k.preventDefault();p(v)}})}return!1}function p(q){K?(t=Math.max(0,Math.min(1,(q.pageY-n.offset().top)/W)),t=1-t):t=Math.max(0,Math.min(1,(q.pageX-n.offset().left)/
W));C.setValue(t)}function l(q){var k=K?q.pageY-n.offset().top:q.pageX-n.offset().left;0>k?k=0:k>W&&(k=W);k=Math.max(0,Math.min(1,k/W));if(!HAPUtils.isNumber(k))return!1;K&&(k=1-k);k=parseInt(100*k,10);A.text(k+" %");k=z.container[0].getBoundingClientRect();var v=x[0].getBoundingClientRect();if(K){var O=parseInt(v.left-k.left-A.outerWidth()/2+x.outerWidth()/2);q=parseInt(q.pageY-N.scrollTop()-k.top-A.outerHeight()-20);q<v.top-k.top-A.outerHeight()-10?q=v.top-k.top-A.outerHeight()-10:q>v.top-k.top+
x.outerHeight()-A.outerHeight()&&(q=v.top-k.top+x.outerHeight()-A.outerHeight())}else O=parseInt(q.pageX-N.scrollLeft()-k.left-A.outerWidth()/2),q=parseInt(v.top-k.top-A.outerHeight())-15,O<v.left-k.left?O=v.left-k.left:O>v.left-k.left+x.outerWidth()-A.outerWidth()&&(O=v.left-k.left+x.outerWidth()-A.outerWidth());0>q+k.top&&(q=parseInt(v.top-k.top+A.outerHeight()+20));A.css({left:O+"px",top:q+"px"}).show()}var C=this,y=HAPUtils.isMobile(),N=b(f),A=z.tooltip,H=z.container.find(".hap-volume-toggle"),
x=z.container.find(".hap-volume-seekbar"),n=z.container.find(".hap-volume-bg"),w=z.container.find(".hap-volume-level"),D=b(document),m=HAPUtils.getEvents(),t=z.volume,B,K=x.hasClass("hap-volume-vertical"),W=K?n.height():n.width();if(0==x.length||H.hasClass("hap-volume-toggable")&&!y)H.on("click",function(){b(C).trigger("HAPVolumeSlider.TOGGLE_MUTE")});x.on(m.downEvent,function(q){h(q);return!1});this.setValue=function(q){C.setVisual(q);b(C).trigger("HAPVolumeSlider.VOLUME_CHANGE",q)};this.setVisual=
function(q){t=q;q=K?"height":"width";HAPUtils.isNumber(W)||(W=K?n.height():n.width());w.css(q,t*W+"px");H.children().hide();0==t?H.find(".hap-btn-volume-off").show():0<t&&.5>t?H.find(".hap-btn-volume-down").show():H.find(".hap-btn-volume-up").show()};if(A&&!y){var S=function(){x.off(m.moveEvent,l).off("mouseout",S);D.off("mouseout",S);A.hide()};x.on("mouseover",function(){B||(x.on(m.moveEvent,l).on("mouseout",S),D.on("mouseout",S))})}C.setVisual(t)}})(window,jQuery);var hapjq=jQuery;
(function(f){f.fn.hap=function(b){function z(){Object.keys(Gc).forEach(function(P){if(0==P.indexOf("hap-")){var V=P.substr(4).replace(/-([a-z])/g,function(ra){return ra[1].toUpperCase()});if(P=decodeURIComponent(Gc[P]).replace(/\+/g," "))b.hasOwnProperty(V)?("true"===P?P=!0:"false"===P&&(P=!1),b[V]=P):(P=P.split(",").map(function(ra){return ra.trim()}),-1<gf.indexOf(V)&&Hc.push({key:V,value:P}))}});if(Hc.length){var a,c,d=Hc.length,e=Hc[0].value.length;for(c=0;c<e;c++){var g={};for(a=0;a<d;a++){var r=
Hc[a];var E=r.value[c];"true"===E?E=!0:"false"===E&&(E=!1);g[r.key]=E;"type"===r.key&&(g.origtype=E)}Ld.push(g)}}}function h(){ka=I.mp3||I.path;-1!=ka.indexOf("ebsfm:")&&(ka=HAPUtils.b64DecodeUnicode(ka.substr(6)));if(xe)Sa&&(c=0,b.resumeTime?c=resumeTime:I.start&&(c=I.start),Ba?ba.loadVideoById({videoId:ka,startSeconds:c,endSeconds:I.end,suggestedQuality:I.quality}):ba.cueVideoById({videoId:ka,startSeconds:c,endSeconds:I.end,suggestedQuality:I.quality}));else{if(0==Ra.length){alert("Using Youtube requires player to have thumbnail image in player where Youtube player will be placed. Please use demo which has thumbnail in player! hap-player-thumb element");
return}Xb=f('<div class="hap-youtube-holder"/>').appendTo(Ra);var a="ytplayer"+Math.floor(16777215*Math.random()),c="https:"==window.location.protocol?"https:":"http:",d=window.location.href.split("/");d=d[0]+"//"+d[2];var e="&origin="+d;c=c+"//www.youtube.com/embed/"+ka+"?enablejsapi=1&controls=0&rel=0&showinfo=0&playsinline=1&modestbranding=1&wmode=transparent&iv_load_policy=3&cc_load_policy=0";/^http/.test(d)&&(c+=e);b.resumeTime?(c+="&start="+b.resumeTime,delete b.resumeTime):I.start&&(c+="&start="+
I.start);I.end&&(c+="&end="+I.end);Md=f("<iframe/>",{id:a,frameborder:0,src:c,width:"100%",height:"100%",webkitAllowFullScreen:!1,mozallowfullscreen:!1,allowFullScreen:!1,allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"}).addClass("hap-media");Xb.show().prepend(Md);window.YT||(c=document.createElement("script"),c.src="https://www.youtube.com/iframe_api",d=document.getElementsByTagName("script")[0],d.parentNode.insertBefore(c,d));var g=setInterval(function(){window.YT&&
window.YT.Player&&(g&&clearInterval(g),ba=new YT.Player(a,{events:{onReady:p,onStateChange:l,onError:C}}))},100);xe=!0}Xb.show()}function p(a){Sa=!0;b.forceYoutubeChromeless&&Md.addClass("hap-yt-clean");ye&&Ba&&ba.playVideo()}function l(a){Xb.is(":visible")&&-1!=a.data&&(0==a.data?xb&&Fa&&!$a&&!Zc.isDrag()?($a=!0,ba.seekTo(Ta),ba.playVideo()):$c||($c=!0,Nd()):1==a.data?(Od||($c=!1,ba.setPlaybackRate(Number(b.playbackRate)),ze||(ze=f('<div class="hap-iframe-blocker"></div>').css("display","block").appendTo(Xb)),
ye=Ba=Od=!0,b.hideYoutubeAfterStart&&Xb.css("opacity",0),xb&&(jc.html("00:00"),kc.html(HAPUtils.formatTime(ba.getDuration())))),xb&&Fa&&setTimeout(function(){clearTimeout(this);$a=!1},1E3),Gb&&clearInterval(Gb),Gb=setInterval(ad,Ae),Be()):2==a.data&&Ce())}function C(a){f(u).trigger("soundError",{instance:u,instanceName:b.instanceName,media:I,error:a})}function y(){var a={activePlaylist:b.activePlaylist,volume:b.volume,activeItem:ha.getCounter(),resumeTime:u.getCurrentTime(),autoPlay:fb};if(Pd){var c,
d=[];for(c=0;c<X;c++){var e=la[c].data;e.start&&d.push({title:e.title,artist:e.artist,start:e.start})}a.lastPositionArr=d;a.lastPositionDataPath=De}localStorage.setItem(b.continousKey,JSON.stringify(a))}function N(){navigator.mediaSession.metadata=new MediaMetadata({title:I.title,artist:I.artist||"",album:I.album||"",artwork:[{src:I.thumb||""}]})}function A(a){var c=F[0].getBoundingClientRect(),d=a[0].getBoundingClientRect();ma.text(a.attr("data-tooltip"));var e=parseInt(d.top-c.top-ma.outerHeight());
a=parseInt(d.left-c.left-ma.outerWidth()/2+a.outerWidth()/2);a+ma.outerWidth()>F.width()?a=F.width()-ma.outerWidth():0>a&&(a=0);0>e+c.top&&(e=parseInt(d.top-c.top+ma.outerHeight()+15));ma.css({left:a+"px",top:e+"px"}).show()}function H(a){if(Z){if(!yb){if("touchstart"==a.type){if(a=a.originalEvent.touches,!(a&&0<a.length))return!1}else a.preventDefault();yb=!0;Hb.on(Yb.moveEvent,function(c){a:{if("touchmove"==c.type){if(c.originalEvent.touches&&c.originalEvent.touches.length)var d=c.originalEvent.touches;
else if(c.originalEvent.changedTouches&&c.originalEvent.changedTouches.length)d=c.originalEvent.changedTouches;else break a;if(1<d.length)break a;d=d[0]}else d=c;c.preventDefault();x(d)}}).on(Yb.upEvent,function(c){a:if(yb){yb=!1;Hb.off(Yb.moveEvent).off(Yb.upEvent);if("touchend"==c.type){if(c.originalEvent.touches&&c.originalEvent.touches.length)var d=c.originalEvent.touches;else if(c.originalEvent.changedTouches&&c.originalEvent.changedTouches.length)d=c.originalEvent.changedTouches;else break a;
if(1<d.length)break a;d=d[0]}else d=c;c.preventDefault();x(d,!0)}})}return!1}}function x(a,c,d){Ic?a=bd.setProgress(a):d||(a=b.useWaveSeekbar?a.pageX-lc.offset().left:a.pageX-Jc.offset().left,0>a?a=0:a>Ka&&(a=Ka),a=Math.max(0,Math.min(1,a/Ka)));if(c){if("youtube"==R)ba&&Sa&&ba.seekTo(a*ba.getDuration());else if(Q&&!isNaN(Q.duration)){d=Q.duration;c=a*d;c>d-2&&(c=d-2);try{Q.currentTime=c}catch(e){console.log(e)}}Ib||ab.width(a*Ka)}else ab.width(a*Ka),Qd||b.useFixedPlayer&&window.hap_fixed_active_player==
b.instanceName&&Ib&&Ga.setProgressData(a,!0)}function n(){var a=Ha.width(),c=Ha.height();Rd.width=a;Sd.width=a;Rd.height=c;Sd.height=c;gb.width=a;gb.height=c;Zb.fillStyle=b.waveBgColor;$b.fillStyle=b.waveProgressColor;Jb=I.peaks;b.waveBarWidth?HAPUtils.drawBars(Zb,$b,gb,Jb.split(","),0,a):HAPUtils.drawWave(Zb,$b,gb,Jb.split(","),0,a)}function w(a){if(Ic){var c=bd.trackTooltip(a),d=F[0].getBoundingClientRect(),e=Ha[0].getBoundingClientRect();a=parseInt(e.top-d.top-ma.outerHeight()-20);var g=parseInt(e.left-
d.left-ma.outerWidth()/2+Ha.outerWidth()/2);g+ma.outerWidth()>F.width()?g=F.width()-ma.outerWidth():0>g&&(g=0);0>a+d.top&&(a=parseInt(e.top-d.top+ma.outerHeight()+20))}else{c=b.useWaveSeekbar?a.pageX-lc.offset().left:a.pageX-Jc.offset().left;if(!HAPUtils.isNumber(c))return!1;0>c?c=0:c>Ka&&(c=Ka);c=Math.max(0,Math.min(1,c/Ka));d=F[0].getBoundingClientRect();e=Ha[0].getBoundingClientRect();g=parseInt(a.pageX-Ee.scrollLeft()-d.left-ma.outerWidth()/2);a=parseInt(e.top-d.top-ma.outerHeight(),10)-10;g<
e.left-d.left?g=e.left-d.left:g>e.left-d.left+Ha.outerWidth()-ma.outerWidth()&&(g=e.left-d.left+Ha.outerWidth()-ma.outerWidth());0>a+d.top&&(a=parseInt(e.top-d.top+ma.outerHeight()+15))}ma.css({left:g+"px",top:a+"px"});if(!HAPUtils.isNumber(c))return!1;if("youtube"==R){if(ba&&Sa){var r=ba.getDuration();a=c*r}}else Q&&(r=Q.duration,a=c*r);HAPUtils.isNumber(r)&&HAPUtils.isNumber(r)&&ma.html(HAPUtils.formatTime(a)+" / "+HAPUtils.formatTime(r)).show()}function D(a){a=Math.max(0,Math.min(1,a/Wa));var c=
"youtube"==R?ba.getDuration():Q.duration;return a*c}function m(a){if(!Z)return!1;var c=a.keyCode;if(f(a.target).hasClass("hap-search-filter"))return!0;if(b.modifierKey){var d,e=b.keyboardControls.length;for(d=0;d<e;d++){var g=b.keyboardControls[d];if(a[b.modifierKey]&&c==g.keycode){"seekBackward"==g.action?u.seekBackward(b.seekTime):"seekForward"==g.action?u.seekForward(b.seekTime):"togglePlayback"==g.action?u.togglePlayback():"volumeUp"==g.action?(b.volume+=.1,1<b.volume&&(b.volume=1),u.setVolume(b.volume)):
"volumeDown"==g.action?(b.volume-=.1,0>b.volume&&(b.volume=0),u.setVolume(b.volume)):"toggleMute"==g.action?u.toggleMute():"nextMedia"==g.action?u.nextMedia():"previousMedia"==g.action?u.previousMedia():"rewind"==g.action&&u.seek(0);break}}}else for(e=b.keyboardControls.length,d=0;d<e;d++)if(g=b.keyboardControls[d],c==g.keycode){if("seekBackward"==g.action)u.seekBackward(b.seekTime);else if("seekForward"==g.action)u.seekForward(b.seekTime);else if("togglePlayback"==g.action)u.togglePlayback();else if("volumeUp"==
g.action)b.volume+=.1,1<b.volume&&(b.volume=1),u.setVolume(b.volume);else if("volumeDown"==g.action)b.volume-=.1,0>b.volume&&(b.volume=0),u.setVolume(b.volume);else if("toggleMute"==g.action)u.toggleMute();else if("nextMedia"==g.action)u.nextMedia();else if("previousMedia"==g.action)u.previousMedia();else if("rewind"==g.action)u.seek(0);else return!0;break}return!1}function t(a){if(!Z||b.disableSongSkip||ca&&ca.isAdOn())return!1;a=f(a.currentTarget);if(b.togglePlaybackOnPlaylistItem&&a.closest(".hap-playlist-item").hasClass("hap-playlist-item-disabled")&&
Ib)return u.togglePlayback(),!1;Ba=Td=!0;mc();nc&&I.adMid&&!Kc&&ca.forceAdMidAudio();if(ac){var c=a.closest(".hap-accordion-item").attr("data-id");if(c!=Lc){Lc=c;la=Mc[Lc].data;X=la.length;for(c=0;c<X;c++)la[c].id=c;ha.setPlaylistItems(X)}}a=a.closest(".hap-playlist-item").attr("data-id");ha.processPlaylistRequest(a);-1<wa.indexOf("hap-art-narrow-light")&&u.togglePlaylist();f(u).trigger("clickPlaylistItem",{instance:u,instanceName:b.instanceName})}function B(a){a.preventDefault();if(!Z)return!1;f(a.currentTarget).closest(".hap-playlist-item").addClass("hap-playlist-item-selected");
f(u).trigger("overPlaylistItem",{instance:u,instanceName:b.instanceName})}function K(a){a.preventDefault();if(!Z)return!1;a=f(a.currentTarget).closest(".hap-playlist-item");a.hasClass("hap-playlist-item-disabled")||a.removeClass("hap-playlist-item-selected");f(u).trigger("outPlaylistItem",{instance:u,instanceName:b.instanceName})}function W(a){if(!Z)return!1;a=f(a.currentTarget);if(a.hasClass("hap-playlist-toggle")||a.hasClass("hap-playlist-close"))u.togglePlaylist();else if(a.hasClass("hap-skip-backward"))u.seekBackward(b.seekTime);
else if(a.hasClass("hap-skip-forward"))u.seekForward(b.seekTime);else if(a.hasClass("hap-prev-toggle")){nc&&I.adMid&&!Kc&&ca.forceAdMidAudio();if(ca&&ca.isAdOn())return!1;u.previousMedia()}else if(a.hasClass("hap-playback-toggle"))nc&&I.adMid&&!Kc&&ca.forceAdMidAudio(),u.togglePlayback();else if(a.hasClass("hap-next-toggle")){nc&&I.adMid&&!Kc&&ca.forceAdMidAudio();if(ca&&ca.isAdOn())return!1;u.nextMedia()}else if(a.hasClass("hap-playback-rate-toggle")||a.hasClass("hap-playback-rate-close"))a.hasClass("hap-playback-rate-toggle")&&
(Fa&&u.toggleRange(),Nc.is(":visible")&&Nc.hide()),Oc.toggle();else if(a.hasClass("hap-lyrics-toggle")||a.hasClass("hap-lyrics-close"))u.toggleLyrics();else if(a.hasClass("hap-video-toggle")||a.hasClass("hap-video-close"))u.toggleVideo();else if(a.hasClass("hap-range-toggle")||a.hasClass("hap-range-close"))a.hasClass("hap-range-toggle")&&(Nc.is(":visible")&&Nc.hide(),Oc.is(":visible")&&Oc.hide()),u.toggleRange();else if(a.hasClass("hap-loop-toggle"))bc.find(".hap-btn").hide(),cc++,cc>Pc.length-1&&
(cc=0),b.loopState=Pc[cc],bc.find(".hap-btn-loop-"+b.loopState).show(),ha.setLooping(b.loopState),A(bc.find(".hap-btn:visible"));else if(a.hasClass("hap-random-toggle"))b.randomPlay=!b.randomPlay,ha.setRandom(b.randomPlay),mb.find(".hap-btn").hide(),b.randomPlay?mb.find(".hap-btn-random-on").show():mb.find(".hap-btn-random-off").show(),A(mb.find(".hap-btn:visible"));else if(a.hasClass("hap-sort-alpha"))HAPUtils.isEmpty(bb)?bb="title-asc":"title-asc"==bb?bb="title-desc":"title-desc"==bb&&(bb="title-asc"),
u.sort(bb),A(zb.find(".hap-btn:visible"));else if(a.hasClass("hap-popup-toggle")){if(b.isPopup)return!1;hapOpenPopup(b,u)}else if(a.hasClass("hap-share-toggle")||a.hasClass("hap-share-close"))a.hasClass("hap-share-toggle")&&(Fa&&u.toggleRange(),Oc.is(":visible")&&Oc.hide()),Nc.toggle();else if(a.hasClass("hap-share-item")){if(!R)return!1;Ud&&Ud.share(a.attr("data-type").toLowerCase(),I,u.getCurrentMediaUrl())}}function S(){va&&(f(u).trigger("playlistItemEnabled",{instance:u,instanceName:b.instanceName,
item:va}),b.togglePlaybackOnPlaylistItem&&va.find(".hap-playlist-thumb-style").removeClass("hap-playlist-thumb-style-pause"),va.removeClass("hap-playlist-item-selected hap-playlist-item-disabled"),va=null)}function q(a){va&&S();va=U.children(".hap-playlist-item").eq(a);if(va.length){va.addClass("hap-playlist-item-selected hap-playlist-item-disabled");if(b.usePlaylistScroll&&0<X){if(!Td)if("mcustomscrollbar"==b.playlistScrollType)if("undefined"!==typeof mCustomScrollbar)setTimeout(function(){"horizontal"==
b.playlistScrollOrientation?Xa.mCustomScrollbar("scrollTo",parseInt(va.position().left),{scrollInertia:500}):Xa.mCustomScrollbar("scrollTo",parseInt(va.position().top),{scrollInertia:500})},1E3);else var c=setInterval(function(){"undefined"!==typeof mCustomScrollbar&&(clearInterval(c),"horizontal"==b.playlistScrollOrientation?Xa.mCustomScrollbar("scrollTo",parseInt(va.position().left),{scrollInertia:500}):Xa.mCustomScrollbar("scrollTo",parseInt(va.position().top),{scrollInertia:500}))},100);else"perfect-scrollbar"==
b.playlistScrollType&&setTimeout(function(){"horizontal"==b.playlistScrollOrientation?Xa.stop().animate({scrollTop:va[0].offsetLeft+"px"},{duration:500}):Xa.stop().animate({scrollTop:va[0].offsetTop+"px"},{duration:500})},1E3);Td=!1}f(u).trigger("playlistItemDisabled",{instance:u,instanceName:b.instanceName,item:va})}}function k(a){sa=!0;La.show();dc&&cd();var c=Vd.length?Vd.find(a):f(a);if(0==c.length)return alert("Failed playlist selection! Playlist - "+a+" does not exist. Check activePlaylist option in settings!"),
sa=!1,La.hide(),!1;Ma=void 0!=c.attr("data-playlist-id")?c.attr("data-playlist-id"):null;b.activePlaylist=a;f(u).trigger("playlistStartLoad",{instance:u,instanceName:b.instanceName});c.find(".hap-playlist-options").length&&(aa=c.find(".hap-playlist-options").clone().prependTo(U),void 0!=aa.attr("data-playlist-title")?Fe.html(aa.attr("data-playlist-title")).show():Fe.html("").hide(),aa.find(".hap-global-playlist-description").length?Ge.html(aa.find(".hap-global-playlist-description").html()).show():
Ge.html("").hide(),Kb=parseInt(aa.attr("data-add-more-limit"),10),oc=parseInt(aa.attr("data-add-more-num-results"),10),Lb=parseInt(aa.attr("data-add-more-offset"),10),dd=aa.attr("data-add-more-sort-order"),ed=aa.attr("data-add-more-sort-direction"),void 0!=aa.attr("data-taxonomy")&&(fd=aa.attr("data-taxonomy")),void 0!=aa.attr("data-category")&&(gd=aa.attr("data-category")),void 0!=aa.attr("data-tag")&&(hd=aa.attr("data-tag")),void 0!=aa.attr("data-match")&&(id=aa.attr("data-match")),void 0==aa.attr("data-thumb-global")||
HAPUtils.isEmpty(aa.attr("data-thumb-global"))||(Qc=aa.attr("data-thumb-global")),void 0==aa.attr("data-start")||HAPUtils.isEmpty(aa.attr("data-start"))||(pc=Number(aa.attr("data-start")),qc=null,void 0!=aa.attr("data-start-media-id")&&(qc=aa.attr("data-start-media-id"))),void 0==aa.attr("data-end")||HAPUtils.isEmpty(aa.attr("data-end"))||(jd=Number(aa.attr("data-end"))),void 0!=aa.attr("data-add-more-on-total-scroll")&&(nb=!0),void 0!=aa.attr("data-media-prefix-url")&&(ob=aa.attr("data-media-prefix-url")),
void 0!=aa.attr("data-active-media-id")&&(kd=aa.attr("data-active-media-id")),ld&&(void 0!=aa.attr("data-ad-pre")&&(rc=aa.attr("data-ad-pre").split(",").map(function(g){return g.trim()}),void 0!=aa.attr("data-shuffle-ads")&&1<rc.length&&HAPUtils.shuffleArray(rc)),void 0!=aa.attr("data-ad-mid")&&(sc=aa.attr("data-ad-mid").split(",").map(function(g){return g.trim()}),void 0!=aa.attr("data-shuffle-ads")&&1<sc.length&&HAPUtils.shuffleArray(sc),void 0!=aa.attr("data-ad-mid-interval")&&(md=aa.attr("data-ad-mid-interval"))),
void 0!=aa.attr("data-ad-end")&&(tc=aa.attr("data-ad-end").split(",").map(function(g){return g.trim()}),void 0!=aa.attr("data-shuffle-ads")&&1<tc.length&&HAPUtils.shuffleArray(tc))));var d,e;c.children(".hap-playlist-item").each(function(){d=f(this);e=d.attr("data-type");RegExp(/^audio|hls$/).test(e)&&d.hasClass("hap-playlist-item-ready")?ta.push(d.clone()):ta.push(da(d));void 0!=d.attr("data-path")&&(De=d.attr("data-path"))});X=ta.length;M()}function v(a){console.log(a);f.ajax({type:"GET",url:a.path,
dataType:"html"}).done(function(c){var d={};f(c).children(".hap-playlist-item").each(function(){d=da(f(this));a.origtype&&(d.origtype=a.origtype);void 0!=a.mediaId&&(d.mediaId=a.mediaId);ta.push(d)});X=ta.length;M()}).fail(function(c,d,e){console.log("Error processXml: "+c,d,e);M()})}function O(a){if("file:"==window.location.protocol)return console.log("Reading m3u files requires server connection."),!1;f.ajax({type:"GET",url:a.path}).done(function(c){var d,e;c.replace("#EXTM3U","").split("#EXTINF:").slice(1).map(function(g,
r){d=f.extend(!0,{},a);d.type="audio";e=g.split("\n").slice(0,-1);d.mp3=f.trim(e[1]);var E=e[0].split(",");if(1<E.length){var P=E[0];HAPUtils.isNumber(P)&&-1!=P&&(d.duration=P);E=E[1]}else E=E[0];-1<E.indexOf("-")?(E=E.split("-"),d.title=f.trim(E[1]),E[0].match(/^\d+(\s*)+\./)?(E=E[0].substr(E[0].indexOf(".")+1),d.artist=f.trim(E[1])):d.artist=f.trim(E[0])):d.title=f.trim(E);ia.push(d)});M()}).fail(function(c,d,e){console.log("Error process m3u: "+c,d,e);M()})}function G(a){f.ajax({type:"GET",url:a.path,
dataType:"json"}).done(function(c){Mb=-1;ia=[];ta=[];dc=U;Array.isArray(c)?ta=c:ta.push(c);if(a.origtype&&void 0!=a.mediaId){var d=ta.length;for(c=0;c<d;c++)ta[c].origtype=a.origtype,ta[c].mediaId=a.mediaId}X=ta.length;M()}).fail(function(c,d,e){console.log("Error processJson: "+c,d,e);M()})}function M(){Mb++;if(Mb>X-1)Na();else{var a=ta[Mb],c=a.type;if(c)if("soundcloud"==c)if(xa="soundcloud",a.limit?(Da=a.limit,a.loadMore&&(Oa=!0)):(Da=999999999,Oa=!1),cb=[],window.SC)hb(!0,a.path);else{Ab();var d=
setInterval(function(){Wd&&(d&&clearInterval(d),hb(!0,a.path))},100)}else"podcast"==c?(xa="podcast",Rc(a)):"itunes_podcast_music"==c?nd(a):"folder"==c?(xa="folder",ea(a)):"folder_accordion"==c?(ac=!0,ja(a)):"json_accordion"==c?(ac=!0,ya(a)):"gdrive_folder"==c?na(a):"hls"==c?(ia.push(a),M()):"audio"==c?(ia.push(a),M()):"shoutcast"==c||"icecast"==c||"radiojar"==c?(ia.push(a),M()):"youtube_single"==c||"youtube_playlist"==c?a.noApi?(ia.push(a),M()):(xa="youtube",a.loadMore&&(Oa=!0),pb||J("youtube"),pb.setData(a)):
"xml"==c?v(a):"json"==c?G(a):"m3u"==c&&O(a);else ia.push(a),M()}}function da(a){var c={};c.type=c.origtype=a.attr("data-type");c.origclasses=a.attr("class");a.find(".hap-custom-content").length&&(c.content=a.find(".hap-custom-content").html());void 0!=a.attr("data-noapi")&&(c.noApi=!0);void 0!=a.attr("data-category")&&(c.category=a.attr("data-category"));void 0!=a.attr("data-tag")&&(c.tag=a.attr("data-tag"));void 0!=a.attr("data-video")&&(c.video=a.attr("data-video"),-1!=c.video.indexOf("ebsfm:")&&
(c.video=HAPUtils.b64DecodeUnicode(c.video.substr(6))));void 0!=a.attr("data-media-id")&&(c.mediaId=parseInt(a.attr("data-media-id"),10));void 0!=a.attr("data-audio-preview")&&(c.audioPreview=a.attr("data-audio-preview"),-1!=c.audioPreview.indexOf("ebsfm:")&&(c.audioPreview=HAPUtils.b64DecodeUnicode(c.audioPreview.substr(6))));void 0!=a.attr("data-peaks")&&(c.peaks=a.attr("data-peaks"));void 0!=a.attr("data-path")?c.path=a.attr("data-path"):void 0!=a.attr("data-mp3")?c.path=a.attr("data-mp3"):void 0!=
a.attr("data-wav")?c.path=a.attr("data-wav"):void 0!=a.attr("data-aac")?c.path=a.attr("data-aac"):void 0!=a.attr("data-flac")&&(c.path=a.attr("data-flac"));c.path&&-1!=c.path.indexOf("ebsfm:")&&(c.path=HAPUtils.b64DecodeUnicode(c.path.substr(6)));void 0!=a.attr("data-mountpoint")&&(c.mountpoint=a.attr("data-mountpoint"));void 0!=a.attr("data-version")&&(c.version=a.attr("data-version"));void 0!=a.attr("data-sid")&&(c.sid=a.attr("data-sid"));void 0!=a.attr("data-lyrics")&&(c.lyrics=a.attr("data-lyrics"),
-1!=c.lyrics.indexOf("ebsfm:")&&(c.lyrics=HAPUtils.b64DecodeUnicode(c.lyrics.substr(6))));void 0!=a.attr("data-limit")&&(c.limit=Math.abs(parseInt(a.attr("data-limit"),10)));Qc?c.thumb=Qc:void 0!=a.attr("data-thumb")&&(c.thumb=a.attr("data-thumb"));void 0!=a.attr("data-thumb-small")&&(c.thumbSmall=a.attr("data-thumb-small"));void 0!=a.attr("data-thumb-default")&&(c.thumbDefault=a.attr("data-thumb-default"));void 0!=a.attr("data-thumb-alt")&&(c.thumbAlt=a.attr("data-thumb-alt"));void 0!=a.attr("data-title")&&
(c.title=a.attr("data-title"));void 0!=a.attr("data-description")?c.description=a.attr("data-description"):a.find(".hap-playlist-description").length&&(c.descriptionHtml=a.find(".hap-playlist-description").remove().wrap("<p>").parent().html());void 0!=a.attr("data-artist")&&(c.artist=a.attr("data-artist"));void 0!=a.attr("data-album")&&(c.album=a.attr("data-album"));void 0!=a.attr("data-download")&&(c.download=a.attr("data-download"));void 0!=a.attr("data-duration")&&(c.duration=a.attr("data-duration"));
void 0!=a.attr("data-date")&&(c.date=a.attr("data-date"));void 0!=a.attr("data-id3")&&(c.id3=!0);pc?qc?void 0!=c.mediaId&&c.mediaId==qc&&(c.start=pc,pc=qc=null):c.start=pc:void 0!=a.attr("data-start")&&(c.start=Math.abs(a.attr("data-start")));jd?c.end=jd:void 0!=a.attr("data-end")&&(c.end=Math.abs(a.attr("data-end")));void 0!=a.attr("data-link")&&(c.link=a.attr("data-link"),c.target="_blank",void 0!=a.attr("data-target")&&(c.target=a.attr("data-target")),void 0!=a.attr("data-rel")&&(c.rel=a.attr("data-rel")));
void 0!=a.attr("data-playlist-icons")&&(c.playlistIcons=a.data("playlist-icons"));void 0!=a.attr("data-sort")&&(c.sort=a.attr("data-sort"));void 0!=a.attr("data-active-accordion")&&(c.activeAccordion=a.attr("data-active-accordion"));a.html().length&&(c.customContent=a.html());void 0!=a.attr("data-load-more")&&(Oa=!0);ld&&(void 0!=a.attr("data-ad-pre")?(c.adPre=a.attr("data-ad-pre").split(",").map(function(d){return d.trim()}),void 0!=a.attr("data-shuffle-ads")&&1<c.adPre.length&&HAPUtils.shuffleArray(c.adPre)):
rc&&(c.adPre=rc),void 0!=a.attr("data-ad-mid")?(c.adMid=a.attr("data-ad-mid").split(",").map(function(d){return d.trim()}),void 0!=a.attr("data-shuffle-ads")&&1<c.adMid.length&&HAPUtils.shuffleArray(c.adMid),void 0!=a.attr("data-ad-mid-interval")&&(c.adMidInterval=a.attr("data-ad-mid-interval"))):sc&&(c.adMid=sc,md&&(c.adMidInterval=md)),void 0!=a.attr("data-ad-end")?(c.adEnd=a.attr("data-ad-end").split(",").map(function(d){return d.trim()}),void 0!=a.attr("data-shuffle-ads")&&1<c.adEnd.length&&HAPUtils.shuffleArray(c.adEnd)):
tc&&(c.adEnd=tc));return c}function J(a){"youtube"==a&&(pb=new HAPYoutubeLoader(b),f(pb).on("HAPYoutubeLoader.END_LOAD",function(c,d){var e,g=d.data.length;for(e=0;e<g;e++){var r=d.data[e];ia.push(r)}pa=d.nextPageToken;Ca?Na():M()}))}function ea(a){if("file:"==window.location.protocol)return console.log("Reading folders requires server connection."),!1;a.limit?(Da=a.limit,a.loadMore&&(Oa=!0)):Da=999999999;var c=a.path.replace(/\/\//g,"/"),d=b.sourcePath+"includes/folder_parser.php";c={dir:c};var e=
Da;pa=[];a.id3?(Bb=Ia=ia.length-1,Xd=!0):Xd=!1;f.ajax({type:"GET",url:d,data:c,dataType:"json"}).done(function(g){var r,E=g.length;a.sort&&("filename-asc"==a.sort?HAPUtils.keysrt(g,"filename"):"filename-desc"==a.sort?HAPUtils.keysrt(g,"filename",!0):"date-asc"==a.sort?HAPUtils.keysrt(g,"filemtime"):"date-desc"==a.sort&&HAPUtils.keysrt(g,"filemtime",!0));for(r=0;r<E;r++){var P=g[r];var V=f.extend(!0,{},a);V.type="audio";var ra=P.fullpath;V.path=ra;b.createDownloadIconsInPlaylist&&!V.download&&(V.download=
ra);b.createLinkIconsInPlaylist&&!V.link&&(V.link=ra);V.title||(V.title=P.filename);r<e?(ia.push(V),Ia++):pa.push(V)}0==pa.length&&(Oa=!1,pa=null);a.id3?("undefined"===typeof jsmediatags&&console.log("Link to jsmediatags.js missing in head tag!"),ec()):M()}).fail(function(g,r,E){console.log("Error processFolder: "+g.responseText,r,E);M()})}function ja(a){if("file:"==window.location.protocol)return console.log("Reading folders requires server connection."),!1;var c=a.path.replace(/\/\//g,"/");f.ajax({type:"GET",
url:b.sourcePath+"includes/folder_accordion.php",data:{dir:c},dataType:"json"}).done(function(d){var e,g=d.length,r;for(e=0;e<g;e++){var E=d[e].children;Mc.push({media:E});var P=E.length;for(r=0;r<P;r++){var V=E[r];var ra={type:"audio"};void 0!=a.mediaId&&(ra.mediaId=a.mediaId);var za=V.fullpath;ra[V.extension]=za;b.createDownloadIconsInPlaylist&&!ra.download&&(ra.download=za);b.createLinkIconsInPlaylist&&!ra.link&&(ra.link=za);ra.title||(ra.title=V.filename);E[r]=ra}}uc(d,a);Pa||(Pa=0);Lc=Pa;U=od=
U.find('.hap-accordion-item[data-id="'+Pa+'"]').addClass("hap-accordion-item-inited hap-accordion-item-opened").find(".hap-accordion-item-content");ia=d[Pa].children;a.id3?(Yd=!0,"undefined"===typeof jsmediatags&&console.log("Link to jsmediatags.js missing in head tag!"),Bb=-1,Ia=ia.length-1,fc()):Na()}).fail(function(d,e,g){console.log("Error processFolderAccordion: "+d,e,g);M()})}function ya(a){if("file:"==window.location.protocol)return console.log("Reading json requires server connection."),!1;
f.ajax({type:"GET",url:a.path,dataType:"json"}).done(function(c){var d,e=c.length,g;for(d=0;d<e;d++){var r=c[d].children;Mc.push({media:r});a.sort&&("filename-asc"==a.sort?HAPUtils.keysrt(r,"filename"):"filename-desc"==a.sort?HAPUtils.keysrt(r,"filename",!0):"date-asc"==a.sort?HAPUtils.keysrt(r,"filemtime"):"date-desc"==a.sort&&HAPUtils.keysrt(r,"filemtime",!0));var E=r.length;for(g=0;g<E;g++){var P=r[g];var V={type:"audio"};void 0!=a.mediaId&&(V.mediaId=a.mediaId);P=ob?ob+"/"+c[d].parent+"/"+P:P;
V.mp3=P;b.createDownloadIconsInPlaylist&&!V.download&&(V.download=P);b.createLinkIconsInPlaylist&&!V.link&&(V.link=P);r[g]=V}}uc(c,a);Pa||(Pa=0);Lc=Pa;U=od=U.find('.hap-accordion-item[data-id="'+Pa+'"]').addClass("hap-accordion-item-inited hap-accordion-item-opened").find(".hap-accordion-item-content");ia=c[Pa].children;a.id3?(Yd=!0,"undefined"===typeof jsmediatags&&console.log("Link to jsmediatags.js missing in head tag!"),Bb=-1,Ia=ia.length-1,fc()):Na()}).fail(function(c,d,e){console.log("Error processJsonAccordion: "+
c,d,e);M()})}function na(a){if("file:"==window.location.protocol)return console.log("Reading files from folders locally is not possible! This requires server connection."),!1;if(HAPUtils.isEmpty(b.gDriveAppId))return console.log("gDriveAppId has not been set in settings!"),!1;f.ajax({url:"https://www.googleapis.com/drive/v3/files?q='"+a.path+"'+in+parents&pageSize=1000&key="+b.gDriveAppId,dataType:"jsonp"}).done(function(c){var d,e=c.files.length,g=[],r=[];for(d=0;d<e;d++){var E=c.files[d];/mp3|mpeg|mpeg3|wav|aac|adts/.test(E.mimeType)?
r.push(E):/jpg|jpeg|png|webp/.test(E.mimeType)&&g.push(E)}a.sort&&("filename-asc"==a.sort?(HAPUtils.keysrt(r,"name"),HAPUtils.keysrt(g,"name")):"filename-desc"==a.sort&&(HAPUtils.keysrt(r,"name",!0),HAPUtils.keysrt(g,"name",!0)));e=r.length;for(d=0;d<e;d++){E=r[d];c=f.extend(!0,{},a);c.type="audio";var P=E.name.substr(E.name.lastIndexOf(".")+1),V="https://www.googleapis.com/drive/v3/files/"+E.id+"?alt=media&key="+b.gDriveAppId;c[P.toLowerCase()]=V;b.createDownloadIconsInPlaylist&&!c.download&&(c.download=
V);b.createLinkIconsInPlaylist&&!c.link&&(c.link="https://drive.google.com/open?id="+E.id);!c.thumb&&g[d]&&(c.thumb="https://drive.google.com/uc?export=view&id="+g[d].id);c.title||(c.title=E.name.substr(0,E.name.lastIndexOf(".")));ia.push(c)}M()}).fail(function(c,d,e){console.log("Error processGdriveFolder: "+c,d,e);M()})}function Aa(){if(!pa)return!1;sa=!0;La.show();ia=pa.splice(0,Da);0==pa.length&&(pa=null);Xd?(Bb=-1,Ia=ia.length-1,ec()):Na()}function ec(){var a=ia[Ia];jsmediatags.read(a.path||
a.mp3||a.wav||a.aac,{onSuccess:function(c){c=c.tags;var d=c.picture;c.artist&&(a.artist=c.artist);c.title&&(a.title=c.title);c.album&&(a.album=c.album);if(b.getId3Image&&d){var e="",g,r=d.data.length;for(g=0;g<r;g++)e+=String.fromCharCode(d.data[g]);a.thumb="data:"+d.format+";base64,"+window.btoa(e);a.thumbIsBase64=!0}c.TLEN&&(a.duration=c.TLEN.data/1E3);Ia--;Ia>Bb?ec():Ca?Na():M()},onError:function(c){console.log("ID3 error: ",c.type,c.info);Ia--;Ia>Bb?ec():M()}})}function fc(){var a=ia[Ia];jsmediatags.read(a.path||
a.mp3||a.wav||a.aac,{onSuccess:function(c){c=c.tags;var d=c.picture;c.artist&&(a.artist=c.artist);c.title&&(a.title=c.title);c.album&&(a.album=c.album);if(b.getId3Image&&d){var e="",g,r=d.data.length;for(g=0;g<r;g++)e+=String.fromCharCode(d.data[g]);a.thumb="data:"+d.format+";base64,"+window.btoa(e);a.thumbIsBase64=!0}c.TLEN&&(a.duration=c.TLEN.data/1E3);Ia--;Ia>Bb?fc():Na()},onError:function(c){console.log("ID3 error: ",c.type,c.info);Ia--;Ia>Bb?fc():Na()}})}function Rc(a){if("file:"==window.location.protocol)console.log("Using Podcast requires server connection!");
else{a.limit?(Da=a.limit,a.loadMore&&(Oa=!0)):Da=999999999;var c=hf+"?url="+encodeURIComponent(a.path),d=Da;pa=[];f.ajax({url:c,dataType:"json",cache:!1}).done(function(e){e=e.contents.substr(e.contents.indexOf("<?xml"));var g=HAPUtils.parseXML(e),r,E,P,V=0;f(g).find("image").length&&f(g).find("image").attr("href")?P=f(g).find("image").attr("href"):f(e).find("itunes\\:image").length&&f(e).find("itunes\\:image").attr("href")&&(P=f(e).find("itunes\\:image").attr("href"));P&&P.lastIndexOf("&size=Large")&&
(P=P.replace("=Large","=Small"));f(g).find("item").each(function(){r=f(this);E=f.extend(!0,{},a);E.type="audio";E.mp3=r.find("enclosure").attr("url");!E.title&&r.find("title").length&&(E.title=r.find("title").text());E.artist||(r.find("author").length?E.artist=r.find("author").text():r.find("itunes\\:author").length&&(E.artist=r.find("itunes\\:author").text()));r.find("pubDate").length&&(E.date=r.find("pubDate").text());if(!E.description&&r.find("description").length){var ra=r.find("description").text(),
za=document.createElement("div");za.innerHTML=ra;E.description=za.textContent||za.innerText||""}E.duration||(r.find("itunes\\:duration").length?E.duration=r.find("itunes\\:duration").text():r.find("duration").length&&(E.duration=r.find("duration").text()));E.thumb||(r.find("image").length&&r.find("image").attr("href")?E.thumb=r.find("image").attr("href"):r.find("itunes\\:image").length&&r.find("itunes\\:image").attr("href")?E.thumb=r.find("itunes\\:image").attr("href"):P&&(E.thumb=P));E.thumb.lastIndexOf("&size=Large")&&
(E.thumb=E.thumb.replace("=Large","=Small"));b.createDownloadIconsInPlaylist&&!E.download&&(E.download=E.mp3);r.find("link").length&&!E.link&&b.createLinkIconsInPlaylist&&(E.link=r.find("link").text());V<d?ia.push(E):pa.push(E);V++});M()}).fail(function(e,g,r){console.log("Error processPodcast: "+e.responseText,g,r);M()})}}function nd(a){if("file:"==window.location.protocol)console.log("Using Podcast requires server connection!");else{var c=a.path.match(/id(\d+)/);(c=c?c[1]:url.match(/\d+/))?f.ajax({url:"https://itunes.apple.com/lookup",
data:{id:parseInt(c),entity:"podcast"},type:"GET",dataType:"jsonp"}).done(function(d){a.path=d.results[0].feedUrl;Rc(a)}).fail(function(d,e,g){console.log("Error processiTunes: "+d.responseText,e,g);M()}):(console.log("No Podcast ID found!"),M())}}function Ab(){if("file:"==window.location.protocol)console.log("Using SoundCloud requires server connection!");else{b.soundCloudAppId=b.scak[Math.floor(Math.random()*b.scak.length)];var a=document.createElement("script");a.src="https://connect.soundcloud.com/sdk.js";
var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(a,c);var d=setInterval(function(){window.SC&&(d&&clearInterval(d),SC.initialize({client_id:b.soundCloudAppId}),Wd=!0)},100)}}function hb(a,c){SC.get(a?"https://api.soundcloud.com/resolve.json?url="+c+"&client_id="+b.soundCloudAppId:c,{limit:Da,linked_partitioning:1},function(d,e){if(e){for(console.log("Error getSoundCloudPage: "+e);cb.length;)ia.push(cb.splice(0,1)[0]);M()}else{if("track"==d.kind)Ea(d);else if("playlist"==
d.kind){var g,r=d.tracks.length;if(cb.length+r>=Da){r=Da-cb.length;var E=!0}for(g=0;g<r;g++)Ea(d.tracks[g])}else if(d.collection)for(r=d.collection.length,cb.length+r>=Da&&(r=Da-cb.length,E=!0),g=0;g<r;g++)Ea(d.collection[g]);else{if(d.username){g=d.uri;g=/likes/.test(c)?g+"/likes":/favorites/.test(c)?g+"/favorites":g+"/tracks";hb(!1,g);return}if(f.isArray(d))for(r=d.length,cb.length+r>=Da&&(r=Da-cb.length,E=!0),g=0;g<r;g++)Ea(d[g])}pa=d.next_href?d.next_href:null;if(d.next_href&&!E)hb(!1,d.next_href);
else{for(;cb.length;)ia.push(cb.splice(0,1)[0]);M()}}})}function db(){if(!pa)return!1;sa=!0;La.show();ia=[];ia=pa.splice(0,Da);0==pa.length&&(pa=null);Na()}function Nb(){if(!pa)return!1;sa=!0;La.show();Mb=0;ta=[];X=1;if(window.SC)hb(!1,pa);else{Ab();var a=setInterval(function(){Wd&&(a&&clearInterval(a),hb(!1,pa))},100)}}function Ea(a){if(a.streamable&&a.stream_url){var c=f.extend(!0,{},ta[Mb]);c.type="audio";a.duration&&(c.duration=a.duration/1E3);-1==a.stream_url.indexOf("?")?c.mp3=a.stream_url+
"?client_id="+b.soundCloudAppId:c.mp3=a.stream_url+"&client_id="+b.soundCloudAppId;b.createDownloadIconsInPlaylist&&!c.download&&a.downloadable&&a.download_url&&(c.download=c.mp3.replace(/\/stream\\?/,"/download"));!c.title&&a.title&&(c.title=a.title);!c.description&&a.description&&(c.description=a.description);!c.thumb&&a.artwork_url&&(c.thumb=a.artwork_url);a.created_at&&(c.date=a.created_at);c.favoritingsCount=parseInt(a.favoritings_count?a.favoritings_count:0,10);c.playbackCount=parseInt(a.playback_count?
a.playback_count:0,10);c.hotness=c.favoritingsCount+c.playbackCount;a.permalink_url&&b.createLinkIconsInPlaylist&&!c.link&&(c.link=a.permalink_url);c.sc_data=a;cb.push(c)}}function Na(){var a,c=Ob?ib:la.length,d=ia.length,e,g,r,E,P,V=0,ra=[],za;Zd=[];for(a=0;a<d;a++){var vc=a+c;Ob&&V++;var L=pd?ia[a].data:ia[a];var qd=L.type;if(b.usePlaylist){if(L.type){var oa=P=E=r=g=za=null;-1!=Ua.indexOf("thumb")&&(e=L.thumbSmall||L.thumb||L.thumbDefault)&&("soundcloud"==L.origtype&&b.soundCloudThumbQualityInPlaylist&&
(e=e.replace("large.jpg",b.soundCloudThumbQualityInPlaylist)),!ob||L.thumbIsBase64||HAPUtils.relativePath(e)||(e=ob+e),g=L.thumbAlt?L.thumbAlt:L.title?L.title.replace(/"/g,"'"):"image",g='<img class="hap-thumbimg" src="'+e+'" alt="'+g+'"/>');-1!=Ua.indexOf("description")&&(L.description&&(r=L.description,b.limitDescriptionText&&0!=b.limitDescriptionText&&r.length>parseInt(b.limitDescriptionText,10)&&(b.createReadMoreInDescription?(e=r.substr(0,parseInt(b.limitDescriptionText,10)),r=r.substr(parseInt(b.limitDescriptionText,
10)),r=e+'<span class="hap-playlist-description-read-more-text">'+r+'</span><span class="hap-playlist-description-read-more-dots">...</span>&nbsp;<span class="hap-playlist-description-read-more-btn" title="'+b.limitDescriptionReadMoreText+'">'+b.limitDescriptionReadMoreText+"</span>"):r=r.substr(0,parseInt(b.limitDescriptionText,10))+"...")),L.descriptionHtml&&(E=L.descriptionHtml));-1!=Ua.indexOf("duration")&&L.duration&&(P=isNaN(L.duration)?-1==L.duration.lastIndexOf(":")?HAPUtils.formatTime(L.duration):
L.duration:HAPUtils.formatTime(L.duration));-1!=Ua.indexOf("date")&&L.date&&(oa=(new Date(L.date)).toDateString().slice(4,10));L.origclasses||(L.origclasses="hap-playlist-item");e=f('<div class="'+L.origclasses+'"/>');delete L.origclasses;var $d=f('<div class="hap-playlist-item-content"/>').appendTo(e);-1!=Ua.indexOf("thumb")&&g&&f('<div class="hap-playlist-thumb">'+g+'<div class="hap-playlist-thumb-style"></div></div>').appendTo($d);if(-1!=Ua.indexOf("title")||-1!=Ua.indexOf("description")&&L.description){g=
f('<div class="hap-playlist-info">').appendTo($d);if(-1!=Ua.indexOf("title")&&L.title){var Pb='<div class="hap-playlist-title-wrap">';b.useNumbersInPlaylist&&(Pb+='<div class="hap-playlist-title-num"></div>');L.artist&&L.title?Pb="title"==jf[0]?Pb+('<div class="hap-playlist-title">'+L.title+"</div>"+b.artistTitleSeparator+'<div class="hap-playlist-artist">'+L.artist+"</div>"):Pb+('<div class="hap-playlist-artist">'+L.artist+"</div>"+b.artistTitleSeparator+'<div class="hap-playlist-title">'+L.title+
"</div>"):L.title?Pb+='<div class="hap-playlist-title">'+L.title+"</div>":L.artist&&(Pb+='<div class="hap-playlist-artist">'+L.artist+"</div>");Pb+="</div>";g.append(Pb)}-1!=Ua.indexOf("description")&&(r?f('<div class="hap-playlist-description">'+r+"</div>").appendTo(g):E&&g.append(E))}if(-1!=Ua.indexOf("duration")&&L.duration||-1!=Ua.indexOf("date")&&L.date)E=f('<div class="hap-playlist-info2">').appendTo($d),-1!=Ua.indexOf("duration")&&P&&f('<div class="hap-playlist-duration">'+P+"</div>").appendTo(E),
-1!=Ua.indexOf("date")&&oa&&f('<div class="hap-playlist-date">'+oa+"</div>").appendTo(E);e.attr("data-type",qd);void 0!=L.mediaId&&e.attr("data-media-id",L.mediaId);L.title&&(oa=L.title.replace(/['"\|]/g,""),u.getTitle(L,!0),e.attr({"data-title":L.title,"data-safe-title":oa}),L.safeTitle=oa);L.artist&&(oa=L.artist.replace(/['"\|]/g,""),e.attr({"data-artist":L.artist,"data-safe-artist":oa}),L.safeArtist=oa);L.description&&(oa=L.description.replace(/"/g,"'"),e.attr("data-description",oa));L.category&&
e.attr("data-category",L.category);L.tag&&e.attr("data-tag",L.tag);b.useStatistics&&rd.length?(za=f('<div class="hap-playlist-icons"></div>').appendTo(e),oa=f('<div class="hap-stats"></div>'),za.prepend(oa),-1!=rd.indexOf("plays")&&(P=f('<div class="hap-stat-icon hap-play-count" title="'+b.tooltipStatPlays+'">'+b.statPlayIcon+"<span>0</span></div>"),oa.append(P)),-1!=rd.indexOf("likes")&&(P=f('<div class="hap-stat-icon hap-like-count" title="'+b.tooltipStatLikes+'">'+b.statLikeIcon+"<span>0</span></div>"),
oa.append(P)),-1!=rd.indexOf("downloads")&&(P=He&&void 0!=L.download?f('<a href="'+L.download+'" class="hap-stat-icon hap-download-count" download aria-label="'+b.tooltipStatDownloads+'" title="'+b.tooltipStatDownloads+'">'+b.statDownloadIcon+"<span>0</span></a>"):f('<div class="hap-stat-icon hap-download-count hap-no-download" title="'+b.tooltipStatDownloads+'">'+b.statDownloadIcon+"<span>0</span></div>"),oa.append(P))):He&&L.download&&(za=f('<div class="hap-playlist-icons"></div>').appendTo(e),
oa=f('<a class="hap-playlist-icon hap-download" href="'+L.download+'" title="'+b.downloadIconTitle+'" aria-label="'+b.downloadIconTitle+'">'+b.downloadIcon+"</a>"),za.prepend(oa));if(L.playlistIcons)for(za||(za=f('<div class="hap-playlist-icons"></div>').appendTo(e)),oa=L.playlistIcons.length,c=0;c<oa;c++)P=L.playlistIcons[c],za.append('<a class="hap-playlist-icon hap-icon-'+P.icon+'" href="'+P.url+'" target="'+P.target+'" title="'+P.title+'">&#x'+P.icon+"</a>");L.link&&(za||(za=f('<div class="hap-playlist-icons"></div>').appendTo(e)),
oa='<a class="hap-playlist-icon hap-link" href="'+L.link+'" target="'+(L.target||"_blank")+'" title="'+b.linkIconTitle+'" aria-label="'+b.linkIconTitle+'"',L.rel&&(oa+=' rel="'+L.rel+'"'),oa+=">"+b.linkIcon+"</a>",za.append(oa));L.customContent&&(e.append(L.customContent),delete L.customContent)}else e=L;if(Ob){Ie?Ie.after(e):wc?e.appendTo(U):U.children("div").eq(ib).before(e);var Ie=e}else e.appendTo(U);b.addPlaylistEvents&&(e.on("click",".hap-playlist-thumb, .hap-playlist-title-wrap",t),Sc||(e.on("mouseenter ",
".hap-playlist-thumb, .hap-playlist-title-wrap",B),e.on("mouseleave",".hap-playlist-thumb, .hap-playlist-title-wrap",K)))}else b.useStatistics&&void 0!=L.mediaId&&(L.title&&(oa=L.title.replace(/['"\|]/g,""),L.safeTitle=oa),L.artist&&(oa=L.artist.replace(/['"\|]/g,""),L.safeArtist=oa));void 0!=Ma&&(L.playlistId=Ma);ac?ra.push({id:a,type:qd,data:L}):la.splice(vc,0,{id:vc,type:qd,data:L});Zd.push({id:vc,type:qd,data:L})}ac?(b.usePlaylistScroll=!1,b.allowOnlyOneOpenedAccordion||Qb.addClass("hap-force-hidden"),
Xa.addClass("hap-accordion"),Mc[Pa].data=ra,Je?(Ya(!1),b.useStatistics&&Cb()):(la=ra,Ya(!0),b.useStatistics&&Cb(),ha.setPlaylistItems(X)),T(),V=od[0],V.style.height=V.scrollHeight+"px",ae=!1,Je=!0):(Xa.removeClass("hap-accordion"),dc=U,Ya(!0),b.useStatistics&&Cb(),Ob?(vc=ha.getCounter(),ha.setPlaylistItems(X,!1),ib<=vc&&(wc||ha.reSetCounter(vc+V)),sd&&ha.setCounter(ib,!1),td=!1):ha.setPlaylistItems(X),T())}function Db(a){La.show();Pa=a.attr("data-id");U=od=a.addClass("hap-accordion-item-inited").find(".hap-accordion-item-content");
ia=Mc[Pa].media;Yd?(Bb=-1,Ia=ia.length-1,fc()):Na()}function uc(a,c){var d,e=a.length,g="";for(d=0;d<e;d++){var r=a[d].parent.replace(/"/g,"'");"undefined"!==c.activeAccordion&&c.activeAccordion==r&&(Pa=d);g+='<div class="hap-accordion-item" data-id="'+d+'" title="'+r+'"><span class="hap-accordion-item-title">'+r+'</span><div class="hap-accordion-item-content">';a[d].description&&(g+='<span class="hap-accordion-item-description">'+a[d].description+"</span>");g+="</div></div>"}U.html(g)}function Ya(a){a&&
(X=la.length);if(b.usePlaylist){var c=0,d,e,g;U.find(".hap-playlist-item").each(function(){d=f(this).attr("data-id",c);g=d.find(".hap-playlist-title");g.length&&b.useNumbersInPlaylist&&(e=HAPUtils.formatNumber(c)+b.numberTitleSeparator,d.find(".hap-playlist-title-num").length?d.find(".hap-playlist-title-num").html(e):g.before(f('<div class="hap-playlist-title-num">'+e+"</div>")));a&&(la[c].id=c);c++})}}function Cb(){var a,c=[];for(a=0;a<X;a++){var d=la[a].data;d.id=a;if(!d.hapStatsSet){var e=void 0!=
d.mediaId?d.mediaId:null;c.push({media_id:e,title:d.safeTitle||d.title||"",artist:d.safeArtist||d.artist||""});d.hapStatsSet=!0}}c.length&&qb("hap_all_count",null,c)}function Y(a){if("mcustomscrollbar"==b.playlistScrollType)if("undefined"===typeof mCustomScrollbar){var c=document.createElement("script");c.type="text/javascript";c.src=HAPUtils.qualifyURL(b.sourcePath+b.mCustomScrollbar_js);c.onload=c.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||Y(a)};c.onerror=function(){alert("Error loading "+
this.src)};var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d)}else a.mCustomScrollbar({axis:"horizontal"==b.playlistScrollOrientation?"x":"y",theme:b.playlistScrollTheme,scrollInertia:0,mouseWheel:{normalizeDelta:!0,deltaFactor:50,preventDefault:!0},keyboard:{enable:!1},advanced:{autoExpandHorizontalScroll:!0},callbacks:{onOverflowYNone:function(){a.find(".mCSB_container").addClass("hap-mCSB_full")},onOverflowY:function(){a.find(".mCSB_container").removeClass("hap-mCSB_full")},
onTotalScroll:function(){Oa?pa&&xa&&!sa&&(sa=!0,La.show(),Ca=!0,ia=[],ua&&ua.css("opacity",0),"soundcloud"==xa?Nb():"podcast"==xa?db():"folder"==xa?Aa():"youtube"==xa&&(pb||J("youtube"),pb.resumeLoad(pa))):nb&&(Ca||ud())}}});else"perfect-scrollbar"==b.playlistScrollType&&("function"!==typeof PerfectScrollbar?(c=document.createElement("script"),c.type="text/javascript",c.src=HAPUtils.qualifyURL(b.sourcePath+b.perfectScrollbar_js),c.onload=c.onreadystatechange=function(){this.readyState&&"complete"!=
this.readyState||Y(a)},c.onerror=function(){alert("Error loading "+this.src)},d=document.getElementsByTagName("script")[0],d.parentNode.insertBefore(c,d)):(rb=new PerfectScrollbar(a[0],{wheelSpeed:2,wheelPropagation:!0,minScrollbarLength:30}),a[0].addEventListener("horizontal"==b.playlistScrollOrientation?"ps-x-reach-end":"ps-y-reach-end",function(){Oa?pa&&xa&&!sa&&(sa=!0,La.show(),Ca=!0,ia=[],ua&&ua.css("opacity",0),"soundcloud"==xa?Nb():"podcast"==xa?db():"folder"==xa?Aa():"youtube"==xa&&(pb||J("youtube"),
pb.resumeLoad(pa))):nb&&(Ca||ud())})))}function T(){La.hide();sa=!1;if(!Z){Z=!0;if(aa&&void 0!=aa.attr("data-use-pagination")&&(gc=Math.ceil(oc/Kb),oc>Kb)){Va=0;be(Va);var a;for(a=0;a<gc;a++){var c=0==a?{page:0}:{page:null};xc.push(c)}Ke(Va)}if(b.createReadMoreInDescription)U.on("click",".hap-playlist-description-read-more-btn",function(g){g=f(this);var r=g.closest(".hap-playlist-description"),E=r.find(".hap-playlist-description-read-more-text");r=r.find(".hap-playlist-description-read-more-dots");
"none"==r.css("display")?(g.html(b.limitDescriptionReadMoreText).attr("title",b.limitDescriptionReadMoreText),r.css("display","inline")):(g.html(b.limitDescriptionReadLessText).attr("title",b.limitDescriptionReadLessText),r.css("display","none"));E.slideToggle("fast")});b.usePlaylistScroll&&!Tc&&(Xa.length&&Y(Xa),Tc=!0);setTimeout(function(){b.hidePlayerUntilMusicStart||(-1<wa.indexOf("hap-fixed")&&Le(),b.addResizeEvent&&ce(),setTimeout(function(){vd.css("opacity",1)},50));f(u).trigger("setupDone",
{instance:u,instanceName:b.instanceName})},100);ac&&(Rb=F.find(".hap-accordion-item").eq(Pa),F.find(".hap-accordion-item-title").on("click",function(){var g=f(this).closest(".hap-accordion-item");if(g.hasClass("hap-accordion-item-opened")){g.removeClass("hap-accordion-item-opened");var r=g.find(".hap-accordion-item-content")[0];r.style.height="0"}else{b.allowOnlyOneOpenedAccordion&&Rb&&Rb!=g&&(Rb.removeClass("hap-accordion-item-opened"),r=Rb.find(".hap-accordion-item-content")[0],r.style.height="0",
Rb.find(".hap-playlist-item").each(function(){f(this).show()}));de.val("");Qb.hide();if(g.hasClass("hap-accordion-item-inited"))r=g.find(".hap-accordion-item-content")[0],r.style.height=r.scrollHeight+"px";else{if(ae)return!1;ae=!0;Db(g)}Rb=g.addClass("hap-accordion-item-opened")}}))}if(b.usePlaylist&&0<X){var d=[];U.find(".hap-thumbimg:not(.hap-visible)").each(function(){d.push(f(this))});var e=0;a=d.length;for(c=0;c<a;c++)setTimeout(function(){clearTimeout(this);d[e].addClass("hap-visible");e++},
50+50*c);HAPUtils.isEmpty(bb)||u.sort(bb)}if(!wd&&(wd=!0,!Ob&&!Ca&&0<X))if(void 0!=b.mediaId){b.mediaTitle?(a=U.find(".hap-playlist-item[data-media-id="+b.mediaId+'][data-safe-title="'+b.mediaTitle+'"]'),0==a.length&&(a=U.find(".hap-playlist-item[data-media-id="+b.mediaId+"]")),delete b.mediaTitle):a=U.find(".hap-playlist-item[data-media-id="+b.mediaId+"]");a=U.children(".hap-playlist-item").index(a);if(void 0==a||-1==a)return alert("No media with ID to load! LoadMedia failed."),!1;delete b.mediaId;
ha.processPlaylistRequest(a)}else null!=kd?(a=U.find('.hap-playlist-item[data-media-id="'+kd+'"]'),a.length?(a=a.attr("data-id"),kd=null):a=0):a=b.activeItem,a>X-1&&(a=X-1),-1<a&&ha.setCounter(a,!1);Ca=Ob=!1;ua&&(Oa?pa?ua.css("opacity",1):(ua.remove(),ua=null,Oa=!1):nb?0<oc?oc>Lb?ua.css("opacity",1):(ua.remove(),ua=null,nb=!1):(ua.remove(),ua=null):(ua.remove(),ua=null));f(u).trigger("playlistEndLoad",{instance:u,instanceName:b.instanceName,loadMoreOnTotalScroll:Oa,addMoreOnTotalScroll:nb,playlistLength:X});
-1<wa.indexOf("hap-wall")&&(xd?U.masonry("reloadItems"):("undefined"===typeof f.fn.masonry&&console.log("Link to masonry.pkgd.min.js file missing in head tag!"),"function"!==typeof imagesLoaded&&console.log("Link to imagesloaded.pkgd.min file missing in head tag!"),xd=U.masonry({itemSelector:".hap-playlist-item"})),U.imagesLoaded(function(){xd.masonry("layout")}),U.find(".hap-playlist-item-content:not(.hap-has-overlay)").each(function(){f(this).addClass("hap-has-overlay").find(".hap-playlist-thumb").after(f('<div class="hap-wall-overlay"></div>'))}))}
function fa(){Eb=new Hls;ee=Hls.isSupported();Me=!0;Eb.on(Hls.Events.MEDIA_ATTACHED,function(){Eb.loadSource(ka)});Eb.on(Hls.Events.ERROR,function(a,c){if(c.fatal)switch(c.type){case Hls.ErrorTypes.NETWORK_ERROR:console.log("fatal network error encountered, try to recover");Eb.startLoad();break;case Hls.ErrorTypes.MEDIA_ERROR:console.log("fatal media error encountered, try to recover");Eb.recoverMediaError();break;default:Eb.destroy()}})}function Sb(){if("hls"==R){if(ka=I.path,!Me){if("undefined"===
typeof Hls){var a=document.createElement("script");a.type="text/javascript";a.src="https://cdn.jsdelivr.net/npm/hls.js@latest";a.onload=a.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||(fa(),Sb())};a.onerror=function(){alert("Error loading "+this.src)};var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(a,c)}else fa(),Sb();return}}else sb?(ka=b.useCorsForAudio?b.cors+I.path:I.path,I.mountpoint&&(ka+=I.mountpoint),"shoutcast"==R&&"/;"!=ka.substring(ka.length-
2)&&(ka+="/;"),yc||("undefined"===typeof HAPRadioData&&console.log("link to radio.js file missing in head tag!"),yc=new HAPRadioData(b,Ra),f(yc).on("HAPRadioData.DATA_READY",function(d,e){e.title&&(I.title=e.title);e.artist&&(I.artist=e.artist);e.thumb&&(I.thumb=e.thumb);fe();yd&&N()})),yc.getData(I)):b.useAudioPreview&&I.audioPreview?ka=I.audioPreview:kf&&I.mp3?ka=I.mp3:lf&&I.aac?ka=I.aac:mf&&I.wav?ka=I.wav:nf&&I.flac?ka=I.flac:I.path&&(ka=I.path);if(ka){-1!=ka.indexOf("ebsfm:")&&(ka=HAPUtils.b64DecodeUnicode(ka.substr(6)));
"audio"==R&&ob&&!HAPUtils.relativePath(ka)&&(ka=ob+ka);zd=!1;hc.on("ended",function(){ca&&ca.isAdEndOn()||(xb&&Fa&&!$a&&!Zc.isDrag()?($a=!0,Q.currentTime=Ta,Q.play()):Nd())}).on("canplay",function(d){}).on("loadedmetadata",function(){setTimeout(function(){zd||hc.trigger("canplay")},1E3)}).on("canplay",function(){if(!zd){zd=!0;try{Q.playbackRate=Number(b.playbackRate)}catch(e){}var d=Q.duration;HAPUtils.isNumber(d)&&(jb.html(HAPUtils.formatTime(d)),xb&&(jc.html("00:00"),kc.html(HAPUtils.formatTime(d))))}}).on("canplaythrough",
function(){"audio"==R&&(b.resumeTime?(Q.currentTime=b.resumeTime,delete b.resumeTime):I.start&&(Q.currentTime=I.start))}).on("play",function(){Be()}).on("pause",function(){Ce()}).on("seeked",function(){xb&&Fa&&setTimeout(function(){clearTimeout(this);$a=!1},500);qa&&(Fb||(qa.currentTime=Q.currentTime),Fb=!1)}).on("error",function(d){f(u).trigger("soundError",{instance:u,instanceName:b.instanceName,media:I,error:d})});if("hls"==R){if("file:"==window.location.protocol)return console.log("Playing HLS requires server connection!"),
!1;if(ee)Eb.attachMedia(Q);else if(Q.canPlayType("application/vnd.apple.mpegurl"))Q.src=ka;else if(I.mp3)Q.src=I.mp3;else{alert("This browser or device does not support HLS extension. Please use mp3 audio for playback!");return}Ba&&(a=Q.play(),void 0!==a&&a.then(function(){})["catch"](function(d){}))}else Q.src=ka,Ba&&(a=Q.play(),void 0!==a&&a.then(function(){})["catch"](function(d){console.log(d)}));Q.volume=b.volume;Ba=!0;sb?b.useStatistics&&(ge=!0,zc=0):(Gb&&clearInterval(Gb),Gb=setInterval(ad,
Ae))}else alert("No required audio format supplied! Please add mp3 audio format to play!")}function ad(){if(!(yb||b.pauseAudioDuringAds&&ca&&ca.isAdOn())){if("youtube"==R){if(ba){var a=ba.getCurrentTime(),c=ba.getDuration();var d=ba.getVideoLoadedFraction()}}else if(Q&&(a=Q.currentTime,c=Q.duration,HAPUtils.isNumber(a)&&HAPUtils.isNumber(c)&&"undefined"!==typeof Q.buffered&&0!=Q.buffered.length)){try{var e=Q.buffered.end(Q.buffered.length-1)}catch(g){}isNaN(e)||(d=e/c)}if(HAPUtils.isNumber(a)&&HAPUtils.isNumber(c)){!Ad&&
0<a&&fb&&(Ad=!0,f(u).trigger("soundPlay",{instance:u,instanceName:b.instanceName,media:I}));b.useWaveSeekbar&&Jb?he.width(a/c*100+"%"):Ic?bd.drawSeekbar(d,a,c):(ab.width(a/c*Ka),d&&Ne.width(d*Ka));b.useInlineSeekbar&&Ac.find(".hap-inline-seekbar-progress").width(a/c*Ac.width());d=HAPUtils.formatTime(a);e=HAPUtils.formatTime(c);tb.html(d);jb.html(e);if(!yb){if(I.end&&a>=I.end){Nd();return}b.useFixedPlayer&&window.hap_fixed_active_player==b.instanceName&&Ib&&Ga.setProgressData(a/c,null,d,e,c)}xb&&Fa&&
!$a&&!Zc.isDrag()&&(parseInt(a,10)<parseInt(Ta,10)||a>kb)?($a=!0,u.seek(Ta)):I.lyrics&&ub&&Bd&&Uc&&fb&&ub.synchronize(a)}}}function Be(){Ib||(Ib=!0,Ka=b.useWaveSeekbar?lc.width():Jc.width(),ca&&ca.setSeekBarSize(Ka),f(u).trigger("soundStart",{instance:u,instanceName:b.instanceName,media:I}),I.adMid&&ca.adMidStartHandler(),b.useFixedPlayer&&(window.hap_fixed_active_player=b.instanceName,Ga.setData({inst:b.instanceName,media:I,volume:b.volume})));ge&&(Tb&&clearTimeout(Tb),ie=Date.now()+1E3,Tb=setTimeout(Oe,
1E3));I.adMid&&ca.adMidPlayHandler();b.useFixedPlayer&&window.hap_fixed_active_player==b.instanceName&&Ga.setPauseBtn();b.togglePlaybackOnPlaylistItem&&va.find(".hap-playlist-thumb-style").addClass("hap-playlist-thumb-style-pause");if(b.togglePlaybackOnMultipleInstances&&1<hap_mediaArr.length){var a,c=hap_mediaArr.length;for(a=0;a<c;a++)u!=hap_mediaArr[a].inst&&hap_mediaArr[a].inst.pauseMedia()}qa&&(Fb||(a=qa.play(),void 0!==a&&a.then(function(){})["catch"](function(d){})),Fb=!1);Ad&&f(u).trigger("soundPlay",
{instance:u,instanceName:b.instanceName,media:I});eb.find(".hap-btn-play").hide();eb.find(".hap-btn-pause").show();fb=!0;b.autoPlayAfterFirst&&(Ba=!0,b.autoPlay=!0);b.hidePlayerUntilMusicStart&&Pe();Cd&&"undefined"!==typeof ga&&ga("send",{hitType:"event",eventCategory:"Modern audio player: "+b.instanceName,eventAction:"played",eventLabel:"title: "+u.getTitle(I,!0)+" | time: "+Math.round(u.getCurrentTime()),nonInteraction:!0});-1<wa.indexOf("hap-fixed")&&Qe(!0)}function Ce(){eb.find(".hap-btn-play").show();
eb.find(".hap-btn-pause").hide();qa&&(Fb||qa.pause(),Fb=!1);ge&&Tb&&clearTimeout(Tb);b.useFixedPlayer&&window.hap_fixed_active_player==b.instanceName&&Ga.setPlayBtn();b.togglePlaybackOnPlaylistItem&&va.find(".hap-playlist-thumb-style").removeClass("hap-playlist-thumb-style-pause");fb=!1;f(u).trigger("soundPause",{instance:u,instanceName:b.instanceName,media:I});Cd&&"undefined"!==typeof ga&&ga("send",{hitType:"event",eventCategory:"Modern audio player: "+b.instanceName,eventAction:"paused",eventLabel:"title: "+
u.getTitle(I,!0)+" | time: "+Math.round(u.getCurrentTime()),nonInteraction:!0});-1<wa.indexOf("hap-fixed")&&Qe()}function Nd(){ca&&ca.clearAdMidTimeout();f(u).trigger("soundEnd",{instance:u,instanceName:b.instanceName,media:I});b.useStatistics&&qb("hap_finish_count",Ja);Cd&&"undefined"!==typeof ga&&ga("send",{hitType:"event",eventCategory:"Modern audio player: "+b.instanceName,eventAction:"ended",eventLabel:"title: "+u.getTitle(I,!0),nonInteraction:!0});I.adEnd?ca.setAdEnd():b.stopOnSongEnd||Re()}
function Re(a){var c=I.start||0;"single"==b.loopState?(a||mc(),"youtube"==R?ba&&(ba.seekTo(c),ba.playVideo()):(a&&(Q.src=ka),Q.currentTime=c,Q.play())):"off"!=b.loopState&&"playlist"!=b.loopState||u.nextMedia()}function Bc(){Gb&&clearInterval(Gb);Tb&&clearTimeout(Tb);zc=0;ca&&(ca.cleanAds(),ab.removeClass("hap-ad-progress-level"),Ub.hide());sb?yc&&yc.destroy():"hls"==R?ee&&Eb.detachMedia():"youtube"==R&&ba&&($c=!0,Xb.hide(),Sa&&ba.stopVideo(),Od=!1);Q&&(Q.pause(),Q.src="");hc&&hc.off("ended canplay canplaythrough loadedmetadata pause play error timeupdate seeked");
tb.html("00:00");jb.html("00:00");Se.html("");Te.html("");ab.width(0);Ne.width(0);Jb=null;he.width(0);R=null;sd=Ib=fb=!1;Ue||(Ba=!1);xb&&u.resetRange();eb.find(".hap-btn-play").show();eb.find(".hap-btn-pause").hide();Ad=!1;Ac&&Ac.find(".hap-inline-seekbar-progress").width(0);Qa&&Qa.find(".hap-lyrics-container").html("");ub&&ub.deactivate();Bd=!1;qa&&(qa.pause(),qa.src="",qa=null,Dd.html(""))}function cd(){"undefined"!==typeof f.fn.masonry&&xd&&U.masonry("destroy");R&&(Bc(),va&&S());b.sortableTracks&&
b.sortableTracksSet&&(U.sortable("destroy"),b.sortableTracksSet=!1);U.empty();dc=null;wd=Ob=!1;X=0;Mb=-1;la=[];ia=[];ta=[];ha.reSetCounter();tc=md=sc=rc=jd=qc=pc=Qc=aa=null;nb=!1;ob=null;Ca=!1;xa=pa=null;Oa=!1;id=hd=gd=fd=ed=dd=Lb=oc=Kb=null;bb="";zb.find(".hap-btn-sort-alpha-up").hide();zb.find(".hap-btn-sort-alpha-down").show();de.val("");Qb.hide();Vc=Wc=null;xc=[];Ra.css("backgroundImage","none").css("opacity",0);f(u).trigger("destroyPlaylist",{instance:u,instanceName:b.instanceName})}function mc(){Ed&&
Pd&&(la[Ja].data.start=u.getCurrentTime());b.useStatistics&&(sb?0<zc&&qb("hap_time_played",Ja):(qb("hap_play_count",Ja),60>u.getCurrentTime()&&qb("hap_skipped_first_minute",Ja)))}function ce(){if(!Z||!b.addResizeEvent)return!1;ma.hide();var a=F.width();a<b.playlistItemMultilineWidth?U.addClass("hap-playlist-item-multiline"):U.removeClass("hap-playlist-item-multiline");if(b.breakPointArr){var c,d=b.breakPointArr.length;for(c=0;c<d;c++){var e=b.breakPointArr[c];a<e?F.addClass("hap-breakpoint-"+e.toString()):
F.removeClass("hap-breakpoint-"+e.toString())}}b.useWaveSeekbar&&Jb&&(a=Ha.width(),Rd.width=a,Sd.width=a,gb.width=a,Zb.fillStyle=b.waveBgColor,$b.fillStyle=b.waveProgressColor,b.waveBarWidth?HAPUtils.drawBars(Zb,$b,gb,Jb.split(","),0,a):HAPUtils.drawWave(Zb,$b,gb,Jb.split(","),0,a));Ka=b.useWaveSeekbar?lc.width():Jc.width();ca&&ca.setSeekBarSize(Ka);xb&&Fa&&u.resizeRange()}function fe(){I.title||I.artist?(u.getTitle(I),hc.attr("title",u.getTitle(I,!0))):hc.attr("title","");I.title&&Se.html(I.title);
I.artist&&Te.html(I.artist);I.description&&F.find(".hap-player-desc").html(I.description);if((!je||!Qc)&&Ra.length){var a=I.thumb||I.thumbDefault;a?Ve(a):"youtube"==R&&Ra.css("opacity",1)}}function Ve(a){!ob||I.thumbIsBase64||HAPUtils.relativePath(a)||(a=ob+a);"soundcloud"==I.origtype&&b.soundCloudThumbQuality&&(a=a.replace("large.jpg",b.soundCloudThumbQuality));a=encodeURI(a);-1<Ra.css("backgroundImage").indexOf(a)||(I.title?Ra.attr("aria-label",I.title):Ra.attr("aria-label",""),je?(Ra.css("opacity",
0),setTimeout(function(){Ra.css("backgroundImage","url("+a+")").css("opacity",1)},300)):Ra.css("backgroundImage","url("+a+")").css("opacity",1),je=!0,(-1<wa.indexOf("hap-metalic")||-1<wa.indexOf("hap-poster"))&&F.find(".hap-player-image").fadeOut(300,function(){f(this).css("backgroundImage","url("+a+")").fadeIn(300)}))}function of(){var a=I.title||"";a="https://itunes.apple.com/search?type=jsonp&term=="+encodeURI(I.artist||"")+"-"+encodeURI(a)+"&media=music&limit=1";f.ajax({url:a,dataType:"jsonp"}).done(function(c){if(c.results[0]&&
c.results[0].artworkUrl100){var d=Ra.width();d=HAPUtils.closestNumber(b.artworkSize,d);c=c.results[0].artworkUrl100.replace("100x100",d+"x"+d);la[Ja].data.thumb=c;Ve(c)}}).fail(function(c,d,e){console.log(c,d,e)})}function Fd(a){if(sb){var c=a.safeTitle?a.safeTitle:a.path.replace(/['"\|]/g,"");a=null}else c=a.safeTitle||a.title||"",a=a.safeArtist||a.artist||"";return{title:c,artist:a}}function Oe(){var a=Date.now()-ie;zc+=1;ie+=1E3;Tb=setTimeout(Oe,Math.max(0,1E3-a))}function qb(a,c,d){if("file:"!=
window.location.protocol){if("hap_all_count"==a)var e=[{name:"action",value:a},{name:"data",value:JSON.stringify(d)}];else if("hap_play_count"==a){if(!la[c])return;e=la[c].data;void 0==Ma&&void 0!=e.playlistId&&(Ma=e.playlistId);d=Fd(e);e=[{name:"action",value:a},{name:"percentToCountAsPlay",value:b.percentToCountAsPlay},{name:"playlist_id",value:Ma},{name:"player_id",value:b.playerId},{name:"media_id",value:e.mediaId},{name:"audio_url",value:ka},{name:"title",value:d.title},{name:"artist",value:d.artist},
{name:"album",value:e.album||null},{name:"thumb",value:e.thumb||e.thumbDefault||null},{name:"currentTime",value:Q.currentTime},{name:"duration",value:Q.duration},{name:"countryData",value:JSON.stringify(We)}]}else if("hap_download_count"==a||"hap_like_count"==a||"hap_finish_count"==a)e=la[c].data,void 0==Ma&&void 0!=e.playlistId&&(Ma=e.playlistId),d=Fd(e),e=[{name:"action",value:a},{name:"playlist_id",value:Ma},{name:"player_id",value:b.playerId},{name:"media_id",value:e.mediaId},{name:"audio_url",
value:ka},{name:"title",value:d.title},{name:"artist",value:d.artist},{name:"album",value:e.album||null},{name:"thumb",value:e.thumb||e.thumbDefault||null}];else if("hap_skipped_first_minute"==a)e=la[c].data,d=Fd(e),e=[{name:"action",value:a},{name:"playlist_id",value:Ma},{name:"player_id",value:b.playerId},{name:"media_id",value:e.mediaId},{name:"audio_url",value:ka},{name:"title",value:d.title},{name:"artist",value:d.artist},{name:"album",value:e.album||null},{name:"thumb",value:e.thumb||e.thumbDefault||
null}];else if("hap_time_played"==a){if(!la[c])return;e=la[c].data;void 0==Ma&&void 0!=e.playlistId&&(Ma=e.playlistId);d=Fd(e);e=[{name:"action",value:a},{name:"playlist_id",value:Ma},{name:"player_id",value:b.playerId},{name:"media_id",value:e.mediaId},{name:"audio_url",value:ka},{name:"seconds_played",value:zc},{name:"title",value:d.title},{name:"artist",value:d.artist||null},{name:"album",value:e.album||null},{name:"thumb",value:e.thumb||e.thumbDefault||""}]}d=b.ajax_url;console.log(e);f.ajax({url:d,
type:"post",data:e,dataType:"json"}).done(function(g){if(b.usePlaylist&&g&&"-1"!=g){var r=U.find('.hap-playlist-item[data-id="'+c+'"]');if("hap_like_count"==a&&g.c_like)r.find(".hap-like-count span").html(HAPUtils.nFormatter(parseInt(g.c_like,10),1));else if("hap_download_count"==a&&g.c_download)r.find(".hap-download-count span").html(HAPUtils.nFormatter(parseInt(g.c_download,10),1));else if("hap_play_count"==a&&g.c_play)r.find(".hap-play-count span").html(HAPUtils.nFormatter(parseInt(g.c_play,10),
1));else if("hap_all_count"==a){var E=g.length,P;for(r=0;r<E;r++){var V=g[r];V.title&&V.artist&&V.media_id?P=U.find('.hap-playlist-item[data-media-id="'+V.media_id+'"][data-safe-title="'+V.title+'"][data-safe-artist="'+V.artist+'"]'):V.title&&V.artist?P=U.find('.hap-playlist-item[data-safe-title="'+V.title+'"][data-safe-artist="'+V.artist+'"]'):V.title?P=U.find('.hap-playlist-item[data-media-id="'+V.media_id+'"][data-safe-title="'+V.title+'"]'):V.artist&&(P=U.find('.hap-playlist-item[data-media-id="'+
V.media_id+'"][data-safe-artist="'+V.artist+'"]'));P.find(".hap-like-count span").html(HAPUtils.nFormatter(parseInt(V.c_like,10),1));P.find(".hap-download-count span").html(HAPUtils.nFormatter(parseInt(V.c_download,10),1));P.find(".hap-play-count span").html(HAPUtils.nFormatter(parseInt(V.c_play,10),1))}}}}).fail(function(g,r,E){console.log("Error getStats: "+g.responseText,r,E)})}}function Qe(a){Vb.find(".hap-btn").hide();a?Vb.find(".hap-btn-pause").show():Vb.find(".hap-btn-play").show()}function ud(){La.show();
Ca=!0;ua&&ua.css("opacity",0);f.ajax({url:b.ajax_url,type:"post",data:[{name:"action",value:"hap_add_more"},{name:"playlist_id",value:Ma},{name:"addMoreOffset",value:Lb},{name:"addMoreLimit",value:Kb},{name:"addMoreSortOrder",value:dd},{name:"addMoreSortDirection",value:ed},{name:"encryptMediaPaths",value:b.encryptMediaPaths},{name:"taxonomy",value:fd},{name:"category",value:gd},{name:"tag",value:hd},{name:"match",value:id}],dataType:"json"}).done(function(a){console.log(a);aa&&void 0!=aa.attr("data-add-more-offset")&&
(Lb=parseInt(aa.attr("data-add-more-offset"),10)+Kb,aa.attr("data-add-more-offset",Lb));u.addTrack(a)}).fail(function(a,c,d){console.log(a,c,d);u.endLoadMore()})}function pf(){La.show();Ca=!0;var a=[{name:"action",value:"hap_paginate"},{name:"playlist_id",value:Ma},{name:"addMoreOffset",value:Lb},{name:"addMoreLimit",value:Kb},{name:"addMoreSortOrder",value:dd},{name:"addMoreSortDirection",value:ed},{name:"encryptMediaPaths",value:b.encryptMediaPaths},{name:"taxonomy",value:fd},{name:"category",value:gd},
{name:"tag",value:hd},{name:"match",value:id}];console.log(a);f.ajax({url:b.ajax_url,type:"post",data:a,dataType:"json"}).done(function(c){console.log(c);U.find(".hap-playlist-item:visible").addClass("hap-pagination-hidden").each(function(){f(this).find(".hap-thumbimg").removeClass("hap-visible")});u.addTrack(c);be(Va);Ke()}).fail(function(c,d,e){console.log(c,d,e);u.endLoadMore()})}function Ke(){xc[Va].page=Va;var a=[];U.find(".hap-playlist-item:not(.hap-pagination-hidden)").each(function(){a.push(f(this))});
xc[Va].media_id=a}function be(a){a+=1;var c='<div class="hap-pagination-container">';1<a&&(c+='<div class="hap-pagination-page hap-pagination-prev" data-page-id="prev" title="'+b.paginationPreviousBtnTitle+'">'+b.paginationPreviousBtnText+"</div>");3<a&&(c+='<div class="hap-pagination-page hap-pagination-start" data-page-id="0">1</div><div class="hap-pagination-dots">...</div>');if(0<a-2){var d=a-2;c+='<div class="hap-pagination-page" data-page-id="'+(d-1)+'">'+d+"</div>"}0<a-1&&(d=a-1,c+='<div class="hap-pagination-page" data-page-id="'+
(d-1)+'">'+d+"</div>");d=a;c+='<div class="hap-pagination-page hap-pagination-currentpage" data-page-id="'+(d-1)+'">'+d+"</div>";a+1<gc+1&&(d=a+1,c+='<div class="hap-pagination-page" data-page-id="'+(d-1)+'">'+d+"</div>");a+2<gc+1&&(d=a+2,c+='<div class="hap-pagination-page" data-page-id="'+(d-1)+'">'+d+"</div>");a<gc-2&&(d=gc,c+='<div class="hap-pagination-dots">...</div><div class="hap-pagination-page hap-pagination-end" data-page-id="'+(d-1)+'">'+d+"</div>");a<gc&&(c+='<div class="hap-pagination-page hap-pagination-next" data-page-id="next" title="'+
b.paginationNextBtnTitle+'">'+b.paginationNextBtnText+"</div>");c+="</div>";Vc?Vc.html(c):F.append('<div class="hap-pagination-wrap">'+c+"</div>");Xe||(Xe=!0,Vc=F.find(".hap-pagination-wrap").on("click",".hap-pagination-page:not(.hap-pagination-currentpage)",function(){if(!Z||sa||Ca)return!1;Ca=!0;Wc&&Wc.removeClass("hap-pagination-currentpage");Wc=f(this).addClass("hap-pagination-currentpage");var e=f(this).attr("data-page-id");Va="prev"==e?Va-1:"next"==e?Va+1:parseInt(e,10);null==xc[Va].page?(Lb=
Va*Kb,pf()):(U.find(".hap-playlist-item:visible").addClass("hap-pagination-hidden").each(function(){f(this).find(".hap-thumbimg").removeClass("hap-visible")}),f(xc[Va].media_id).each(function(){var g=f(this).removeClass("hap-pagination-hidden").find(".hap-thumbimg").removeClass("hap-visible");setTimeout(function(){g.addClass("hap-visible")},20)}),be(Va),Ca=!1)}),Wc=Vc.find(".hap-pagination-currentpage"))}function Pe(){b.hidePlayerUntilMusicStart&&(b.hidePlayerUntilMusicStart=!1,vd.removeClass("hap-music-player-force-hidden"),
ce(),-1<wa.indexOf("hap-fixed")&&Le(),setTimeout(function(){vd.css("opacity",1)},50))}function Le(){-1<wa.indexOf("hap-fixed")&&(ic.on("click",function(){b.playerOpened?(F.stop().animate({bottom:-F.height()+"px"},{duration:400,complete:function(){ic.find(".hap-btn").hide();ic.find(".hap-btn-player-open").show();0<X&&R&&Vb.show()}}),b.playlistOpened=!1):(F.stop().animate({bottom:-Za.height()+"px"},{duration:400}),ic.find(".hap-btn").hide(),ic.find(".hap-btn-player-close").show(),Vb.hide());b.playerOpened=
!b.playerOpened}),Vb.on("click",function(a){u.togglePlayback()}),Vb.find(".hap-btn-play").show(),F.hasClass("hap-fixed-inited")||(F.addClass("hap-fixed-inited"),setTimeout(function(){b.playerOpened?(b.playlistOpened?F.css({bottom:"0px"}):F.css({bottom:-Za.height()+"px"}),ic.find(".hap-btn-player-close").show()):(b.playlistOpened=!1,F.css({bottom:-F.height()+"px"}),ic.find(".hap-btn-player-open").show(),0<X&&R&&Vb.show())},20)))}b=f.extend(!0,{},{sharemanager_js:"js/sharemanager.js",perfectScrollbar_js:"js/perfect-scrollbar.min.js",
mCustomScrollbar_js:"js/jquery.mCustomScrollbar.concat.min.js",mediaId:null,mediaTitle:null,resumeTime:null,sourcePath:"",instanceName:"",queryInstance:"",playlistItemContent:"",playlistTitleOrder:"title,artist",statisticsContent:"plays,likes,downloads",dataInterval:250,volume:.5,activeItem:0,numberTitleSeparator:".&nbsp;",artistTitleSeparator:"&nbsp;-&nbsp;",useNumbersInPlaylist:!1,preload:"auto",autoPlay:!1,loopState:"playlist",playbackRate:1,addResizeEvent:!0,addPlaylistEvents:!0,sortableTracksSet:!1,
togglePlaybackOnPlaylistItem:!0,pauseAudioDuringAds:!0,randomPlay:!1,usePlaylist:!0,waveOptions:{barHeight:1,halfPixel:.5,barGap:5,barMinHeight:null,normalize:!1,partialRender:!1,pixelRatio:1},playlistScrollType:"mcustomscrollbar",useVideoControls:!1,usePlaylistScroll:!1,useKeyboardNavigationForPlayback:!1,keyboardControls:[],togglePlaybackOnMultipleInstances:!0,useTitleScroll:!1,clearDialogCacheOnStart:!0,useSeekOnLyrics:!0,lyricsAutoOpen:!1,videoAutoOpen:!1,titleScrollSpeed:1,titleScrollSeparator:" *** ",
continousKey:"hap-continous-key",lyricsAutoScroll:!0,useMediaSession:!0,createDownloadIconsInPlaylist:!1,createLinkIconsInPlaylist:!1,limitDescriptionReadMoreText:"Read more",limitDescriptionReadLessText:"Read less",scak:"4e6c7139ca2791a89863367ba374a28e r4wruADPCq7iqJomagvYpdehvILa2bgE b972bf0e059078490e8579b43bf95923 64c56d14d1844681f7cca8c61ec0082a 86b6a66bb2d863f5d64dd8a91cd8de94 8da368dc752f739dcf6e4abb8317548d b4bee2a55625cf4ab8e3f7ea1d35e103 0aff03b3b79c2ac02fd2283b300735bd".split(" "),useShare:!0,
percentToCountAsPlay:25,scrollToPlayer:0,linkIconTitle:"Purchase",downloadIconTitle:"Download",tooltipStatPlays:"Plays",tooltipStatLikes:"Likes",tooltipStatDownloads:"Downloads",artworkSize:[100,200,250,340,460,600],soundCloudThumbQuality:"t300x300.jpg",playbackRateMin:.5,playbackRateMax:2,sortOrder:"",modifierKey:"",getId3Image:!0,useContinousPlayback:!1,playlistItemMultilineWidth:600,searchDescriptionInPlaylist:!0,hideYoutubeAfterStart:!1,getRadioArtwork:!0,defaultSongArtist:"DATA NOT AVAILABLE",
defaultSongTitle:"DATA NOT AVAILABLE",lastPlayedInterval:1E4,enableCors:!0,cors:"https://kastproxy-us.herokuapp.com/,https://kastproxy-eu.herokuapp.com/,https://cors-anywhere.herokuapp.com/,https://cors.io/?",useCorsForAudio:!1,seekTime:10,paginationPreviousBtnTitle:"Previous",paginationPreviousBtnText:"Prev",paginationNextBtnTitle:"Next",paginationNextBtnText:"Next",whatsAppWarning:"Please share this content on mobile device!",downloadIcon:"<svg viewBox='0 0 512 512'><path d='M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z'></path></svg>",
linkIcon:"<svg viewBox='0 0 576 512'><path d='M504.717 320H211.572l6.545 32h268.418c15.401 0 26.816 14.301 23.403 29.319l-5.517 24.276C523.112 414.668 536 433.828 536 456c0 31.202-25.519 56.444-56.824 55.994-29.823-.429-54.35-24.631-55.155-54.447-.44-16.287 6.085-31.049 16.803-41.548H231.176C241.553 426.165 248 440.326 248 456c0 31.813-26.528 57.431-58.67 55.938-28.54-1.325-51.751-24.385-53.251-52.917-1.158-22.034 10.436-41.455 28.051-51.586L93.883 64H24C10.745 64 0 53.255 0 40V24C0 10.745 10.745 0 24 0h102.529c11.401 0 21.228 8.021 23.513 19.19L159.208 64H551.99c15.401 0 26.816 14.301 23.403 29.319l-47.273 208C525.637 312.246 515.923 320 504.717 320zM408 168h-48v-40c0-8.837-7.163-16-16-16h-16c-8.837 0-16 7.163-16 16v40h-48c-8.837 0-16 7.163-16 16v16c0 8.837 7.163 16 16 16h48v40c0 8.837 7.163 16 16 16h16c8.837 0 16-7.163 16-16v-40h48c8.837 0 16-7.163 16-16v-16c0-8.837-7.163-16-16-16z'></path></svg>",
statDownloadIcon:"<svg viewBox='0 0 512 512'><path d='M504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zM212 140v116h-70.9c-10.7 0-16.1 13-8.5 20.5l114.9 114.3c4.7 4.7 12.2 4.7 16.9 0l114.9-114.3c7.6-7.6 2.2-20.5-8.5-20.5H300V140c0-6.6-5.4-12-12-12h-64c-6.6 0-12 5.4-12 12z'></path></svg>",statLikeIcon:"<svg viewBox='0 0 512 512'><path d='M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z'></path></svg>",
statPlayIcon:"<svg viewBox='0 0 512 512'><path d='M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm115.7 272l-176 101c-15.8 8.8-35.7-2.5-35.7-21V152c0-18.4 19.8-29.8 35.7-21l176 107c16.4 9.2 16.4 32.9 0 42z'></path></svg>"},b);var Gc=HAPUtils.getUrlParameter(),Hc=[],Ld=[],gf="type noapi video audio-preview path path version sid lyrics limit thumb thumb-small thumb-default thumb-alt title description artist album download duration date id3 start end link target rel load-more active-accordion".split(" ");
Gc["hap-query-instance"]?decodeURIComponent(Gc["hap-query-instance"])==b.instanceName&&z():z();Gc=null;var F=f(this).css("display","block"),vd=F.find(".hap-player-outer");b.hidePlayerUntilMusicStart&&vd.addClass("hap-music-player-force-hidden");var wa="";void 0!=F.attr("class")&&(wa=F.attr("class").split(/\s+/));if(b.customClass)if(-1<b.customClass.indexOf("|")){var Ye=b.customClass.split(","),Wb,ke=Ye.length;for(Wb=0;Wb<ke;Wb++){var Ze=Ye[Wb].split("|");F.find(Ze[0]).addClass(Ze[1])}}else F.addClass(b.customClass);
b.markup&&F.append(b.markup);var Vd=f(b.playlistList),Za=F.find(".hap-playlist-holder"),Xa=F.find(".hap-playlist-inner");F.find(".hap-playlist-inner-wrap");var U=F.find(".hap-playlist-content"),Qb=F.find(".hap-playlist-filter-msg"),zb=F.find(".hap-sort-alpha"),qf=F.find(".hap-popup-toggle"),Jc=F.find(".hap-progress-bg"),Ne=F.find(".hap-load-level"),ab=F.find(".hap-progress-level"),lc=F.find(".hap-seekbar-wave"),he=F.find(".hap-seekbar-wave-progress");F.find(".hap-volume-toggle");F.find(".hap-volume-seekbar");
F.find(".hap-volume-bg");F.find(".hap-volume-level");var Qa=F.find(".hap-lyrics-holder"),le=F.find(".hap-lyrics-toggle"),vb=F.find(".hap-video-holder"),Dd=F.find(".hap-video-wrap"),me=F.find(".hap-video-toggle"),Gd=F.find(".hap-player-holder"),Ra=F.find(".hap-player-thumb").attr("role","img"),Nc=F.find(".hap-share-holder"),Oc=F.find(".hap-playback-rate-holder"),rf=F.find(".hap-playback-rate-toggle"),Se=F.find(".hap-player-title"),Te=F.find(".hap-player-artist"),Fe=F.find(".hap-playlist-main-title"),
Ge=F.find(".hap-playlist-main-description"),tb=F.find(".hap-media-time-current"),jb=F.find(".hap-media-time-total"),Ub=F.find(".hap-media-time-ad"),eb=F.find(".hap-playback-toggle"),bc=F.find(".hap-loop-toggle"),mb=F.find(".hap-random-toggle"),ne=F.find(".hap-range-toggle"),$e=F.find(".hap-range-holder"),sf=F.find(".hap-share-toggle"),La=F.find(".hap-preloader"),Vb=F.find(".hap-playback-toggle-ex"),ic=F.find(".hap-player-toggle-ex"),Sc=HAPUtils.isMobile(),af=HAPUtils.hasLocalStorage(),Ba=b.autoPlay,
Ue=Ba,Ua=b.playlistItemContent.replace(/\s+/g,"").split(","),jf=b.playlistTitleOrder.replace(/\s+/g,"").split(","),rd=b.statisticsContent?b.statisticsContent.replace(/\s+/g,"").split(","):"",Ed=b.useContinousPlayback&&af,Pd=Ed&&b.continousPlaybackTrackAllSongs,yd=b.useMediaSession&&"mediaSession"in navigator&&"file:"!=window.location.protocol,Cd=b.useGa&&b.gaTrackingId,bb=b.sortOrder,tf=b.fetchPlayerArtwork&&Ra.length;b.playlistContent&&(U=f(b.playlistContent));var u=this,Z,sa;f("body");var Ee=f(window),
Hb=f(document),oe,He=HAPUtils.hasDownloadSupport(),nc=HAPUtils.isIOS();HAPUtils.isAndroid();var kf=HAPUtils.canPlayMp3(),mf=HAPUtils.canPlayWav(),lf=HAPUtils.canPlayAac(),nf=HAPUtils.canPlayFlac();HAPUtils.isChrome();HAPUtils.isSafari();var hf=b.sourcePath+"includes/ba-simple-proxy.php",Pc=["playlist","single","off"],cc=Pc.indexOf(b.loopState),bf=["audio","hls","shoutcast","icecast","radiojar"],uf="audio youtube_single hls shoutcast icecast radiojar".split(" "),ob,Xe,Wc,Vc,gc,Va,xc=[],xd,rb,Ia,Bb,
hc=f(document.createElement("audio")).attr("preload",b.preload),Q=hc[0],zd,Ad,nb,Kb,oc,Lb,dd,ed,fd,gd,hd,id,qa,Hd,Fb,De,pa,Ca,xa,Oa,Xd,Wd,Da,cb=[],Eb,ee,Me,yc,ge,Tb,ie,zc=0,ca,Kc,ld=!0,pe,qe,ub,Bd,Uc,Md,pb,Xb,ba,xe,Sa,Od,$c,ze,ye,Tc,Td,je,Qc,pc,qc,jd,rc,sc,md,tc,wc,ib,Ob,sd,Mb=-1,pd,la=[],Zd=[],ia=[],ta=[],aa,X=0,kd=null,wd,dc,Ma,va,Ib,R,sb,ka,Ja,fb=!1,td,We,I,Ae=b.dataInterval,Gb,yb,Ka,Yb=HAPUtils.getEvents(),re=.5,Rb,ae,ac,od,Je,Pa,Lc,Mc=[],Yd,Qd,Ac,Jb,gb=b.waveOptions;gb.waveColor=b.waveBgColor;
gb.progressColor=b.waveProgressColor;gb.barWidth=b.waveBarWidth;gb.barRadius=b.waveBarRadius;-1<wa.indexOf("hap-grid")||-1<wa.indexOf("hap-wall")?U.addClass("hap-playlist-grid"):U.addClass("hap-playlist-default");b.viewSongWithoutAdsForLoggedInUser&&b.isUserLoggedIn&&(ld=!1);b.currentUserRoles&&(qe=b.currentUserRoles.split(","));b.viewSongWithoutAdsUserRoles&&(pe=b.viewSongWithoutAdsUserRoles.replace(/\s+/g,"").split(","));qe&&pe&&(ld=!HAPUtils.arrayContainsAnotherArray(pe,qe));b.useInlineSeekbar&&
(Ac=f('<div class="hap-inline-seekbar-bg"><div class="hap-inline-seekbar-progress"></div></div>'));b.soundCloudAppId&&!HAPUtils.isEmpty(b.soundCloudAppId)&&(b.scak=b.soundCloudAppId.split(",").map(function(a){return a.trim()}));if(b.useFixedPlayer){if(window.hap_fixedPlayer)var Ga=window.hap_fixedPlayer;else Ga=new HAPFixedPlayer({settings:b,wrapper:F}),window.hap_fixedPlayer=Ga;f(Ga).on("HAPFixedPlayer.SET_PROGRESS_START",function(a,c){c.inst==b.instanceName&&(Qd=yb=!0)});f(Ga).on("HAPFixedPlayer.SET_PROGRESS",
function(a,c){c.inst==b.instanceName&&(x(c.point,c.update,!0),c.update&&(Qd=yb=!1))});f(Ga).on("HAPFixedPlayer.VOLUME_CHANGE",function(a,c){c.inst==b.instanceName&&(b.volume=c.volume,u.setVolume(c.volume))});f(Ga).on("HAPFixedPlayer.TOGGLE_MUTE",function(a,c){c.inst==b.instanceName&&u.toggleMute()});f(Ga).on("HAPFixedPlayer.PREVIOUS_MEDIA",function(a,c){c.inst==b.instanceName&&u.previousMedia()});f(Ga).on("HAPFixedPlayer.NEXT_MEDIA",function(a,c){c.inst==b.instanceName&&u.nextMedia()});f(Ga).on("HAPFixedPlayer.TOGGLE_PLAYBACK",
function(a,c){c.inst==b.instanceName&&u.togglePlayback()});f(Ga).on("HAPFixedPlayer.LYRICS_TOGGLE",function(a,c){c.inst==b.instanceName&&u.toggleLyrics()})}-1==Ua.indexOf("description")&&(b.searchDescriptionInPlaylist=!1);"undefined"===typeof window.hap_mediaArr&&(window.hap_mediaArr=[]);window.hap_mediaArr.push({inst:u,id:b.instanceName});Sc&&(Ba=!1);b.autoPlayAfterFirst&&(Ba=!1,Ue=!0);0>b.volume?b.volume=0:1<b.volume&&(b.volume=1);0!=b.volume&&(re=b.volume);-1==cc&&(b.loopState="off");cc=Pc.indexOf(b.loopState);
bc.find(".hap-btn-loop-"+b.loopState).show();b.randomPlay?mb.find(".hap-btn-random-on").show():mb.find(".hap-btn-random-off").show();if(b.playlistSelector)f(b.playlistSelector).on("change",function(){u.loadPlaylist(f(this).val())});b.breakPointArr&&"string"===typeof b.breakPointArr&&(b.breakPointArr=b.breakPointArr.split(","),HAPUtils.sortNumericArray(b.breakPointArr));0==U.length&&(b.usePlaylist=!1,b.usePlaylistScroll=!1,b.useNumbersInPlaylist=!1);zb.find(".hap-btn-sort-alpha-down").show();eb.find(".hap-btn-play").show();
b.sortableTracks&&!b.sortableTracksSet&&setSortableTracks();if(b.scrollToPlayer&&!b.isPopup){delete b.scrollToPlayer;var vf=F.offset().top;f("html,body").animate({scrollTop:vf},500)}var ua=F.find(".hap-load-more-btn").on("click",function(){if(!Z||Ca)return!1;Oa?u.loadMore():nb&&ud();ua&&ua.css("opacity",0)}),Id=[];Qa.length&&Id.push({element:"lyrics",itemHandle:Qa.find(".hap-dialog-header-drag")[0],itemResizeHandle:Qa.find(".hap-dialog-resizable")[0],itemResizeMinW:parseInt(Qa.css("min-width"),10),
itemResizeMinH:parseInt(Qa.css("min-height"),10),itemDialog:Qa[0]});vb.length&&Id.push({element:"video",itemHandle:vb.find(".hap-dialog-header-drag")[0],itemResizeHandle:vb.find(".hap-dialog-resizable")[0],itemResizeMinW:parseInt(vb.css("min-width"),10),itemResizeMinH:parseInt(vb.css("min-height"),10),itemDialog:vb[0]});Id.length&&(document.addEventListener("HAPDialog.LYRICS_AUTOSCROLL_CHANGE",function(a){b.lyricsAutoScroll=a.detail;ub&&ub.setAutoScroll(b.lyricsAutoScroll)}),new HAPDialog(F,Id,b));
this.toggleLyrics=function(){Uc?Qa.one("transitionend",function(){Qa.css("display","none");Uc=!1}).removeClass("hap-visible"):(Qa.css("display","block"),setTimeout(function(){Qa.addClass("hap-visible");Uc=!0},20))};this.toggleVideo=function(){if(Hd)qa&&qa.pause(),vb.one("transitionend",function(){vb.css("display","none");Hd=!1}).removeClass("hap-visible");else if(vb.css("display","block"),setTimeout(function(){vb.addClass("hap-visible");Hd=!0},20),qa&&fb){var a=qa.play();void 0!==a&&a.then(function(){var c=
u.getCurrentTime();c&&(qa.currentTime=c)})["catch"](function(c){})}};Hb.on("click","[data-time-marker]",function(a){a.preventDefault();if(!Z||void 0==f(this).attr("data-time-marker"))return!1;a=HAPUtils.hmsToSecondsOnly(f(this).attr("data-time-marker"));u.seek(a);fb||u.playMedia();a=F.offset().top;f("html,body").animate({scrollTop:a},500)});var de=b.searchSelector?f(b.searchSelector):F.find(".hap-search-filter"),se;de.on("keyup",function(){if(0==X)return!1;var a=f(this).val().toLowerCase(),c,d=0;
if(ac)if(b.allowOnlyOneOpenedAccordion){for(c=0;c<X;c++){var e=Rb.find(".hap-playlist-item").eq(c);var g="";e.find(".hap-playlist-title").length&&(g+=e.find(".hap-playlist-title").html().toLowerCase());e.find(".hap-playlist-artist").length&&(g+=e.find(".hap-playlist-artist").html().toLowerCase());b.searchDescriptionInPlaylist&&e.find(".hap-playlist-description").length&&(g+=e.find(".hap-playlist-description").html().toLowerCase());-1<g.indexOf(a)?e.show():(e.hide(),d++)}d==X?Qb.show():Qb.hide()}else{d=
Za.find(".hap-accordion-item-opened");d.find(".hap-accordion-item-content").each(function(){""==a?f(this).removeClass("hap-accordion-item-content-search"):f(this).addClass("hap-accordion-item-content-search")});var r=d.find(".hap-playlist-item").length;for(c=0;c<r;c++)e=d.find(".hap-playlist-item").eq(c),g="",e.find(".hap-playlist-title").length&&(g+=e.find(".hap-playlist-title").html().toLowerCase()),e.find(".hap-playlist-artist").length&&(g+=e.find(".hap-playlist-artist").html().toLowerCase()),
b.searchDescriptionInPlaylist&&e.find(".hap-playlist-description").length&&(g+=e.find(".hap-playlist-description").html().toLowerCase()),-1<g.indexOf(a)?e.show():e.hide()}else{for(c=0;c<X;c++)e=U.find(".hap-playlist-item").eq(c),g="",e.find(".hap-playlist-title").length&&(g+=e.find(".hap-playlist-title").html().toLowerCase()),e.find(".hap-playlist-artist").length&&(g+=e.find(".hap-playlist-artist").html().toLowerCase()),b.searchDescriptionInPlaylist&&e.find(".hap-playlist-description").length&&(g+=
e.find(".hap-playlist-description").html().toLowerCase()),-1<g.indexOf(a)?e.removeClass("hap-filter-hidden").show():(e.addClass("hap-filter-hidden").hide(),d++);d==X?(Qb.show(),se=!1,ua&&ua.addClass("hap-force-hidden")):(Qb.hide(),se=!0,ua&&ua.removeClass("hap-force-hidden"))}});if(b.useShare)if("undefined"===typeof HAPShareManager){var Cc=document.createElement("script");Cc.type="text/javascript";Cc.src=HAPUtils.qualifyURL(b.sourcePath+b.sharemanager_js);Cc.onload=Cc.onreadystatechange=function(){this.readyState&&
"complete"!=this.readyState||(Ud=new HAPShareManager(b))};Cc.onerror=function(){alert("Error loading "+this.src)};var cf=document.getElementsByTagName("script")[0];cf.parentNode.insertBefore(Cc,cf)}else var Ud=new HAPShareManager(b);var ha=new HAPPlaylistManager({loop:b.loopState,random:b.randomPlay});f(ha).on("HAPPlaylistManager.COUNTER_READY",function(a,c){R&&Bc();Ja=c;I=la[Ja].data;I.type||(I=da(I),la[Ja].data=I);console.log(I);R=I.type;"youtube_single"==R&&(R="youtube");sb="shoutcast"==R||"icecast"==
R||"radiojar"==R?!0:!1;if(td)td=!1;else{if(I.lyrics&&Qa.length){if(!ub){Bd=!1;if(b.lyricsWrap&&b.lyricsContainer)var d=f(b.lyricsWrap)[0],e=f(b.lyricsContainer)[0];else d=Qa.find(".hap-lyrics-wrap")[0],e=Qa.find(".hap-lyrics-container")[0];ub=new HAPLyrics({wrapContainer:d,scrollContainer:e,settings:b,itemClass:"hap-lyrics-item",activeClass:"hap-lyrics-item-active"});document.addEventListener("HAPLyrics.LYRICS_CLICKED",function(E){if(ca&&ca.isAdOn()&&b.pauseAudioDuringAds)return!1;u.seek(E.detail);
u.playMedia()});document.addEventListener("HAPLyrics.LYRICS_READY",function(E){E.detail&&(I.lyricsContent=E.detail);Bd=!0;b.lyricsAutoOpen&&(Uc||u.toggleLyrics())})}I.lyricsContent?ub.setData(I.lyricsContent):ub.load(I.lyrics);le.show()}else le.hide();if(I.video&&Dd.length){d=" nofullscreen";b.useVideoFullscreen&&(d="");e=" disablepictureinpicture";b.useVideoPictureInPicture&&(e="");var g=" nodownload";b.useVideoDownload&&(g="");var r="";b.useVideoControls&&(r=" controls");d='<video class="hap-video" preload="'+
b.preload+'" muted playsinline'+e+' controlsList="noremoteplayback'+g+d+r+'">';d+='<source src="'+I.video+'" />';d+="</video>";b.useVideoControls||(d+='<div class="hap-video-blocker"></div>');Dd.html(d);qa=Dd.find(".hap-video")[0];qa.addEventListener("canplay",function(){if(b.playbackRate)try{qa.playbackRate=Number(b.playbackRate)}catch(E){}});b.useVideoControls&&(qa.addEventListener("play",function(){Fb=!0;u.playMedia()}),qa.addEventListener("pause",function(){Fb=!0;u.pauseMedia()}),qa.addEventListener("seeked",
function(){Fb=!0;u.seek(qa.currentTime)}));b.videoAutoOpen&&(Hd||u.toggleVideo());me.show()}else me.hide();b.useWaveSeekbar&&I.peaks&&n();sb?(ne.hide(),Ha.hide(),tb.hide(),jb.hide()):(ne.show(),Ha.show(),tb.show(),jb.show(),fe(),yd&&N());if(Pd&&b.lastPositionArr)for(e=b.lastPositionArr.length,d=0;d<e;d++)if(g=b.lastPositionArr[d],g.title&&I.title==g.title&&I.artist==g.artist){I.start=g.start;break}q(Ja);b.useInlineSeekbar&&va.find(".hap-playlist-thumb").append(Ac);I.thumb||I.thumbDefault||!tf||of();
if(I.adPre||I.adMid||I.adEnd)ca?ca.setAdData(I):("undefined"===typeof HAPAdManager&&console.log("link to admanager.js file missing in head tag!"),ca=new HAPAdManager(b,u,I,Q,Jc,ab,Ub,Ka),f(ca).on("HAPAdManager.IOS_ADMID_FIX_START",function(E,P){Kc=!0}).on("HAPAdManager.ADPRE_PLAY",function(E,P){ab.addClass("hap-ad-progress-level");tb.hide();jb.hide();Ub.show()}).on("HAPAdManager.ADPRE_ENDED",function(E,P){ab.removeClass("hap-ad-progress-level");Ub.hide();"shoutcast"!=R&&"icecast"!=R&&"radiojar"!=
R&&(tb.show(),jb.show());"youtube"==R?h():Sb()}).on("HAPAdManager.ADMID_PLAY",function(E,P){u.pauseMedia();ab.addClass("hap-ad-progress-level");tb.hide();jb.hide();Ub.show()}).on("HAPAdManager.ADMID_ENDED",function(E,P){ab.removeClass("hap-ad-progress-level");Ub.hide();"shoutcast"!=R&&"icecast"!=R&&"radiojar"!=R&&(tb.show(),jb.show());u.playMedia()}).on("HAPAdManager.ADEND_PLAY",function(E,P){ab.addClass("hap-ad-progress-level");tb.hide();jb.hide();Ub.show()}).on("HAPAdManager.ADEND_ENDED",function(E,
P){ab.removeClass("hap-ad-progress-level");Ub.hide();"shoutcast"!=R&&"icecast"!=R&&"radiojar"!=R&&(tb.show(),jb.hide());b.stopOnSongEnd||Re(!0)}));I.adPre?(ca.initAdPre(),Ba=!0,Q.volume=b.volume,d=Q.play(),void 0!==d&&d.then(function(){})["catch"](function(E){})):"youtube"==R?(h(),b.hidePlayerUntilMusicStart&&Pe()):Sb()}}).on("HAPPlaylistManager.PLAYLIST_END",function(){f(u).trigger("playlistEnd",{instance:u,instanceName:b.instanceName})});window.onYouTubeIframeAPIReady=function(){};Cd&&(window.ga||
function(a,c,d,e,g,r,E){a.GoogleAnalyticsObject=g;a[g]=a[g]||function(){(a[g].q=a[g].q||[]).push(arguments)};a[g].l=1*new Date;r=c.createElement(d);E=c.getElementsByTagName(d)[0];r.async=1;r.src=e;E.parentNode.insertBefore(r,E)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create",b.gaTrackingId,"auto"),ga("send","pageview"),F.on("click",".hap-download",function(a){if(!Z)return!1;window.ga&&(a=f(this).closest(".hap-playlist-item").find(".hap-playlist-title").html(),
ga("send",{hitType:"event",eventCategory:"Modern audio player: "+b.instanceName,eventAction:"downloaded",eventLabel:"title: "+a,nonInteraction:!0}))}));Ed?((window.attachEvent||window.addEventListener)(nc?"pagehide":"beforeunload",function(a){window.event&&(window.event.cancelBubble=!0);if(!Z||!R)return!1;y()}),nc&&document.addEventListener("unload",function(a){y()})):localStorage.removeItem(b.continousKey);yd&&(navigator.mediaSession.setActionHandler("play",function(){u.playMedia()}),navigator.mediaSession.setActionHandler("pause",
function(){u.pauseMedia()}),navigator.mediaSession.setActionHandler("previoustrack",function(){u.previousMedia()}),navigator.mediaSession.setActionHandler("nexttrack",function(){u.nextMedia()}),navigator.mediaSession.setActionHandler("seekbackward",function(){u.seekBackward()}),navigator.mediaSession.setActionHandler("seekforward",function(){u.seekForward()}));var ma=F.find(".hap-tooltip");Sc||(ma.length&&"static"==F.css("position")&&console.log("player css position is static, therefore tooltip might not work correctly. Please set wrapper css position to other than static if you use tooltip in player."),
F.on("mouseenter","[data-tooltip]",function(a){var c=f(this);a=F[0].getBoundingClientRect();var d=c[0].getBoundingClientRect();ma.text(c.attr("data-tooltip"));var e=parseInt(d.top-a.top-ma.outerHeight());c=parseInt(d.left-a.left-ma.outerWidth()/2+c.outerWidth()/2);var g=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;0>c+a.left?c=parseInt(d.left-a.left+15):c+a.left+ma.outerWidth()>g&&(c=parseInt(d.left+d.width-a.left-ma.outerWidth()));0>e+a.top&&(e=parseInt(d.top-
a.top+ma.outerHeight()+15));ma.css({left:c+"px",top:e+"px"}).show()}).on("mouseleave","[data-tooltip]",function(a){ma.hide()}));var Ic=F.find(".hap-circle-player").length,bd;Ic&&HAPUtils.hasCanvas()&&("undefined"===typeof HAPCirclePlayer?console.log("Link to circleplayer.js file missing in head tag!"):bd=new HAPCirclePlayer({settings:b,parent:F}));var Ha=Ic?F.find(".hap-progress-canvas"):F.find(".hap-seekbar");Ha.on(Yb.downEvent,function(a){if(b.disableSeekbarInRange&&Fa||b.disableSeekbar||b.disableSongSkip||
ca&&ca.isAdOn()||!R)return!1;H(a);return!1});lc.length&&(b.useWaveSeekbar=!0);if(b.useWaveSeekbar){var df=Ha.width(),ef=Ha.height(),Dc=document.createElement("canvas");var Rd=Dc;Dc.width=df;Dc.height=ef;Dc.classList.add("hap-canvas-seekbar-bg");var Zb=Dc.getContext("2d");Zb.fillStyle=b.waveBgColor;lc.prepend(Dc);var Ec=document.createElement("canvas");var Sd=Ec;Ec.width=df;Ec.height=ef;Ec.classList.add("hap-canvas-seekbar-progress");var $b=Ec.getContext("2d");$b.fillStyle=b.waveProgressColor;he.append(Ec)}if(!Sc){var Jd=
function(){Ha.off(Yb.moveEvent,w).off("mouseout",Jd);Hb.off("mouseout",Jd);ma.hide()};Ha.on("mouseover",function(){if(!yb){if(ca&&ca.isAdOn())return!1;Ha.on(Yb.moveEvent,w).on("mouseout",Jd);Hb.on("mouseout",Jd)}})}var Kd=new HAPVolumeSlider({volume:b.volume,container:F,tooltip:ma});f(Kd).on("HAPVolumeSlider.VOLUME_CHANGE",function(a,c){b.volume=c;u.setVolume(b.volume)});f(Kd).on("HAPVolumeSlider.TOGGLE_MUTE",function(a){u.toggleMute()});var lb=F.find(".hap-range-handle-a"),wb=F.find(".hap-range-handle-b");
parseInt(lb.attr("data-width"),10);parseInt(wb.attr("data-width"),10);var Ta,kb,Xc,Yc,Fa,$a,te=F.find(".hap-range-bg"),Wa,ue=F.find(".hap-range-level"),jc=F.find(".hap-range-min-time"),kc=F.find(".hap-range-max-time");u.toggleRange=function(){R&&(Fa?($e.css("display","none"),$a=!0):($e.css("display","block"),Wa=te.width(),Xc=parseInt(lb.css("left"),10),Yc=parseInt(wb.css("left"),10),Ta=D(Xc),kb=D(Yc),$a=!1),Fa=!Fa)};u.resetRange=function(){Fa=!1;$a=!0;lb.css("left",0);wb.css("left",Wa);jc.html("00:00");
kc.html("00:00")};u.setRange=function(a,c){var d=u.getDuration();if("undefined"===typeof d)return!1;0>a&&(a=0);c>d&&(c=d);Ta=a;kb=c;$a=!1;lb.css("left",Ta/d*Wa);wb.css("left",kb/d*Wa);jc.html(HAPUtils.formatTime(a));kc.html(HAPUtils.formatTime(c));d=parseInt(lb.css("left"),10);var e=parseInt(wb.css("left"),10);ue.css({left:d,right:Wa-e});Fa||u.toggleRange()};u.resizeRange=function(){var a=u.getDuration();if("undefined"===typeof a||"undefined"===typeof Ta||"undefined"===typeof kb)return!1;Wa=te.width();
lb.css("left",Ta/a*Wa);wb.css("left",kb/a*Wa);jc.html(HAPUtils.formatTime(Ta));kc.html(HAPUtils.formatTime(kb));a=parseInt(lb.css("left"),10);var c=parseInt(wb.css("left"),10);ue.css({left:a,right:Wa-c})};u.getRange=function(){return"undefined"!==typeof Ta&&"undefined"!==typeof kb?[Ta,kb]:null};if(lb.length){var xb=!0;var Zc=new HAPRangeSlider({settings:b,range_handle_a:lb,range_handle_b:wb});f(Zc).on("HAPRangeSlider.RANGE_CHANGE",function(a,c){var d=c.point.pageX-te.offset().left,e=c.elem;0>d?d=
0:d>Wa&&(d=Wa);e.hasClass("hap-range-handle-a")?(d>parseInt(wb.css("left"),10)-3&&(d=parseInt(wb.css("left"),10)-3),Xc=d,Ta=D(Xc),jc.html(HAPUtils.formatTime(Ta))):(d<parseInt(lb.css("left"),10)+4&&(d=parseInt(lb.css("left"),10)+4),Yc=d,kb=D(Yc),kc.html(HAPUtils.formatTime(kb)));ue.css({left:Xc,right:Wa-Yc});e.css("left",d)})}var ve=F.find(".hap-playback-rate-seekbar");F.find(".hap-playback-rate-min").html(b.playbackRateMin);F.find(".hap-playback-rate-max").html(b.playbackRateMax);if(ve.length){var we=
new HAPPlaybackRateSlider({settings:b,wrapper:F,seekbar:ve,sliderBg:F.find(".hap-playback-rate-bg"),sliderLevel:F.find(".hap-playback-rate-level"),isVertical:ve.hasClass("hap-vertical"),tooltip:ma});f(we).on("HAPPlaybackRateSlider.RANGE_CHANGE",function(a,c){u.setPlaybackRate(c.value)})}if(b.disableRightClickOverPlayer)F.on("contextmenu",function(){return!1});if(b.useKeyboardNavigationForPlayback&&b.keyboardControls.length)if(Array.isArray(b.keyboardControls)||(b.keyboardControls=b.keyboardControls.split(";")),
b.useGlobalKeyboardControls)Hb.on("keydown.mvp",function(a){return m(a)});else F.hover(function(){Hb.on("keydown",function(a){return m(a)})},function(){Hb.off("keydown")});var ff=[F.find(".hap-next-toggle"),F.find(".hap-prev-toggle"),F.find(".hap-skip-forward"),F.find(".hap-skip-backward"),F.find(".hap-playlist-toggle"),F.find(".hap-playlist-close"),sf,F.find(".hap-share-close"),F.find(".hap-share-item"),F.find(".hap-playback-rate-close"),F.find(".hap-range-close"),F.find(".hap-lyrics-close"),F.find(".hap-video-close"),
rf,ne,qf,zb,eb,bc,mb,le,me];ke=ff.length;for(Wb=0;Wb<ke;Wb++)f(ff[Wb]).css("cursor","pointer").on("click",W);window.onbeforeunload=function(a){b.useStatistics&&Ja&&(sb?0<zc&&qb("hap_time_played",Ja):(qb("hap_play_count",Ja),60>u.getCurrentTime()&&qb("hap_skipped_first_minute",Ja)))};if(b.addResizeEvent)Ee.on("resize",function(){if(!Z)return!1;oe&&clearTimeout(oe);oe=setTimeout(ce,150)});this.getTitle=function(a,c){if(a.artist&&!HAPUtils.isEmpty(a.artist)&&a.title&&!HAPUtils.isEmpty(a.title))var d=
c?a.artist+" - "+a.title:a.artist+b.artistTitleSeparator+a.title;else a.title&&!HAPUtils.isEmpty(a.title)?d=a.title:a.artist&&!HAPUtils.isEmpty(a.artist)&&(d=a.artist);return d};b.useStatistics&&(fetch("https://extreme-ip-lookup.com/json/").then(function(a){return a.json()}).then(function(a){We=a})["catch"](function(a,c){console.log("country request failed")}),F.on("click",".hap-like-count",function(a){if(!Z||!R)return!1;a=f(this).closest(".hap-playlist-item");qb("hap_like_count",a.attr("data-id"))}),
F.on("click",".hap-download-count:not(.hap-no-download)",function(a){if(!Z||!R)return!1;a=f(this).closest(".hap-playlist-item");qb("hap_download_count",a.attr("data-id"))}));this.playMedia=function(){if(!Z||!R||fb)return!1;if("youtube"==R)ba&&Sa&&ba.playVideo();else if(Q){sb&&Q.load();var a=Q.play();void 0!==a&&a.then(function(){})["catch"](function(c){})}};this.pauseMedia=function(){if(!Z||!R||!fb)return!1;"youtube"==R?ba&&Sa&&ba.pauseVideo():Q&&Q.pause()};this.togglePlayback=function(){if(!Z||!R)return!1;
ca&&ca.clearAdMidTimeout();if(ca&&ca.isAdMidOn())ca.toggleAdMidAudio();else if("youtube"==R){if(ba&&Sa){var a=ba.getPlayerState();1==a?ba.pauseVideo():2==a?ba.playVideo():(-1==a||5==a||0==a)&&ba.playVideo()}}else Q&&(Q.paused?(sb&&Q.load(),a=Q.play(),void 0!==a&&a.then(function(){ca&&ca.isAdPreOn()&&(eb.find(".hap-btn-play").hide(),eb.find(".hap-btn-pause").show())})["catch"](function(c){})):(Q.pause(),ca&&ca.isAdPreOn()&&(eb.find(".hap-btn-play").show(),eb.find(".hap-btn-pause").hide())))};this.nextMedia=
function(){if(!Z||b.disableSongSkip)return!1;if(0!=X)if(mc(),b.usePlaylist&&se){var a=U.find(".hap-playlist-item-selected").nextAll(".hap-playlist-item:not(.hap-filter-hidden)").filter(":first");a.length?(a=a.attr("data-id"),ha.setCounter(a,!1)):ha.advanceHandler(1,!0)}else ha.advanceHandler(1,!0)};this.previousMedia=function(){if(!Z||b.disableSongSkip)return!1;0!=X&&(mc(),ha.advanceHandler(-1,!0))};this.loadMedia=function(a,c,d,e){if(!Z||sa)return!1;if(0!=X){console.log(a,c,d,e);var g=-1;if("title"==
a){for(a=0;a<X;a++)if(c==la[a].data.title){g=a;var r=!0;break}if(!r)return alert('No media with title "'+c+'" to load! LoadMedia failed.'),!1}else if("title-artist"==a){var E=U.find('.hap-playlist-item[data-title="'+d+'"][data-artist="'+e+'"]');if(0==E.length)return alert('No media with title "'+d+'" and artist "'+e+'" to load! LoadMedia failed.'),!1;g=E.attr("data-id")}else if("counter"==a){if(0>c||c>X-1)return alert('Invalid track number. Track number  "'+c+'" doesnt exist. LoadMedia failed.'),
!1;g=c}else if("id"==a){E=U.find(".hap-playlist-item[data-media-id="+c+"]");if(0==E.length)return alert("No media with media ID "+c+" to load! LoadMedia failed."),!1;g=E.attr("data-id")}else if("id-title"==a){d&&e?E=U.find('.hap-playlist-item[data-media-id="'+c+'"][title="'+d+'"][data-artist="'+e+'"]'):d?E=U.find('.hap-playlist-item[data-media-id="'+c+'"][title="'+d+'"]'):e&&(E=U.find('.hap-playlist-item[data-media-id="'+c+'"][data-artist="'+e+'"]'));if(0==E.length)return alert("No media with media ID "+
c+" to load! LoadMedia failed."),!1;g=E.attr("data-id")}else return console.log("loadMedia function requires format parameter!"),!1;mc();Ba=!0;ha.processPlaylistRequest(g)}};this.loadMore=function(){console.log(xa);if(!Z||!xa||!pa||sa)return!1;sa=!0;La.show();Ca=!0;ia=[];"soundcloud"==xa?Nb():"podcast"==xa?db():"folder"==xa?Aa():"youtube"==xa&&(pb||J("youtube"),pb.resumeLoad(pa))};this.setLoadMore=function(a){Oa=a};this.endLoadMore=function(){sa=!1;La.hide();Ca=!1};this.addMore=function(){if(!Z||
sa)return!1;nb&&(Ca||ud())};this.setAddMore=function(a){nb=a};this.processPlaylistRequest=function(a){mc();Ba=!0;ha.processPlaylistRequest(a)};this.loadPlaylist=function(a,c){if(!Z||sa)return!1;if("string"===typeof a){b.mediaId=c;if(b.activePlaylist==a)return!1;k(a)}else return alert("Invalid value loadPlaylist!"),!1};this.addTrack=function(a,c,d,e){if(!Z||sa)return!1;if("undefined"===typeof a)return alert("addTrack method requires track parameter. AddTrack failed."),!1;sd=!1;"undefined"!==typeof c&&
(sd=c,0==c&&(td=!0));e?(pd=!0,wd=!1):pd=!1;Qb.hide();ib=d;wc=!1;Ob=!0;dc?"undefined"!==typeof ib?0>ib?ib=0:(ib=X,wc=!0):(wc=!0,ib=X):(ib=0,wc=!0);sa=!0;La.show();Mb=-1;ia=[];ta=[];Array.isArray(a)?ta=a:ta.push(a);X=ta.length;dc=U;pd?(ia=ta,Na()):M()};this.inputAudio=function(a){if(!Z||sa)return!1;if("undefined"===typeof a)return alert("inputAudio method requires data parameter. inputAudio failed."),!1;va&&S();0<X&&ha.reSetCounter();I=a;R=a.type;if(-1==bf.indexOf(R))return alert("inputAudio method supports tracks that dont require processing: "+
bf),!1;"shoutcast"!=R&&"icecast"!=R&&"radiojar"!=R&&(fe(),yd&&N());Ba=!0;Sb()};this.removeTrack=function(a,c){if(!Z||sa)return!1;if(0!=X){if("title"==a){var d;for(d=0;d<X;d++)if(c==la[d].data.title){var e=U.children(".hap-playlist-item").eq(d);var g=!0;break}if(!g)return alert('Track with title "'+c+'" doesnt exist. RemoveTrack failed.'),!1}else if("counter"==a){c=parseInt(c,10);if(0>c||c>X-1)return alert('Track number  "'+c+'" doesnt exist. RemoveTrack failed.'),!1;e=U.find(".hap-playlist-item").eq(c)}else if("id"==
a){if(e=U.find(".hap-playlist-item[data-media-id="+c+"]"),0==e.length)return alert('Track with media id "'+c+'" doesnt exist. RemoveTrack failed.'),!1}else return alert("removeTrack method failed."),!1;e.remove();la.splice(parseInt(e.attr("data-id"),10),1);Ya(!0);0<X?(e=ha.getCounter(),c==e?(Bc(),ha.setPlaylistItems(X)):(ha.setPlaylistItems(X,!1),c<e&&ha.reSetCounter(ha.getCounter()-1))):cd()}};this.sort=function(a){if(!Z||3>X)return!1;if("undefined"===typeof a)return console.log("Sort method requires order parameter. Sort method failed."),
!1;if(bb==d)return!1;var c=U.children(".hap-playlist-item"),d=a.toLowerCase();if("title-asc"==d){HAPUtils.keysrt2(la,"data","title");var e;a=[];for(e=0;e<X;e++)a.push(la[e].id);zb.find(".hap-btn-sort-alpha-up").hide();zb.find(".hap-btn-sort-alpha-down").show()}else if("title-desc"==d){HAPUtils.keysrt2(la,"data","title",!0);a=[];for(e=0;e<X;e++)a.push(la[e].id);zb.find(".hap-btn-sort-alpha-up").show();zb.find(".hap-btn-sort-alpha-down").hide()}else if("random"==d)a=HAPUtils.randomiseArray(X),la=HAPUtils.sortArray(la,
a);else{console.log("Unknown sort order. Sort method failed.");return}bb=d;d=Ja;U.append(f.map(a,function(g){return c[g]}));-1!=d&&(d=U.children(".hap-playlist-item[data-id='"+d+"']").index(),ha.reSetCounter(d));Ya(!0)};this.destroyInstance=function(){cd();Bc();b.usePlaylistScroll&&("mcustomscrollbar"==b.playlistScrollType?"undefined"!==typeof mCustomScrollbar&&Xa.mCustomScrollbar("destroy"):"perfect-scrollbar"==b.playlistScrollType&&rb&&(rb.destroy(),rb=null),Tc=!1)};this.destroyInstance2=function(){Bc();
b.usePlaylistScroll&&("mcustomscrollbar"==b.playlistScrollType?"undefined"!==typeof mCustomScrollbar&&Xa.mCustomScrollbar("destroy"):"perfect-scrollbar"==b.playlistScrollType&&rb&&(rb.destroy(),rb=null),Tc=!1);b.sortableTracks&&b.sortableTracksSet&&(U.sortable("destroy"),b.sortableTracksSet=!1)};this.destroyMedia=function(){if(!Z)return!1;Z&&R&&(va&&S(),Bc(),ha.reSetCounter())};this.destroyPlaylist=function(){if(!Z)return!1;cd()};this.setPlaybackRate=function(a){if(!Z||!R)return!1;b.playbackRate=
a;we&&we.setVisual(a);if("youtube"==R)ba.setPlaybackRate(Number(a));else if(Q)try{Q.playbackRate=Number(a)}catch(c){}if(qa)try{qa.playbackRate=Number(a)}catch(c){}};this.toggleRandom=function(a){if(!Z||"undefined"===typeof ha)return!1;b.randomPlay="undefined"!==typeof a?a:!b.randomPlay;ha.setRandom(b.randomPlay);mb.find(".hap-btn").hide();b.randomPlay?mb.find(".hap-btn-random-on").show():mb.find(".hap-btn-random-off").show()};this.setLoop=function(a){if(!Z||"undefined"===typeof ha)return!1;bc.find(".hap-btn").hide();
b.loopState=a;cc=Pc.indexOf(b.loopState);bc.find(".hap-btn-loop-"+b.loopState).show();ha.setLooping(b.loopState)};this.getVolume=function(){return b.volume};this.setVolume=function(a){if(!Z)return!1;0>a?a=0:1<a&&(a=1);b.volume=a;ca&&ca.setVolume(b.volume);"youtube"==R?ba&&Sa&&ba.setVolume(100*b.volume):Q&&(Q.volume=b.volume,Q.muted=0==b.volume?!0:!1);Kd&&Kd.setVisual(b.volume);b.useFixedPlayer&&window.hap_fixed_active_player==b.instanceName&&Ga.setVisual(b.volume)};this.toggleMute=function(){if(!Z)return!1;
0<b.volume?(re=b.volume,b.volume=0):b.volume=re;u.setVolume(b.volume)};this.setAutoPlay=function(a){Ba=a};this.seek=function(a){if(!Z||!R||b.disableSeekbarInRange&&Fa||b.disableSeekbar||b.disableSongSkip)return!1;if("youtube"==R)ba&&Sa&&ba.seekTo(a);else if("audio"==R&&Q)try{Q.currentTime=a}catch(c){console.log(c)}};this.seekBackward=function(a){if(!Z||!R)return!1;a=a||b.seekTime;a=parseInt(a,10);if("youtube"==R)ba&&Sa&&(a=Math.max(ba.getCurrentTime()-a,0),ba.seekTo(a));else if(Q)try{Q.currentTime=
Math.max(Q.currentTime-a,0)}catch(c){console.log(c)}};this.seekForward=function(a){if(!Z||!R||b.disableSeekbarInRange&&Fa||b.disableSeekbar||b.disableSongSkip)return!1;a=a||b.seekTime;a=parseInt(a,10);if("youtube"==R)ba&&Sa&&(a=Math.min(ba.getCurrentTime()+a,ba.getDuration()),ba.seekTo(a));else if(Q)try{Q.currentTime=Math.min(Q.currentTime+a,Q.duration)}catch(c){console.log(c)}};this.getCurrentMediaUrl=function(){if(!Z)return!1;if(!R)return"";var a=-1==window.location.href.indexOf("?")?"?":"&";var c=
"hap-query-instance="+encodeURIComponent(b.instanceName),d=void 0!=I.mediaId?"&hap-media-id="+I.mediaId:"&hap-active-item="+Ja,e=Ib?"&hap-resume-time="+Math.floor(u.getCurrentTime()):"";a=a+c+"&hap-scroll-to-player=1"+d+e;void 0!=I.mediaId&&-1==uf.indexOf(I.origtype)&&I.safeTitle&&(c="&hap-media-title="+encodeURIComponent(I.safeTitle),a+=c);return a};this.getCurrentTime=function(){return"youtube"==R?ba&&Sa?ba.getCurrentTime():0:Q?Q.currentTime:0};this.getDuration=function(){if(!Z||!R)return!1;if("youtube"==
R){if(ba&&Sa)return ba.getDuration()}else if(Q)return Q.duration};this.destroyPlaylistScroll=function(){if(!Z)return!1;b.usePlaylistScroll&&("mcustomscrollbar"==b.playlistScrollType?"undefined"!==typeof mCustomScrollbar&&Xa.mCustomScrollbar("destroy"):"perfect-scrollbar"==b.playlistScrollType&&rb&&(rb.destroy(),rb=null),Tc=!1)};this.getSetupDone=function(){return Z};this.getMediaPlaying=function(){return Z?fb:!1};this.getPlaylistLoading=function(){return sa};this.getCounter=function(){return Z?"undefined"!==
typeof ha?ha.getCounter():-1:null};this.getPlaylistContent=function(){return U};this.getPlaylistData=function(){return la};this.getLastPlaylistData=function(){return Z?Zd:!1};this.getPlaylistLength=function(){return Z?HAPUtils.isNumber(X)?X:0:!1};this.getPlaylistList=function(){return Vd};this.getSettings=function(){return b};this.getCurrMediaData=function(){return Z?I:!1};this.getWrapper=function(){return F};this.getPlaylistItems=function(){if(!Z)return!1;var a=[];U.find(".hap-playlist-item").each(function(){a.push(f(this))});
return a};this.openPopup=function(){if(!Z||b.isPopup)return!1;hapOpenPopup(b,u)};this.togglePlaylist=function(){if(-1<wa.indexOf("hap-art-narrow-light")||-1<wa.indexOf("hap-art-narrow-dark"))b.playlistOpened?(Gd.stop().animate({left:"0px"},{duration:350}),Za.stop().animate({left:-Gd.width()+"px"},{duration:350})):(Gd.stop().animate({left:Gd.width()+"px"},{duration:350}),Za.stop().animate({left:"0px"},{duration:350}));else if(-1<wa.indexOf("hap-art-wide-light")||-1<wa.indexOf("hap-art-wide-dark")||
-1<wa.indexOf("hap-brona-light")||-1<wa.indexOf("hap-brona-dark"))if(b.playlistOpened)Za.stop().animate({height:"0px"},{duration:350});else{var a=Za.css("height","auto").height();Za.height(0).stop().animate({height:a+"px"},{duration:350,complete:function(){f(this).height("auto")}})}else-1<wa.indexOf("hap-wall")?b.playlistOpened?Za.css("left","-20000px"):Za.css("left",0):-1<wa.indexOf("hap-classic")?b.playlistOpened?Za.slideUp():Za.slideDown():-1<wa.indexOf("hap-fixed")&&(b.playlistOpened?F.stop().animate({bottom:-Za.height()+
"px"},{duration:350}):F.stop().animate({bottom:"0px"},{duration:350}));b.playlistOpened=!b.playlistOpened};if(af&&b.continousKey)if(!Ed)localStorage.removeItem(b.continousKey);else if(localStorage.getItem(b.continousKey)){var Fc=JSON.parse(localStorage.getItem(b.continousKey));b.activePlaylist=Fc.activePlaylist;b.resumeTime=Fc.resumeTime;b.volume=Fc.volume;b.activeItem=Fc.activeItem;Ba=b.autoPlay=Fc.autoPlay;b.lastPositionArr=Fc.lastPositionArr;localStorage.removeItem(b.continousKey)}setTimeout(function(){if(b.isPopup&&
b.copyCurrentPlaylistToPopup){la=b.playlistDataArr;X=la.length;ha.setPlaylistItems(X,!1);if(b.useStatistics){if(!b.usePlaylist){var a;for(a=0;a<X;a++)la[a].data.hapStatsSet=!1}Cb()}dc=U;if(b.usePlaylist&&b.addPlaylistEvents){var c;U.find(".hap-playlist-item").each(function(){c=f(this);c.on("click",".hap-playlist-thumb, .hap-playlist-title-wrap",t);Sc||(c.on("mouseenter ",".hap-playlist-thumb, .hap-playlist-title-wrap",B),c.on("mouseleave",".hap-playlist-thumb, .hap-playlist-title-wrap",K))})}T()}else Ld.length?
(sa=!0,La.show(),f(u).trigger("playlistStartLoad",{instance:u,instanceName:b.instanceName}),ta=Ld,X=ta.length,M()):b.activePlaylist&&!HAPUtils.isEmpty(b.activePlaylist)?k(b.activePlaylist):T()},50);return this}})(jQuery);var hap_popup_window,hap_player_instance,hap_player_auto_instance,hasLocalStorage=HAPUtils.hasLocalStorage();
function hapOpenPopup(f,b){if(!hasLocalStorage||!localStorage.getItem("hap_popup")){hap_player_instance=b;var z=f.popupUrl||f.sourcePath+"popup.html?rand="+99999999*Math.random(),h=f.popupWidth||hap_player_instance.width(),p=f.popupHeight||hap_player_instance.height(),l=(window.screen.width-parseInt(h,10))/2,C=(window.screen.height-parseInt(p,10))/2;if(!hap_popup_window||hap_popup_window.closed)if(hap_popup_window=window.open(z,"audio_player","menubar=no,toolbar=no,location=no,scrollbars=1,resizable,width="+
h+",height="+p+",left="+l+",top="+C),!hap_popup_window)return alert("Player can not be opened in a popup window because your browser is blocking Pop-Ups. You need to allow Pop-Ups in browser for this site to use the Player."),!1}}
function hapNotifyParent(){if(hap_popup_window&&void 0!=hap_popup_window.initPopup){if(hap_player_instance){var f=hap_player_instance.getSettings();f.volume=hap_player_instance.getVolume();f.activePlaylist=f.activePlaylist;f.activeItem=hap_player_instance.getCounter();f.resumeTime=hap_player_instance.getCurrentTime();f.copyCurrentPlaylistToPopup?(f.playlistDataArr=hap_player_instance.getPlaylistData(),hap_player_instance.destroyInstance2()):hap_player_instance.destroyInstance();var b=hap_player_instance.getWrapper()}else hap_player_auto_instance&&
(f=hap_player_auto_instance.settings,f.copyCurrentPlaylistToPopup=!1,b=hap_player_auto_instance.wrapper);var z=b.attr("id"),h=hapjq("#hap-inline-css").clone().wrap("<p>").parent().html(),p=hapjq("#hap-playlist-list").remove().wrap("<p>").parent().html();b=b.remove().wrap("<p>").parent().html();try{window[f.instanceName]=hap_popup_window.initPopup(b,z,f,h,p)}catch(l){return alert("initPopup error: "+l.message),!1}}}
(function(f,b){f.HAPFixedPlayer=function(z){function h(Y){if(!m){if("touchstart"==Y.type){if(Y=Y.originalEvent.touches,!(Y&&0<Y.length))return!1}else Y.preventDefault();m=!0;b(C).trigger("HAPFixedPlayer.SET_PROGRESS_START",{inst:K});A.on(x.moveEvent,function(T){a:{if("touchmove"==T.type){if(T.originalEvent.touches&&T.originalEvent.touches.length)var fa=T.originalEvent.touches;else if(T.originalEvent.changedTouches&&T.originalEvent.changedTouches.length)fa=T.originalEvent.changedTouches;else break a;
if(1<fa.length)break a;fa=fa[0]}else fa=T;T.preventDefault();D=G.width();T=fa.pageX-G.offset().left;0>T?T=0:T>D&&(T=D);T=Math.max(0,Math.min(1,T/D));b(C).trigger("HAPFixedPlayer.SET_PROGRESS",{inst:K,point:T,update:!0});p(fa)}}).on(x.upEvent,function(T){a:if(m){m=null;A.off(x.moveEvent).off(x.upEvent);if("touchend"==T.type){if(T.originalEvent.touches&&T.originalEvent.touches.length)var fa=T.originalEvent.touches;else if(T.originalEvent.changedTouches&&T.originalEvent.changedTouches.length)fa=T.originalEvent.changedTouches;
else break a;if(1<fa.length)break a;fa=fa[0]}else fa=T;T.preventDefault();D=G.width();T=fa.pageX-G.offset().left;0>T?T=0:T>D&&(T=D);T=Math.max(0,Math.min(1,T/D));b(C).trigger("HAPFixedPlayer.SET_PROGRESS",{inst:K,point:T,update:!0})}})}return!1}function p(Y){if(!HAPUtils.isNumber(t))return!1;var T=G;D=G.width();var fa=Y.pageX-da.offset().left;if(!HAPUtils.isNumber(fa))return!1;0>fa?fa=0:fa>D&&(fa=D);fa=Math.max(0,Math.min(1,fa/D));if(!HAPUtils.isNumber(fa))return!1;Aa.text(HAPUtils.formatTime(t*fa)+
" / "+HAPUtils.formatTime(t));fa=q[0].getBoundingClientRect();T=T[0].getBoundingClientRect();Y=parseInt(Y.pageX-H.scrollLeft()-fa.left-Aa.outerWidth()/2);T=parseInt(T.top-fa.top-Aa.outerHeight());Aa.css({left:Y+"px",top:T+"px"}).show()}function l(){if(y.useWaveSeekbarInFixed&&W){var Y=G.width();Na.width=Y;uc.width=Y;S.width=Y;Db.fillStyle=y.waveBgColor;Ya.fillStyle=y.waveProgressColor;y.waveBarWidth?HAPUtils.drawBars(Db,Ya,S,W.split(","),0,Y):HAPUtils.drawWave(Db,Ya,S,W.split(","),0,Y)}}var C=this,
y=z.settings,N=b("body"),A=b(document),H=b(f),x=HAPUtils.getEvents(),n,w,D,m,t,B,K,W,S=y.waveOptions;S.waveColor=y.waveBgColor;S.progressColor=y.waveProgressColor;S.barWidth=y.waveBarWidth;S.barRadius=y.waveBarRadius;var q=z.wrapper.find(b("#hap-sticky-fixed"));q.length?q.appendTo(N):q=b("#hap-sticky-fixed");var k=q.find(".hap-sticky-player-thumb"),v=q.find(".hap-sticky-player-title"),O=q.find(".hap-sticky-player-artist"),G=q.find(".hap-sticky-music-seekbar"),M=q.find(".hap-sticky-music-seekbar-wave"),
da=q.find(".hap-sticky-music-seekbar-progress-bg"),J=q.find(".hap-sticky-music-seekbar-progress"),ea=G.find(".hap-sticky-music-seekbar-wave-progress");var ja=q.find(".hap-sticky-player-holder");q.find(".hap-sticky-player-title-wrap");q.find(".hap-sticky-playback-controls");var ya=q.find(".hap-sticky-time-current"),na=q.find(".hap-sticky-time-total"),Aa=q.find(".hap-tooltip"),ec=q.find(".hap-sticky-share-holder"),fc=q.find(".hap-sticky-info-title"),Rc=q.find(".hap-sticky-info-desc"),nd=q.find(".hap-sticky-lyrics-toggle").on("click",
function(){b(C).trigger("HAPFixedPlayer.LYRICS_TOGGLE",{inst:K})});q.find(".hap-sticky-prev-toggle").on("click",function(){if(y.disableSongSkip)return!1;b(C).trigger("HAPFixedPlayer.PREVIOUS_MEDIA",{inst:K})});q.find(".hap-sticky-next-toggle").on("click",function(){if(y.disableSongSkip)return!1;b(C).trigger("HAPFixedPlayer.NEXT_MEDIA",{inst:K})});var Ab=q.find(".hap-sticky-playback-toggle").on("click",function(){b(C).trigger("HAPFixedPlayer.TOGGLE_PLAYBACK",{inst:K})});var hb=q.find(".hap-sticky-playback-toggle-ex").on("click",
function(){b(C).trigger("HAPFixedPlayer.TOGGLE_PLAYBACK",{inst:K})});var db=q.find(".hap-sticky-player-toggle-ex").on("click",function(){var Y=ja.height();y.fixedPlayerOpened?(ja.stop().animate({bottom:-Y+"px"},{duration:350}),db.find(".hap-sticky-btn-player-close").hide(),db.find(".hap-sticky-btn-player-open").show()):(ja.stop().animate({bottom:"0px"},{duration:350}),db.find(".hap-sticky-btn-player-close").show(),db.find(".hap-sticky-btn-player-open").hide());y.fixedPlayerOpened=!y.fixedPlayerOpened});
q.find(".hap-sticky-share-toggle").on("click",function(){fc.html(C.getTitle(B));B.description?Rc.html(B.description):Rc.html("");ec.toggle()});q.find(".hap-sticky-share-close").on("click",function(){ec.hide()});G.on(x.downEvent,function(Y){h(Y);return!1});if(!HAPUtils.isMobile()){var Nb=function(){G.off(x.moveEvent,p).off("mouseout",Nb);A.off("mouseout",Nb);Aa.hide()};G.on("mouseover",function(){m||(G.on(x.moveEvent,p).on("mouseout",Nb),A.on("mouseout",Nb))})}if(y.useWaveSeekbarInFixed){z=G.width();
N=G.height();var Ea=document.createElement("canvas");var Na=Ea;Ea.width=z;Ea.height=N;Ea.classList.add("hap-sticky-canvas-seekbar-bg");var Db=Ea.getContext("2d");Db.fillStyle=y.waveBgColor;M.prepend(Ea);var uc=Ea=document.createElement("canvas");Ea.width=z;Ea.height=N;Ea.classList.add("hap-sticky-canvas-seekbar-progress");var Ya=Ea.getContext("2d");Ya.fillStyle=y.waveProgressColor;ea.append(Ea);M.css("display","block")}else da.css("display","block");y.fixedPlayerOpened?(db.find(".hap-sticky-btn-player-close").show(),
db.find(".hap-sticky-btn-player-open").hide()):(db.find(".hap-sticky-btn-player-close").hide(),db.find(".hap-sticky-btn-player-open").show());var Cb=new HAPVolumeSlider({volume:y.volume,container:q.find(".hap-sticky-volume-wrap")});b(Cb).on("HAPVolumeSlider.VOLUME_CHANGE",function(Y,T){b(C).trigger("HAPFixedPlayer.VOLUME_CHANGE",{inst:K,volume:T})});b(Cb).on("HAPVolumeSlider.TOGGLE_MUTE",function(Y){b(C).trigger("HAPFixedPlayer.TOGGLE_MUTE",{inst:K})});this.setData=function(Y){B=Y.media;w||(w=!0,
q.css({display:"block"}),setTimeout(function(){y.fixedPlayerOpened&&ja.css("bottom",0);q.addClass("hap-fixed-visible")},200));K=Y.inst;B.thumb?k.css("backgroundImage","url("+B.thumb+")"):k.css("backgroundImage","none");B.title?v.html(B.title):v.html("");B.artist?O.html(B.artist):O.html("");B.lyrics?nd.show():nd.hide();C.setVisual(Y.volume);W=null;J.width(0);ea.width(0);if(y.useWaveSeekbarInFixed&&Y.media.peaks){M.css("display","block");da.css("display","none");var T=G.width(),fa=G.height();Na.width=
T;uc.width=T;Na.height=fa;uc.height=fa;S.width=T;S.height=fa;Db.fillStyle=y.waveBgColor;Ya.fillStyle=y.waveProgressColor;W=Y.media.peaks;y.waveBarWidth?HAPUtils.drawBars(Db,Ya,S,W.split(","),0,T):HAPUtils.drawWave(Db,Ya,S,W.split(","),0,T)}else M.css("display","none"),da.css("display","block")};this.setProgressData=function(Y,T,fa,Sb,ad){y.useWaveSeekbarInFixed&&W?T?ea.width(Y+"%"):ea.width(100*Y+"%"):T?J.width(Y):J.width(Y*da.width());t=ad;fa&&ya.html(fa);Sb&&na.html(Sb)};this.setPauseBtn=function(){Ab&&
(Ab.find(".hap-sticky-music-play-btn").hide(),Ab.find(".hap-sticky-music-pause-btn").show(),hb.find(".hap-sticky-music-play-btn").hide(),hb.find(".hap-sticky-music-pause-btn").show())};this.setPlayBtn=function(){Ab&&(Ab.find(".hap-sticky-music-play-btn").show(),Ab.find(".hap-sticky-music-pause-btn").hide(),hb.find(".hap-sticky-music-play-btn").show(),hb.find(".hap-sticky-music-pause-btn").hide())};this.setVisual=function(Y){Cb&&Cb.setVisual(Y)};this.getTitle=function(Y){var T="";Y.artist&&!HAPUtils.isEmpty(Y.artist)&&
Y.title&&!HAPUtils.isEmpty(Y.title)?T=Y.artist+" - "+Y.title:Y.title&&!HAPUtils.isEmpty(Y.title)?T=Y.title:Y.artist&&!HAPUtils.isEmpty(Y.artist)&&(T=Y.artist);return T};if(y.useWaveSeekbarInFixed)H.on("resize",function(){n&&clearTimeout(n);n=setTimeout(l,150)})}})(window,jQuery);